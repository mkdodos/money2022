(this["webpackJsonpsocial-cool"]=this["webpackJsonpsocial-cool"]||[]).push([[0],{222:function(e,t,c){},223:function(e,t,c){},225:function(e,t,c){"use strict";c.r(t);var n=c(72),a=c.n(n),r=c(1),i=c.n(r),o=c(18),s=c(35),l=c(7),j=c(243),d=c(109),b=c(78),u=c(17),O=c(145),h=(c(226),c(190),O.a.initializeApp({apiKey:"AIzaSyDUSJ5yzHvTCCSQTuONsPtOBGodjamReHc",authDomain:"money2022-173b9.firebaseapp.com",projectId:"money2022-173b9",storageBucket:"money2022-173b9.appspot.com",messagingSenderId:"944583877759",appId:"1:944583877759:web:0fd8a43af8a727a76c0b4a"})),x=O.a.firestore(),m=(O.a.initializeApp({apiKey:"AIzaSyBKVsNm8RP9VKYBgEwmyRQsitx9dncLuaI",authDomain:"social-cool-f16ba.firebaseapp.com",projectId:"social-cool-f16ba",storageBucket:"social-cool-f16ba.appspot.com",messagingSenderId:"578558980743",appId:"1:578558980743:web:4668ba80e8df3c24087e22"},"dada").firestore(),h.auth()),f=c(0),p=i.a.createContext();function v(){return Object(r.useContext)(p)}function g(e){var t=e.children,c=Object(r.useState)(),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(r.useState)(!0),s=Object(l.a)(o,2),j=s[0],d=s[1];Object(r.useEffect)((function(){return m.onAuthStateChanged((function(e){i(e),d(!1)}))}),[]);var b={currentUser:a,login:function(e,t){return m.signInWithEmailAndPassword(e,t)},signup:function(e,t){return m.createUserWithEmailAndPassword(e,t)},logout:function(){return m.signOut()},resetPassword:function(e){return m.sendPasswordResetEmail(e)},updateEmail:function(e){return a.updateEmail(e)},updatePassword:function(e){return a.updatePassword(e)}};return Object(f.jsx)(p.Provider,{value:b,children:!j&&t})}var C=c(19);function y(){var e=i.a.useState(""),t=Object(l.a)(e,2),c=t[0],n=t[1],a=v(),r=a.currentUser,O=a.logout,h=Object(C.g)();function x(e,t){var c=t.name;n(c)}function m(){return(m=Object(s.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:h.push("/login"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(f.jsxs)(j.a,{secondary:!0,pointing:!0,children:["mkdodos@gmail.com"==(null===r||void 0===r?void 0:r.email)&&Object(f.jsx)(j.a.Item,{as:u.b,to:"/stocks",name:"stocks",onClick:x,active:"stocks"===c,children:"\u80a1\u7968"}),Object(f.jsx)(j.a.Item,{as:u.b,to:"/dashboard",name:"dashboard",onClick:x,active:"dashboard"===c,children:"\u7d71\u8a08"}),Object(f.jsx)(j.a.Item,{as:u.b,to:"/scores",name:"scores",onClick:x,active:"scores"===c,children:"\u5206\u6578"}),Object(f.jsx)(j.a.Item,{as:u.b,to:"/balances",name:"balances",onClick:x,active:"balances"===c,children:"\u6536\u652f"}),Object(f.jsx)(d.a,{item:!0,icon:"setting",children:Object(f.jsxs)(d.a.Menu,{children:[Object(f.jsx)(d.a.Item,{as:u.b,to:"/accounts",name:"accounts",children:"\u5e33\u6236"}),Object(f.jsx)(d.a.Item,{as:u.b,to:"/cates",children:"\u985e\u5225"})]})}),Object(f.jsx)(j.a.Menu,{position:"right",children:r?Object(f.jsx)(j.a.Item,{name:"",onClick:function(){return m.apply(this,arguments)},children:Object(f.jsx)(b.a,{name:"sign-out"})}):Object(f.jsx)(j.a.Item,{name:"login",as:u.b,to:"/login",children:"Login"})})]})}var k=c(22),w=c(39),S=c(6),I=c(246),R=c(244),F=c(227),A=c(250),H=c(248),D=c(245);var B=function(e){return new Intl.NumberFormat("en-US",{currency:"USD"}).format(e)},E=c(99),N=c.n(E);function U(){var e=v().currentUser,t={name:"",prior:"",balance:""},c=i.a.useState([]),n=Object(l.a)(c,2),a=n[0],o=n[1],s=i.a.useState(t),j=Object(l.a)(s,2),d=j[0],b=j[1],u=i.a.useState(0),O=Object(l.a)(u,2),h=O[0],m=O[1],p=Object(r.useState)(-1),g=Object(l.a)(p,2),C=g[0],y=g[1],E=Object(r.useState)(!1),U=Object(l.a)(E,2),q=U[0],P=U[1],L=x.collection("accounts");function M(e){y(a.indexOf(e)),b(e),P(!0)}function z(e){b(Object(S.a)(Object(S.a)({},d),{},Object(k.a)({},e.target.name,e.target.value)))}return i.a.useEffect((function(){L.where("user","==",e.email).get().then((function(e){var t=0,c=e.docs.map((function(e){return t+=1*e.data().balance,Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id,balance:parseInt(e.data().balance)})}));c=(c=N.a.sortBy(c,"balance")).slice().reverse(),o(c),console.log(t),m(t)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(I.a,{open:q,closeIcon:!0,onClose:function(){P(!1)},children:[Object(f.jsx)(I.a.Header,{children:"\u7de8\u8f2f\u5e33\u6236"}),Object(f.jsx)(I.a.Content,{children:Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u540d\u7a31"}),Object(f.jsx)("input",{name:"name",placeholder:"First Name",value:d.name,onChange:z})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u9806\u5e8f"}),Object(f.jsx)("input",{type:"number",name:"prior",value:d.prior,onChange:z})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u9918\u984d"}),Object(f.jsx)("input",{type:"number",name:"balance",value:d.balance,onChange:z})]})]})}),Object(f.jsxs)(I.a.Actions,{children:[Object(f.jsx)(F.a,{floated:"left",color:"red",onClick:function(){L.doc(d.id).delete(),o(a.filter((function(e){return e.id!==d.id}))),P(!1)},children:"Delete"}),Object(f.jsx)(F.a,{primary:!0,onClick:function(){var c=d.name,n=d.balance,r=d.prior;C>-1?L.doc(d.id).update({name:c,balance:n,prior:r}).then((function(){var e=a.slice();Object.assign(e[C],d),o(e),P(!1),b(t)})):L.add({name:c,balance:n,prior:r,user:e.email}).then((function(e){P(!1),b(t),o([].concat(Object(w.a)(a),[Object(S.a)(Object(S.a)({},d),{},{id:e.id})]))}))},children:"Save"})]})]}),Object(f.jsx)(A.a,{textAlign:"center",children:Object(f.jsx)(H.a,{inverted:!0,color:"red",children:Object(f.jsx)(H.a.Value,{children:B(h)})})}),Object(f.jsx)(F.a,{onClick:function(){y(-1),P(!0)},color:"olive",children:"ADD"}),Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsx)(D.a.Row,{children:[{text:"\u540d\u7a31",value:"name",type:"string"},{text:"\u9806\u5e8f",value:"prior",type:"number"},{text:"\u9918\u984d",value:"balance",type:"number"}].map((function(e,t){return Object(f.jsx)(D.a.HeaderCell,{children:e.text},t)}))})}),Object(f.jsx)(D.a.Body,{children:a.map((function(e,t){return Object(f.jsxs)(D.a.Row,{onClick:function(){M(e)},children:[Object(f.jsx)(D.a.Cell,{children:e.name}),Object(f.jsx)(D.a.Cell,{children:e.prior}),Object(f.jsx)(D.a.Cell,{children:B(e.balance)})]},e.id)}))})]})]})}function q(e){var t=e.rows,c=e.schema;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[c.map((function(e,t){return Object(f.jsx)(D.a.HeaderCell,{children:e.text},t)})),Object(f.jsx)(D.a.HeaderCell,{children:"#"})]})}),Object(f.jsx)(D.a.Body,{children:t.map((function(e,t){return Object(f.jsxs)("tr",{children:[c.map((function(t,c){return Object(f.jsx)("td",{children:e[t.name]},c)})),Object(f.jsx)("td",{children:Object(f.jsx)(u.b,{to:"/cates/edit/".concat(e.id),children:"Edit"})})]},t)}))})]})})}function P(){var e=v().currentUser,t=Object(r.useState)([]),c=Object(l.a)(t,2),n=c[0],a=c[1];return Object(r.useEffect)((function(){x.collection("cates").where("user","==",e.email).orderBy("prior").get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));a(t)}))}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(q,{rows:n,schema:[{name:"name",text:"\u540d\u7a31",type:"text"},{name:"prior",text:"\u9806\u5e8f",type:"number"}]})})}var L=c(53),M=c(54),z=c(105),V=c(106),Y=c(251),J=function(e){Object(z.a)(c,e);var t=Object(V.a)(c);function c(){return Object(L.a)(this,c),t.apply(this,arguments)}return Object(M.a)(c,[{key:"render",value:function(){return Object(f.jsx)("button",{className:"square",onClick:this.props.onClick,children:this.props.value})}}]),c}(i.a.Component),T=function(e){Object(z.a)(c,e);var t=Object(V.a)(c);function c(e){var n;return Object(L.a)(this,c),(n=t.call(this,e)).state={squares:Array(9).fill(null)},n}return Object(M.a)(c,[{key:"handleClick",value:function(e){var t=this.state.squares.slice();t[e]="X",this.setState({squares:t})}},{key:"renderSquare",value:function(e){var t=this;return Object(f.jsx)(J,{value:this.state.squares[e],onClick:function(){t.handleClick(e)}})}},{key:"render",value:function(){return Object(f.jsxs)(Y.a,{children:[Object(f.jsxs)(Y.a.Row,{children:[Object(f.jsx)(Y.a.Column,{children:this.renderSquare(0)}),Object(f.jsx)(Y.a.Column,{children:this.renderSquare(1)}),Object(f.jsx)(Y.a.Column,{children:this.renderSquare(2)})]}),Object(f.jsxs)(Y.a.Row,{children:[Object(f.jsx)(Y.a.Column,{children:this.renderSquare(3)}),Object(f.jsx)(Y.a.Column,{children:this.renderSquare(4)}),Object(f.jsx)(Y.a.Column,{children:this.renderSquare(5)})]}),Object(f.jsxs)(Y.a.Row,{children:[Object(f.jsx)(Y.a.Column,{children:this.renderSquare(7)}),Object(f.jsx)(Y.a.Column,{children:this.renderSquare(8)})]})]})}}]),c}(i.a.Component),K=c(37),Q=c.n(K),W=c(239),G=c(240),X=c(252),$=c(107);function Z(e){var t=e.cates,c=e.rows,n=e.rowsCopy,a=e.setRows,i=e.setItem,o=e.setItemCopy,s=e.setEditedIndex,j=e.setOpen,d=e.activeAccount,b=e.setIsIncome,u=(e.isIncome,e.setIsIncomeOrigin),O=e.setCate,h=Object(r.useState)(""),x=Object(l.a)(h,2),m=x[0],p=x[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y.a,{children:Object(f.jsxs)(Y.a.Row,{columns:2,children:[Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(W.a,{name:"search",fluid:!0,value:m,onChange:function(e){p(e.target.value),a(n.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())})))},placeholder:"Search..."})}),Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(G.a,{selection:!0,fluid:!0,label:"\u985e\u5225",placeholder:"",options:t,onChange:function(e,t){console.log(t.value),a(n.filter((function(e){return e.cate===t.value})))}})})]})}),Object(f.jsx)(D.a,{unstackable:!0,children:Object(f.jsx)(D.a.Body,{children:c.map((function(e){var t;return Object(f.jsxs)(D.a.Row,{onClick:function(){!function(e){O(e.cate),b((function(t){var c={date:e.date,title:e.title,id:e.id};return e.income?(i(Object(S.a)(Object(S.a)({},c),{},{amt:e.income})),o(Object(S.a)(Object(S.a)({},c),{},{amt:e.income})),!0):(i(Object(S.a)(Object(S.a)({},c),{},{amt:e.expense})),o(Object(S.a)(Object(S.a)({},c),{},{amt:e.expense})),!1)})),u((function(){return!!e.income})),s(c.indexOf(e)),j(!0)}(e)},children:[Object(f.jsxs)(D.a.Cell,{children:[Object(f.jsx)(X.a,{as:"h4",children:e.title}),Object(f.jsxs)("span",{children:[e.date," "]}),!d&&Object(f.jsx)($.a,{color:"teal",children:null===(t=e.account)||void 0===t?void 0:t.name}),e.cate&&Object(f.jsx)($.a,{children:e.cate})]}),Object(f.jsxs)(D.a.Cell,{textAlign:"right",children:[e.income?Object(f.jsx)($.a,{color:"teal",circular:!0,children:"\u5b58"}):Object(f.jsx)($.a,{color:"orange",circular:!0,children:"\u63d0"}),Object(f.jsx)("br",{}),"$ ",e.income?e.income:e.expense+""]})]},e.id)}))})})]})}var _=function(e){var t=e.rows,c=e.setRows,n=e.rowsCopy,a=e.setRowsCopy,i=e.rowsAccount,o=e.setRowsAccount,s=e.item,d=e.setItem,b=e.editedIndex,u=e.defalutItem,O=e.setEditedIndex,h=e.open,m=e.setOpen,p=(e.setActiveAccount,e.activeAccount),g=e.itemCopy,C=e.isIncome,y=e.setIsIncome,A=e.isIncomeOrigin,H=e.cates,D=e.cate,B=e.setCate,E=v().currentUser,N=Object(r.useState)(!1),U=Object(l.a)(N,2),q=U[0],P=U[1],L=function(e){console.log(s),d(Object(S.a)(Object(S.a)({},s),{},Object(k.a)({},e.target.name,e.target.value)))},M=x.collection("balances");function z(e){x.collection("accounts").doc(p.id).update({balance:e});var t=i.indexOf(p),c=i.slice();Object.assign(c[t],Object(S.a)(Object(S.a)({},p),{},{balance:e})),o(c)}function V(e,t){var c=t.name;console.log(s),y("income"===c)}return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(I.a,{open:h,closeIcon:!0,onClose:function(){m(!1)},children:[Object(f.jsxs)(I.a.Header,{children:["\u7de8\u8f2f\u8868\u55ae",A?"income":"expense"]}),Object(f.jsxs)(I.a.Content,{children:[Object(f.jsxs)(j.a,{fluid:!0,widths:2,pointing:!0,secondary:!0,children:[Object(f.jsx)(j.a.Item,{color:"teal",name:"income",active:C,onClick:V,children:"\u6536\u5165"}),Object(f.jsx)(j.a.Item,{color:"orange",name:"expense",active:!C,onClick:V,children:"\u652f\u51fa"})]}),Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u65e5\u671f"}),Object(f.jsx)("input",{name:"date",type:"date",placeholder:"",value:s.date,onChange:L})]}),Object(f.jsx)(R.a.Select,{selection:!0,fluid:!0,label:"\u985e\u5225",placeholder:"",value:D,options:H,onChange:function(e,t){B(t.value),console.log(t.value)}}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u9805\u76ee"}),Object(f.jsx)("input",{name:"title",placeholder:"",value:s.title,onChange:L})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u91d1\u984d"}),Object(f.jsx)("input",{name:"amt",type:"number",placeholder:"",value:s.amt,onChange:L})]}),Object(f.jsx)(R.a.Select,{fluid:!0,label:"\u7d71\u8a08\u985e\u578b",options:[{key:"m",text:"\u4e00\u822c",value:"male"},{key:"f",text:"\u8f49\u5e33",value:"female"},{key:"o",text:"\u6295\u8cc7",value:"other"}],placeholder:""})]})]}),Object(f.jsxs)(I.a.Actions,{children:[b>-1&&Object(f.jsx)(F.a,{loading:q,floated:"left",color:"red",onClick:function(){P(!0),M.doc(s.id).delete().then((function(){c(t.filter((function(e){return e.id!==s.id}))),a(n.filter((function(e){return e.id!==s.id}))),O(-1),d(u),m(!1),P(!1);var e=p.balance+1*s.amt;C&&(e=p.balance-1*s.amt),z(e)}))},children:"Delete"}),Object(f.jsx)(F.a,{loading:q,floated:"right",primary:!0,onClick:function(){if(-1==b){var e={date:s.date,title:s.title,user:E.email,account:p};D&&(e.cate=D),e=C?Object(S.a)(Object(S.a)({},e),{},{income:s.amt}):Object(S.a)(Object(S.a)({},e),{},{expense:s.amt}),P(!0),M.add(e).then((function(r){console.log(r.id);var i=Object(S.a)(Object(S.a)({},e),{},{id:r.id});c([i].concat(Object(w.a)(t))),a([i].concat(Object(w.a)(n))),P(!1),O(-1),d(u),m(!1);var o=p.balance-1*s.amt;C&&(o=p.balance+1*s.amt),z(o)}))}else{var r={date:s.date,title:s.title,user:E.email,account:p};D&&(r.cate=D),r=C?Object(S.a)(Object(S.a)({},r),{},{income:s.amt,expense:null}):Object(S.a)(Object(S.a)({},r),{},{expense:s.amt,income:null}),P(!0),M.doc(s.id).update(r).then((function(){var e=p.balance-1*s.amt+1*g.amt;C&&(e=1*p.balance+1*s.amt-1*g.amt),!A&&C&&(e=p.balance+1*s.amt+1*g.amt),A&&!C&&(e=p.balance-1*s.amt-1*g.amt),z(e);var n=t.slice();Object.assign(n[b],r),c(n),P(!1),O(-1),d(u),m(!1)}))}},children:"Save"})]})]})})},ee=function(e){var t=e.rows,c=e.accountClick,n=e.activeAccount;v().currentUser;return Object(f.jsx)(Y.a,{columns:3,children:t.map((function(e,t){return Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(A.a,{textAlign:"center",color:"teal",inverted:(null===n||void 0===n?void 0:n.name)===e.name,onClick:function(){c(e)},children:e.name})},e.id)}))})},te=function(){var e=v(),t=e.currentUser,c=(e.logout,Object(r.useState)(!1)),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(r.useState)([]),s=Object(l.a)(o,2),j=s[0],d=s[1],b=Object(r.useState)([]),u=Object(l.a)(b,2),O=u[0],h=u[1],m=Object(r.useState)([]),p=Object(l.a)(m,2),g=p[0],C=p[1],y=Object(r.useState)(),k=Object(l.a)(y,2),w=k[0],I=k[1],R={date:(new Date).toISOString().slice(0,10),title:"",amt:""},A=Object(r.useState)(R),D=Object(l.a)(A,2),B=D[0],E=D[1],N=Object(r.useState)(R),U=Object(l.a)(N,2),q=U[0],P=U[1],L=Object(r.useState)(-1),M=Object(l.a)(L,2),z=M[0],V=M[1],J=Object(r.useState)(!1),T=Object(l.a)(J,2),K=T[0],Q=T[1],W=Object(r.useState)(!1),G=Object(l.a)(W,2),X=G[0],$=G[1],te=Object(r.useState)(),ce=Object(l.a)(te,2),ne=ce[0],ae=ce[1],re=Object(r.useState)([]),ie=Object(l.a)(re,2),oe=ie[0],se=ie[1];Object(r.useEffect)((function(){var e=x.collection("cates").orderBy("prior");t&&(e=e.where("user","==",t.email)),e=e.get().then((function(e){var t=e.docs.map((function(e){var t=e.data();return{text:t.name,value:t.name,key:e.id}}));se(t)}));var c=x.collection("balances").orderBy("date","desc").limit(300);t&&(c=c.where("user","==",null===t||void 0===t?void 0:t.email)),x.collection("accounts").where("user","==",t.email).orderBy("prior").limit(3).get().then((function(e){var t=e.docs.map((function(e){return console.log(e.data().name),Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));I(t[0]),C(t);var n=(new Date).getFullYear(),a=(new Date).getMonth()-1;a<10&&(a="0"+a),c.where("date",">","".concat(n,"-").concat(a)).get().then((function(e){var c=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));h(c),d(c.filter((function(e){return e.account&&e.account.name==t[0].name})))}))}))}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y.a,{children:Object(f.jsx)(Y.a.Row,{children:Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(ee,{rows:g,activeAccount:w,accountClick:function(e){I(e),d(O.filter((function(t){return t.account&&t.account.name==e.name})))}})})})}),w&&Object(f.jsx)(Y.a,{columns:2,children:Object(f.jsxs)(Y.a.Row,{children:[Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(H.a,{horizontal:!0,children:Object(f.jsx)(H.a.Value,{children:null===w||void 0===w?void 0:w.balance})})}),Object(f.jsx)(Y.a.Column,{verticalAlign:"middle",children:Object(f.jsx)(F.a,{onClick:function(){i(!0),E(R),V(-1)},floated:"right",color:"yellow",children:"ADD"})})]})}),Object(f.jsx)(Y.a,{children:Object(f.jsx)(Y.a.Row,{children:Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(Z,{setCate:ae,cates:oe,setOpen:i,rows:j,rowsCopy:O,setRows:d,item:B,setItem:E,setItemCopy:P,isIncome:K,setIsIncome:Q,isIncomeOrigin:X,setIsIncomeOrigin:$,setEditedIndex:V,activeAccount:w})})})}),Object(f.jsx)(_,{cates:oe,cate:ne,setCate:ae,isIncomeOrigin:X,setIsIncome:Q,isIncome:K,defalutItem:R,rows:j,setRows:d,setRowsCopy:h,rowsCopy:O,rowsAccount:g,setRowsAccount:C,item:B,setItem:E,editedIndex:z,setEditedIndex:V,open:a,setOpen:i,setActiveAccount:I,activeAccount:w,itemCopy:q})]})};function ce(){var e=Object(C.g)(),t=Object(C.h)().id,c=Object(r.useState)({name:"",prior:""}),n=Object(l.a)(c,2),a=n[0],i=n[1];Object(r.useEffect)((function(){x.collection("cates").doc(t).get().then((function(e){e.exists?(i(e.data()),console.log("Document data:",e.data())):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}),[]);var o=function(e){i(Object(S.a)(Object(S.a)({},a),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(R.a,{onSubmit:function(){x.collection("cates").doc(t).update(Object(S.a)(Object(S.a)({},a),{},{prior:Number(a.prior)})).then((function(){e.push("/cates")}))},children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u540d\u7a31"}),Object(f.jsx)("input",{name:"name",placeholder:"",value:a.name,onChange:o})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u9806\u5e8f"}),Object(f.jsx)("input",{type:"number",name:"prior",placeholder:"",value:a.prior,onChange:o})]}),Object(f.jsx)(F.a,{type:"submit",primary:!0,children:"Save"})]})})}function ne(e){var t=e.defalutItem,c=e.schema,n=i.a.useState([]),a=Object(l.a)(n,2),r=a[0],o=a[1],s=i.a.useState(t),j=Object(l.a)(s,2),d=j[0],b=j[1],u=i.a.useState(-1),O=Object(l.a)(u,2),h=O[0],m=O[1],p=i.a.useState(!1),v=Object(l.a)(p,2),g=v[0],C=v[1],y=x.collection(e.collectionName);return i.a.useEffect((function(){y.get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));o(t)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(I.a,{open:g,closeIcon:!0,onClose:function(){return C(!1)},children:[Object(f.jsx)(I.a.Header,{children:"\u7de8\u8f2f\u8868\u55ae"}),Object(f.jsx)(I.a.Content,{children:Object(f.jsx)(R.a,{children:c.map((function(e,t){return Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:e.text}),Object(f.jsx)(W.a,{placeholder:e.text,name:e.name,value:d[e.name],type:e.type,onChange:function(e){b(Object(S.a)(Object(S.a)({},d),{},Object(k.a)({},e.target.name,e.target.value)))}})]},t)}))})}),Object(f.jsxs)(I.a.Actions,{children:[Object(f.jsx)("button",{className:"ui button blue",onClick:function(){if(-1==h){var e=Object(S.a)(Object(S.a)({},d),{},{id:Date.now()});y.add(e),o([].concat(Object(w.a)(r),[e]))}else{y.doc(d.id).update(d);var c=r.slice();Object.assign(c[h],d),o(c),m(-1)}b(t),C(!1)},children:"\u5132\u5b58"}),-1!==h&&Object(f.jsx)("button",{className:"ui button red left floated",onClick:function(){if(confirm("\u78ba\u5b9a\u522a\u9664\u55ce?")){y.doc(d.id).delete();var e=r.filter((function(e){return e.id!==d.id}));o(e),C(!1)}},children:"\u522a\u9664"})]})]}),Object(f.jsx)("button",{className:"ui button",onClick:function(){C(!0),b(t),m(-1)},children:"\u65b0\u589e"}),Object(f.jsx)(ae,{edit:function(e){C(!0),m(r.indexOf(e)),b(e)},schema:c,rows:r,dataRow:e.dataRow})]})}var ae=function(e){Object(z.a)(c,e);var t=Object(V.a)(c);function c(e){return Object(L.a)(this,c),t.call(this,e)}return Object(M.a)(c,[{key:"render",value:function(){var e=this;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[this.props.schema.map((function(e,t){return Object(f.jsx)(D.a.HeaderCell,{children:e.text},t)})),Object(f.jsx)(D.a.HeaderCell,{children:"#"})]})}),Object(f.jsx)(D.a.Body,{children:this.props.rows.map((function(t,c){return Object(f.jsxs)("tr",{children:[e.props.dataRow?e.props.dataRow:e.props.schema.map((function(e,c){return Object(f.jsx)("td",{children:t[e.name]},c)})),Object(f.jsx)("td",{onClick:function(){return e.props.edit(t)},children:Object(f.jsx)("a",{href:"#",children:"\u7de8\u8f2f"})})]},c)}))})]})})}}]),c}(i.a.Component);function re(){var e=[{name:"name",text:"\u540d\u7a31",type:"text"},{name:"qty",text:"\u80a1\u6578",type:"number"},{name:"price",text:"\u73fe\u50f9",type:"number"},{name:"cost",text:"\u6210\u672c",type:"number"}];e.map((function(e,t){return Object(f.jsx)("td",{children:"A"},t)}));return Object(f.jsx)(ne,{schema:e,defalutItem:{name:"",qty:"",price:"",cost:""},collectionName:"stocks"})}var ie=Object(r.createContext)(),oe=function(e){var t=x.collection(e.collectionName);Object(r.useEffect)((function(){t.get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));i(t)}))}),[]);var c=Object(r.useState)([]),n=Object(l.a)(c,2),a=n[0],i=n[1],o={name:"",price:""},s=Object(r.useState)(o),j=Object(l.a)(s,2),d=j[0],b=j[1],u=Object(r.useState)(-1),O=Object(l.a)(u,2),h=O[0],m=O[1],p=Object(r.useState)(!1),v=Object(l.a)(p,2),g=v[0],C=v[1];return Object(f.jsx)(ie.Provider,{value:{books:a,editedBook:d,open:g,removeBook:function(e){t.doc(e).delete(),i(a.filter((function(t){return t.id!==e})))},editBook:function(e){b(e),m(a.indexOf(e)),C(!0)},updateBook:function(e){b(e)},saveBook:function(e){if(-1==h)t.add(e).then((function(t){i([].concat(Object(w.a)(a),[Object(S.a)(Object(S.a)({},e),{},{id:t.id})]))}));else{t.doc(e.id).update(e);var c=a.slice();Object.assign(c[h],e),i(c)}b(o),m(-1),C(!1)},openForm:function(){m(-1),b(o),C(!0)},closeForm:function(){m(-1),b(o),C(!1)}},children:e.children})},se=function(){var e=Object(r.useContext)(ie),t=e.editBook,c=e.books,n=e.removeBook,a=e.openForm;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(X.a,{children:c.length}),Object(f.jsx)(F.a,{onClick:function(){a()},children:"ADD"}),Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.HeaderCell,{children:"\u66f8\u540d"}),Object(f.jsx)(D.a.HeaderCell,{children:"\u4f5c\u8005"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"})]})}),Object(f.jsx)(D.a.Body,{children:c.map((function(e){return Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.Cell,{children:e.title}),Object(f.jsx)(D.a.Cell,{children:e.author}),Object(f.jsx)(D.a.Cell,{onClick:function(){n(e.id)},children:"Delete"}),Object(f.jsx)(D.a.Cell,{onClick:function(){t(e)},children:"Edit"})]},e.id)}))})]})]})},le=function(){var e=Object(r.useContext)(ie),t=e.editBook,c=e.books,n=e.removeBook,a=e.openForm;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(X.a,{children:c.length}),Object(f.jsx)(F.a,{onClick:function(){console.log("open"),a()},children:"ADD"}),Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.HeaderCell,{children:"\u66f8\u540d"}),Object(f.jsx)(D.a.HeaderCell,{children:"\u4f5c\u8005"}),Object(f.jsx)(D.a.HeaderCell,{children:"Qty"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"})]})}),Object(f.jsx)(D.a.Body,{children:c.map((function(e){return Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.Cell,{children:e.name}),Object(f.jsx)(D.a.Cell,{children:e.price}),Object(f.jsx)(D.a.Cell,{children:e.qty}),Object(f.jsx)(D.a.Cell,{onClick:function(){n(e.id)},children:"Delete"}),Object(f.jsx)(D.a.Cell,{onClick:function(){t(e)},children:"Edit"})]},e.id)}))})]})]})},je=function(){var e=Object(r.useContext)(ie),t=e.editedBook,c=e.updateBook,n=e.saveBook,a=e.open,i=e.closeForm,o=Object(r.useState)(""),s=Object(l.a)(o,2),j=(s[0],s[1]),d=Object(r.useState)(""),b=Object(l.a)(d,2),u=(b[0],b[1]);return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(I.a,{open:a,closeIcon:!0,onClose:i,children:[Object(f.jsx)(I.a.Header,{children:"\u7de8\u8f2f"}),Object(f.jsx)(I.a.Content,{children:Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"Title"}),Object(f.jsx)(W.a,{placeholder:"book title",name:"price",value:t.price,type:"text",onChange:function(e){c(Object(S.a)(Object(S.a)({},t),{},Object(k.a)({},e.target.name,e.target.value)))}})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"Author"}),Object(f.jsx)(W.a,{placeholder:"book author",name:"author",value:t.author,type:"text",onChange:function(e){c(Object(S.a)(Object(S.a)({},t),{},Object(k.a)({},e.target.name,e.target.value)))}})]})]})}),Object(f.jsx)(I.a.Actions,{children:Object(f.jsx)(F.a,{onClick:function(){n(t),j(""),u("")},children:"Update"})})]})})};var de=function(){function e(){Object(L.a)(this,e)}return Object(M.a)(e,null,[{key:"getAllContacts",value:function(){var e=[];return x.collection("cates").get().then((function(t){t.docs.map((function(t){e.push(Object(S.a)({},t.data()))}))})),e}}]),e}();de.serverURL="http://localhost:9000";var be=function(){var e=Object(r.useState)({loading:!1,contacts:[],errorMessage:""}),t=Object(l.a)(e,2),c=t[0],n=t[1];Object(r.useEffect)((function(){n(Object(S.a)(Object(S.a)({},c),{},{loading:!1}));var e=de.getAllContacts();n(Object(S.a)(Object(S.a)({},c),{},{loading:!1,contacts:e})),console.log(e)}),[]);var a=c.contacts;return Object(f.jsx)("pre",{children:JSON.stringify(a)})},ue=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(be,{}),Object(f.jsxs)(oe,{collectionName:"stocks",children:[Object(f.jsx)(je,{}),Object(f.jsx)(le,{})]}),Object(f.jsxs)(oe,{collectionName:"books",children:[Object(f.jsx)(je,{}),Object(f.jsx)(se,{})]})]})},Oe=function(){function e(){Object(L.a)(this,e)}return Object(M.a)(e,null,[{key:"getAllContacts",value:function(){var e="".concat(this.serverURL,"/contacts");return Q.a.get(e)}},{key:"getContact",value:function(e){var t="".concat(this.serverURL,"/contacts/").concat(e);return Q.a.get(t)}},{key:"AddContact",value:function(e){var t="".concat(this.serverURL,"/contacts");return Q.a.post(t,e)}},{key:"UpdateContact",value:function(e){var t="".concat(this.serverURL,"/contacts/").concat(e.id);return Q.a.put(t,e)}},{key:"DeleteContact",value:function(e){var t="".concat(this.serverURL,"/contacts/").concat(e);return Q.a.delete(t)}}]),e}();Oe.serverURL="http://192.168.0.12:9000";var he=c.p+"static/media/spin.0d8837f6.gif";function xe(){return Object(f.jsx)("div",{className:"ui basic segment",children:Object(f.jsx)("img",{src:he,className:"ui centered medium image",style:{width:"100px"}})})}var me=function(){var e=Object(r.useState)({loading:!1,contacts:[]}),t=Object(l.a)(e,2),c=t[0],n=t[1];Object(r.useEffect)(Object(s.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(S.a)(Object(S.a)({},c),{},{loading:!0})),e.next=3,Q.a.get("http://192.168.0.12:9000/contacts");case 3:t=e.sent,n(Object(S.a)(Object(S.a)({},c),{},{loading:!1,contacts:t.data}));case 5:case"end":return e.stop()}}),e)}))),[]);var a=c.contacts,i=c.loading;return Object(f.jsx)(f.Fragment,{children:i?Object(f.jsx)(xe,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{children:Object(f.jsx)(u.b,{to:"/contacts/add",children:"ADD"})}),Object(f.jsxs)(D.a,{unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.HeaderCell,{children:"\u540d\u7a31"}),Object(f.jsx)(D.a.HeaderCell,{children:"\u91d1\u984d"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"}),Object(f.jsx)(D.a.HeaderCell,{children:"#"})]})}),Object(f.jsx)(D.a.Body,{children:a.map((function(e){return Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.Cell,{children:e.name}),Object(f.jsx)(D.a.Cell,{children:e.amt}),Object(f.jsx)(D.a.Cell,{children:Object(f.jsx)(u.b,{to:"/contacts/edit/".concat(e.id),children:"Edit"})}),Object(f.jsx)(D.a.Cell,{children:Object(f.jsx)(u.b,{to:"/contacts/view/".concat(e.id),children:"View"})})]},e.id)}))})]})]})})};function fe(){var e=Object(C.h)().contactId;return Object(r.useEffect)(Object(s.a)(Object(o.a)().mark((function t(){var c;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getContact(e);case 2:c=t.sent,console.log(c.data);case 4:case"end":return t.stop()}}),t)}))),[]),Object(f.jsx)("div",{children:e})}function pe(){var e=Object(C.g)(),t=Object(C.h)().contactId;Object(r.useEffect)(Object(s.a)(Object(o.a)().mark((function e(){var c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Oe.getContact(t);case 4:c=e.sent,i(c.data);case 6:case"end":return e.stop()}}),e)}))),[]);var c=Object(r.useState)({name:"",amt:""}),n=Object(l.a)(c,2),a=n[0],i=n[1],j=function(e){i(Object(S.a)(Object(S.a)({},a),{},Object(k.a)({},e.target.name,e.target.value)))},d=function(){var c=Object(s.a)(Object(o.a)().mark((function c(){return Object(o.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!t){c.next=5;break}return c.next=3,Oe.UpdateContact(a);case 3:c.next=7;break;case 5:return c.next=7,Oe.AddContact(a);case 7:e.push("/contacts"),console.log("save");case 9:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),b=function(){var c=Object(s.a)(Object(o.a)().mark((function c(){return Object(o.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!t){c.next=3;break}return c.next=3,Oe.DeleteContact(a.id);case 3:e.push("/contacts");case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsxs)(R.a,{onSubmit:d,children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u540d\u7a31"}),Object(f.jsx)("input",{name:"name",placeholder:"",value:a.name,onChange:j})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u91d1\u984d"}),Object(f.jsx)("input",{name:"amt",placeholder:"",value:a.amt,onChange:j})]}),Object(f.jsx)(F.a,{type:"submit",primary:!0,children:"Save"})]}),Object(f.jsx)(F.a,{floated:"right",onClick:b,children:"Delete"})]})}var ve=c(247);function ge(){var e=Object(r.useRef)(),t=Object(r.useRef)(),c=v().login,n=Object(r.useState)(""),a=Object(l.a)(n,2),i=(a[0],a[1]),j=Object(r.useState)(!1),d=Object(l.a)(j,2),u=(d[0],d[1]),O=Object(C.g)();function h(){return(h=Object(s.a)(Object(o.a)().mark((function n(a){return Object(o.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,i(""),u(!0),n.next=6,c(e.current.value,t.current.value);case 6:O.push("/balances"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),i("Failed to log in");case 12:u(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(ve.a,{fluid:!0,children:[Object(f.jsx)(ve.a.Content,{textAlign:"center",header:"Money 2022"}),Object(f.jsx)(ve.a.Content,{children:Object(f.jsxs)(R.a,{size:"large",onSubmit:function(e){return h.apply(this,arguments)},children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{ref:e,defaultValue:"mkdodos@gmail.com"})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{ref:t,defaultValue:"123456"})]}),Object(f.jsx)(F.a,{fluid:!0,type:"submit",size:"large",color:"blue",children:"\u767b\u5165"})]})}),Object(f.jsxs)(ve.a.Content,{extra:!0,children:[Object(f.jsx)(b.a,{name:"user"}),"4 Friends"]})]})})}var Ce=c(174),ye=["component"];function ke(e){var t=e.component,c=Object(Ce.a)(e,ye),n=v().currentUser;return Object(f.jsx)(C.b,Object(S.a)(Object(S.a)({},c),{},{render:function(e){return n?Object(f.jsx)(t,Object(S.a)({},e)):Object(f.jsx)(C.a,{to:"/login"})}}))}function we(e){return Object(f.jsxs)(j.a,{widths:3,children:[Object(f.jsx)(j.a.Item,{children:Object(f.jsx)(F.a,{onClick:e.onMinusClick,children:"-"})}),Object(f.jsx)(j.a.Item,{children:Object(f.jsx)(F.a,{primary:!0,onDoubleClick:e.onDoubleClick,onClick:e.onClick,children:e.text})}),Object(f.jsx)(j.a.Item,{children:Object(f.jsx)(F.a,{onClick:e.onPlusClick,children:"+"})})]})}function Se(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),c=t[0],n=t[1],a=v().currentUser;var i=Object(r.useReducer)((function(e,t){switch(t.type){case"sort":return e.column===t.column?Object(S.a)(Object(S.a)({},e),{},{data:e.data.slice().reverse(),direction:"ascending"===e.direction?"descending":"ascending"}):Object(S.a)(Object(S.a)({},e),{},{column:t.column,data:N.a.sortBy(e.data,[t.column]),direction:"ascending"});case"setData":return{data:t.data,dataCopy:t.data};case"filterData":return Object(S.a)(Object(S.a)({},e),{},{data:t.data});case"copyData":return Object(S.a)(Object(S.a)({},e),{},{data:e.dataCopy});default:throw new Error}}),{column:null,data:[],dataCopy:[],direction:null}),o=Object(l.a)(i,2),s=o[0],j=o[1],d=Object(r.useState)((new Date).getMonth()+1),b=Object(l.a)(d,2),u=b[0],O=b[1],h=(s.column,s.data),m=s.direction,p=s.dataCopy;function g(e){var t=0;return e.map((function(e){t+=1*e.expense})),t}return Object(r.useEffect)((function(){var e="";e=u>=10?u:"0"+u,x.collection("balances").where("date",">=","2022-".concat(e,"-01")).where("date","<=","2022-".concat(e,"-31")).where("user","==",a.email).get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({id:e.id},e.data()),{},{expense:parseInt(e.data().expense)})})).filter((function(e){return e.expense>0&&"\u8f49\u5e33"!==e.type})),c=0;t.map((function(e){c+=1*e.expense})),n(c),j({type:"setData",data:t,dataCopy:t})}))}),[u]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(we,{text:"".concat(u," \u6708"),onPlusClick:function(){O(12==u?1:u+1)},onClick:function(){O((new Date).getMonth()+1)},onMinusClick:function(){O(1==u?12:u-1)}}),Object(f.jsx)(A.a,{textAlign:"center",children:Object(f.jsx)(H.a,{color:"blue",onClick:function(){console.log(p),j({type:"copyData"}),n(g(p))},children:Object(f.jsx)(H.a.Value,{children:B(c)})})}),Object(f.jsxs)(D.a,{celled:!0,unstackable:!0,sortable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.HeaderCell,{width:3,sorted:"date"===s.column?m:null,onClick:function(){j({type:"sort",column:"date"})},children:"\u65e5\u671f"}),Object(f.jsx)(D.a.HeaderCell,{sorted:"title"===s.column?m:null,onClick:function(){j({type:"sort",column:"title"})},children:"\u9805\u76ee"}),Object(f.jsx)(D.a.HeaderCell,{sorted:"expense"===s.column?m:null,onClick:function(){j({type:"sort",column:"expense"}),console.log("d")},children:"\u652f\u51fa"})]})}),Object(f.jsx)(D.a.Body,{children:h.map((function(e){return Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.Cell,{onClick:function(){var t=h.filter((function(t){return t.date==e.date}));j({type:"filterData",data:t}),n(g(t))},children:e.date.slice(5,10)}),Object(f.jsx)(D.a.Cell,{children:e.title?e.title:Object(f.jsx)($.a,{children:e.cate})}),Object(f.jsx)(D.a.Cell,{children:e.expense})]},e.id)}))})]})]})}function Ie(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)([]),i=Object(l.a)(a,2),o=i[0],s=i[1],j=Object(r.useState)([]),b=Object(l.a)(j,2),u=b[0],O=b[1],h=Object(r.useState)([]),m=Object(l.a)(h,2),p=m[0],v=m[1],g=Object(r.useState)({title:"",account:"",cate:""}),C=Object(l.a)(g,2),y=C[0],w=C[1],A={date:(new Date).toISOString().slice(0,10),title:"",expense:"",type:"\u4e00\u822c"},H=Object(r.useState)(A),B=Object(l.a)(H,2),E=B[0],N=B[1],U=Object(r.useState)(!1),q=Object(l.a)(U,2),P=q[0],L=q[1],M=Object(r.useState)(!1),z=Object(l.a)(M,2),V=z[0],J=z[1],T=Object(r.useState)((new Date).getMonth()+1),K=Object(l.a)(T,2),Q=K[0],G=(K[1],x.collection("balances"));Object(r.useEffect)((function(){Z(),X(),$()}),[]),Object(r.useEffect)((function(){O(p.filter((function(e){var t;return e.account.name.includes(y.account)&&e.title.includes(y.title)&&(null===(t=e.cate)||void 0===t?void 0:t.includes(y.cate))}))),console.log(y)}),[y]);var X=function(){L(!0),x.collection("accounts").where("user","==","mkdodos@gmail.com").orderBy("prior").get().then((function(e){var t=e.docs.map((function(e){return{key:e.id,text:e.data().name,value:e.data().name}}));n(t),L(!1)}))},$=function(){L(!0),x.collection("cates").where("user","==","mkdodos@gmail.com").orderBy("prior").get().then((function(e){var t=e.docs.map((function(e){return{key:e.id,text:e.data().name,value:e.data().name}}));s(t),L(!1)}))},Z=function(){L(!0),G.where("date",">=","2022-0".concat(Q,"-01")).where("date","<=","2022-0".concat(Q,"-31")).get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));t=t.slice().reverse(),console.log(t),O(t),v(t),L(!1)}))},_=function(e){N(Object(S.a)(Object(S.a)({},E),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(I.a,{open:V,closeIcon:!0,onClose:function(){J(!1)},children:[Object(f.jsx)(I.a.Header,{children:"\u7de8\u8f2f"}),Object(f.jsx)(I.a.Content,{children:Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u65e5\u671f"}),Object(f.jsx)("input",{name:"date",type:"date",placeholder:"",value:E.date,onChange:_})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u9805\u76ee"}),Object(f.jsx)("input",{name:"title",type:"text",value:E.title,onChange:_})]}),Object(f.jsxs)(R.a.Field,{children:[Object(f.jsx)("label",{children:"\u91d1\u984d"}),Object(f.jsx)("input",{name:"expense",type:"number",value:E.expense,onChange:_})]}),Object(f.jsx)(R.a.Select,{label:"\u8a18\u5e33\u985e\u578b",value:E.type,onChange:function(e,t){N(Object(S.a)(Object(S.a)({},E),{},{type:t.value}))},name:"types",options:[{key:"1",text:"\u4e00\u822c",value:"\u4e00\u822c"},{key:"2",text:"\u8f49\u5e33",value:"\u8f49\u5e33"},{key:"3",text:"\u6295\u8cc7",value:"\u6295\u8cc7"}]})]})}),Object(f.jsx)(I.a.Actions,{children:Object(f.jsx)(F.a,{primary:!0,loading:P,onClick:function(){L(!0),E.id?G.doc(E.id).update(E).then((function(){Z(),N(A),J(!1)})):G.add(E).then((function(){Z(),N(A),J(!1)}))},children:"\u5132\u5b58"})})]}),Object(f.jsx)(Y.a,{children:Object(f.jsxs)(Y.a.Row,{columns:3,children:[Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(W.a,{name:"search",fluid:!0,onChange:function(e){w(Object(S.a)(Object(S.a)({},y),{},{title:e.target.value}))},placeholder:"Search..."})}),Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(d.a,{selection:!0,clearable:!0,options:c,label:"\u5e33\u6236",onChange:function(e,t){w(Object(S.a)(Object(S.a)({},y),{},{account:t.value}))}})}),Object(f.jsx)(Y.a.Column,{children:Object(f.jsx)(d.a,{selection:!0,clearable:!0,options:o,label:"\u985e\u5225",onChange:function(e,t){w(Object(S.a)(Object(S.a)({},y),{},{cate:t.value}))}})})]})}),Object(f.jsxs)(D.a,{striped:!0,unstackable:!0,children:[Object(f.jsx)(D.a.Header,{children:Object(f.jsxs)(D.a.Row,{children:[Object(f.jsx)(D.a.HeaderCell,{width:2,children:"\u65e5\u671f"}),Object(f.jsx)(D.a.HeaderCell,{width:1,children:"\u5e33\u6236"}),Object(f.jsx)(D.a.HeaderCell,{width:4,children:"\u9805\u76ee"}),Object(f.jsx)(D.a.HeaderCell,{width:2,children:"\u91d1\u984d"}),Object(f.jsx)(D.a.HeaderCell,{children:"\u8a18\u5e33\u985e\u578b"})]})}),Object(f.jsx)(D.a.Body,{children:u.map((function(e){return Object(f.jsxs)(D.a.Row,{onClick:function(){N(e),J(!0),console.log(e)},children:[Object(f.jsx)(D.a.Cell,{children:e.date}),Object(f.jsx)(D.a.Cell,{children:e.account.name}),Object(f.jsx)(D.a.Cell,{children:e.title}),Object(f.jsx)(D.a.Cell,{children:e.expense||e.income}),Object(f.jsx)(D.a.Cell,{children:e.type})]},e.id)}))})]})]})}function Re(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(r.useEffect)((function(){Q.a.get("http://localhost:8888/laravel5salary/public/emp/basic/data").then((function(e){n(e.data),console.log(e.data)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("pre",{children:JSON.stringify(c)}),c.map((function(e){return Object(f.jsx)("div",{children:e.name},e.name)}))]})}function Fe(e){var t=e.num,c=e.active,n=e.onClick;return Object(f.jsx)("button",{style:c?{backgroundColor:"#55d6be",outline:"none",height:"50px",width:"50px",borderRadius:"50%",border:"1px solid white"}:{backgroundColor:"#fc6471",outline:"none",height:"50px",width:"50px",borderRadius:"50%",border:"1px solid white"},onClick:n,children:t})}c(222);function Ae(e){var t=e.score;return Object(f.jsx)("div",{className:"score",children:Object(f.jsx)("span",{className:"score-text",children:t})})}var He=c(241);c(223);function De(e){var t=e.year,c=(e.setYear,e.rows),n=(e.setSelectedRow,e.onYearClick);return Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"wrapper",children:Object(f.jsxs)("table",{className:"scores-table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Year"}),Object(f.jsx)("th",{children:"Basic"}),Object(f.jsx)("th",{children:"Advance"})]})}),Object(f.jsx)("tbody",{children:c.map((function(e){return Object(f.jsxs)("tr",{onClick:function(){return n(e)},children:[Object(f.jsx)("td",{className:t==e.year?"active":"",children:e.year}),Object(f.jsx)("td",{children:e.basic}),Object(f.jsx)("td",{children:e.advance})]},e.id)}))})]})})})}function Be(){var e={display:"grid",gridTemplateColumns:"repeat(6, 50px)",gridTemplateRows:"repeat(4, 50px)",gap:"5px",justifyContent:"center",marginBottom:"20px"},t=Object(r.useState)([]),c=Object(l.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)([]),o=Object(l.a)(i,2),s=(o[0],o[1],Object(r.useState)([])),j=Object(l.a)(s,2),d=j[0],b=j[1],u=Object(r.useState)([]),O=Object(l.a)(u,2),h=O[0],m=O[1],p=Object(r.useState)(0),v=Object(l.a)(p,2),g=v[0],C=v[1],y=Object(r.useState)(0),k=Object(l.a)(y,2),w=k[0],I=k[1],R=Object(r.useState)(!1),F=Object(l.a)(R,2),A=F[0],H=(F[1],Object(r.useState)({})),D=Object(l.a)(H,2),B=D[0],E=D[1],N=Object(r.useState)(0),U=Object(l.a)(N,2),q=U[0],P=U[1],L=x.collection("scores"),M=x.collection("scoreDetails");Object(r.useEffect)((function(){for(var e=2017;e<2022;e++);L.orderBy("year").get().then((function(e){var t=e.docs.map((function(e,t){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})}));a(t)}))}),[]),Object(r.useEffect)((function(){M.orderBy("sn").where("year","==",q).get().then((function(e){var t=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})})),c=t.filter((function(e){return"basic"===e.type}));b(c),z(c);var n=t.filter((function(e){return"advance"===e.type}));m(n),V(n)}))}),[q]),Object(r.useEffect)((function(){var e=n.indexOf(B);-1!==e&&L.doc(B.id).update({basic:g}).then((function(){var t=n.slice();Object.assign(t[e],Object(S.a)(Object(S.a)({},B),{},{basic:g})),a(t)}))}),[g]),Object(r.useEffect)((function(){var e=n.indexOf(B);-1!==e&&L.doc(B.id).update({advance:w}).then((function(){var t=n.slice();Object.assign(t[e],Object(S.a)(Object(S.a)({},B),{},{advance:w})),a(t)}))}),[w]);var z=function(e){var t=0;e.map((function(e){return e.correct?t+=5:t})),C(t)},V=function(e){var t=0;e.map((function(e){return e.correct?t+=8:t})),I(t)},Y=function(e){M.doc(e.id).update({correct:!e.correct}).then((function(){if("basic"===e.type){var t=d.slice(),c=e;Object.assign(c,Object(S.a)(Object(S.a)({},c),{},{correct:!c.correct})),b(t),z(t)}if("advance"===e.type){var n=h.slice(),a=e;Object.assign(a,Object(S.a)(Object(S.a)({},a),{},{correct:!a.correct})),m(n),V(n)}}))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(De,{year:q,setYear:P,rows:n,setSelectedRow:E,onYearClick:function(e){P(e.year),E(e)}}),A?Object(f.jsx)(He.a,{active:!0,inline:"centered"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Ae,{score:g}),Object(f.jsx)("div",{style:e,children:d.map((function(e){return Object(f.jsx)(Fe,{onClick:function(){return Y(e)},active:e.correct,num:e.sn},e.id)}))}),Object(f.jsx)(Ae,{score:w}),Object(f.jsx)("div",{style:e,children:h.map((function(e){return Object(f.jsx)(Fe,{onClick:function(){return Y(e)},active:e.correct,num:e.sn},e.id)}))})]})]})}function Ee(){v().currentUser;return Object(f.jsxs)(C.d,{children:[Object(f.jsx)(C.b,{path:"/scores",exact:!0,component:Be}),Object(f.jsx)(C.b,{path:"/balances2",exact:!0,component:Ie}),Object(f.jsx)(C.b,{path:"/accounts",children:Object(f.jsx)(U,{})}),Object(f.jsx)(C.b,{path:"/cates",exact:!0,component:P}),Object(f.jsx)(C.b,{path:"/emp-basic",exact:!0,component:Re}),Object(f.jsx)(C.b,{path:"/cates/edit/:id",exact:!0,component:ce}),Object(f.jsx)(C.b,{path:"/tictactoe",component:T}),Object(f.jsx)(ke,{path:"/balances",exact:!0,component:te}),Object(f.jsx)(ke,{path:"/stocks",component:re}),Object(f.jsx)(C.b,{path:"/books",component:ue}),Object(f.jsx)(C.b,{path:"/login",exact:!0,component:ge}),Object(f.jsx)(C.b,{path:"/",exact:!0,component:te}),Object(f.jsx)(ke,{path:"/dashboard",exact:!0,component:Se}),Object(f.jsx)(C.b,{path:"/contacts",exact:!0,component:me}),Object(f.jsx)(C.b,{path:"/contacts/add",exact:!0,component:pe}),Object(f.jsx)(C.b,{path:"/contacts/view/:contactId",exact:!0,component:fe}),Object(f.jsx)(C.b,{path:"/contacts/edit/:contactId",exact:!0,component:pe})]})}var Ne=c(242);function Ue(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(g,{children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(y,{}),Object(f.jsx)(Ne.a,{children:Object(f.jsx)(Ee,{})})]})})})}c(224);var qe=document.getElementById("root");a.a.render(Object(f.jsx)(Ue,{}),qe)}},[[225,1,2]]]);
//# sourceMappingURL=main.e79d8953.chunk.js.map