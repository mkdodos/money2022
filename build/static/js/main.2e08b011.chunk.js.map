{"version":3,"sources":["utils/firebase.js","contexts/AuthContext.js","Header.js","utils/numberFormat.js","components/Accounts.js","pages/Cates/components/List.js","pages/Cates/index.js","components/TicTacToe.js","pages/Balances/components/ItemList.js","pages/Balances/components/EditForm.js","pages/Balances/components/Accounts.js","pages/Balances/components/DateFilter.js","pages/Balances/index.js","pages/Cates/components/EditCate.js","components/AutoTableFirebase.js","pages/Stocks.js","pages/Trans/Trans.js","pages/Trans/TransList.js","pages/Trans/index.js","contexts/BookContext.js","contexts/FirebaseBookContext.js","components/BookList.js","components/StockList.js","components/BookForm.js","services/ContactService.js","components/contacts/ContactList.js","components/Books.js","demo/contacts/ContactService.js","img/spin.gif","components/Spinner.js","demo/contacts/ContactList.js","demo/contacts/ViewContact.js","demo/contacts/AddContact.js","components/Login.js","components/PrivateRoute.js","components/MonthSelect.js","components/AccountDropdown.js","components/Dashboard.js","pages/Food/component/EditForm.js","pages/Food/images/hamburger.jpg","pages/Food/component/ProdList.js","pages/Food/component/Cart.js","pages/Food/index.js","pages/Balances2/Balances2.js","components/EmpBasic.js","pages/Scores/components/Circle.js","pages/Scores/components/Board.js","pages/Scores/components/List.js","pages/Scores/components/Clock.js","pages/Scores/Scores.js","pages/School/components/Scoreboard.js","pages/School/components/YearSelector.js","pages/School/components/SectionSelector.js","pages/School/components/TypeSelector.js","pages/School/components/EditForm.js","pages/School/components/Answer.js","pages/School/index.js","pages/Mortgages/data.js","pages/Mortgages/Mortgages.js","pages/Weather/images/day-cloudy.svg","pages/Weather/images/airFlow.svg","pages/Weather/images/rain.svg","pages/Weather/images/refresh.svg","pages/Weather/images/loading.svg","pages/Weather/Weather.js","pages/Calendar/Calendar.js","components/CateDropdown.js","pages/Dashboard/components/SearchBar.js","pages/Dashboard/components/DataList.js","pages/Dashboard/components/EditForm.js","pages/Dashboard/Query.js","pages/Credits/components/EditForm.js","pages/Credits/components/Dashboard.js","pages/Credits/components/SectionDropdown.js","pages/Credits/components/SearchBar.js","pages/Credits/components/DataList.js","pages/Credits/components/ModalForm.js","pages/Credits/index.js","pages/CatesNote/components/List.js","pages/CatesNote/index.js","pages/CatesNote/components/EditCate.js","pages/Minisoft/index.js","components/Demo.js","components/Routes.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","storage","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","login","email","password","signInWithEmailAndPassword","signup","createUserWithEmailAndPassword","logout","signOut","resetPassword","sendPasswordResetEmail","updateEmail","updatePassword","Provider","Header","activeItem","setActiveItem","history","useHistory","handleClick","e","name","push","Menu","pointing","secondary","Dropdown","item","icon","Item","as","Link","to","Divider","onClick","active","position","Icon","numberFormat","total","Intl","NumberFormat","currency","format","Accounts","defalutItem","prior","balance","rows","setRows","row","setRow","setTotal","editedIndex","setEditedIndex","modalOpen","setModalOpen","dbCol","collection","indexOf","handleChange","target","where","get","then","snapshot","temp","data","docs","map","doc","id","parseInt","_","sortBy","slice","reverse","console","log","Modal","open","closeIcon","onClose","Content","Form","Field","onChange","type","Actions","Button","floated","color","delete","filter","obj","primary","update","Number","newItemList","Object","assign","add","Segment","textAlign","Statistic","inverted","Value","Table","unstackable","Row","text","i","HeaderCell","Body","Cell","List","schema","header","Cates","orderBy","Square","className","this","props","Component","TicTacToe","state","squares","Array","fill","squaresCopy","setState","Grid","Column","renderSquare","ItemList","cates","setItem","rowsCopy","setItemCopy","setOpen","activeAccount","setIsIncome","setIsIncomeOrigin","isIncome","setCate","setType","setAccount","cate","prev","editedRow","date","title","income","amt","expense","handleEdit","Label","account","circular","EditForm","setRowsCopy","rowsAccount","setRowsAccount","setActiveAccount","itemCopy","isIncomeOrigin","accounts","updateBalance","index","newRows","handleItemClick","fluid","widths","placeholder","Select","selection","label","options","key","confirm","accountClick","range","setRange","Group","horizontal","basic","pages","length","isInteger","Math","ceil","size","DateFilter","handleFilterDate","setFilterDate","filterDate","width","Input","Balances","Date","toISOString","setCates","setAccounts","colCates","d","fetchBalancesData","data2","columns","verticalAlign","days","newDate","result","setDate","getDate","addDays","EditCate","useParams","exists","catch","error","onSubmit","AutoTable","itemList","setItemList","collectionName","now","edit","dataRow","MyTable","href","Stocks","qty","price","cost","Trans","TransList","from","setFrom","fromAcc","setFromAcc","amount","setAmount","setTo","toAcc","setToAcc","note","setNote","onOpen","content","accName","option","Index","setOptions","clear","items","FirebaseBookContext","FirebaseBookContextProvider","setBooks","books","editedBook","setEditedBook","removeBook","book","editBook","updateBook","saveBook","openForm","closeForm","BookList","author","NewBookForm","setTitle","setAuthor","ContactService","serverURL","ContactList","contacts","errorMessage","response","getAllContacts","JSON","stringify","Books","StockList","dataURL","axios","contactId","contact","post","put","Spinner","src","spinImg","style","ViewContact","getContact","AddContact","handleSave","UpdateContact","handleDelete","DeleteContact","Login","emailRef","useRef","passwordRef","setError","preventDefault","current","Card","ref","defaultValue","extra","PrivateRoute","component","rest","render","yearOptions","MonthButton","year","onYearChange","onMinusClick","onDoubleClick","onPlusClick","AccountDropdown","Dashboard","useReducer","action","column","direction","dataCopy","Error","dispatch","getMonth","month","setMonth","getFullYear","setYear","calTotal","arr","mm","filterdData","onYearClick","detail","celled","sortable","sorted","setQty","cart","localStorage","getItem","parse","find","Image","imageUrl","cartData","findIndex","cartStr","ProdList","toCart","itemsPerRow","margin","Description","Cart","sum","reduce","a","b","divided","minus","labelPosition","removeItem","Balances2","accountOptions","setAccountOptions","cateOptions","setCateOptions","filters","setFilters","defaultRow","setEditedRow","getBalancesData","getAccountsData","getCatesData","includes","handleInputChange","clearable","striped","EmpBasic","res","Circle","num","backgroundColor","outline","height","borderRadius","border","Board","score","setSelectedRow","advance","Clock","getTime","left","floor","hours","mins","Message","Scores","styleGrid","display","gridTemplateColumns","gridTemplateRows","gap","justifyContent","marginBottom","rowDetailsBasic","setRowDetailsBasic","rowDetailsAdvance","setRowDetailsAdvance","setScore","scoreAdvance","setScoreAdvance","seletedRow","dbColScores","dbColScoreDetails","y","calScoreAdvance","newScores","correct","Loader","inline","sn","Scoreboard","types","rowSpan","section","ch","en","math","nature","society","YearSelector","SectionSelector","names","TypeSelector","positive","defaultItem","saveRow","deleteRow","yearOpen","setYearOpen","Answer","sort","splice","accountData","mortgageData","Mortgages","setAccountData","bankData","setBankData","setMorgageData","mortgageDataCopy","setMorgageDataCopy","interest","mortgages","inputChange","createRow","newRow","uuidv4","newBalance","updateBank","newAccountData","handleAccountClick","Subheader","tableRowClick","Footer","_desc","_defs","_g","_extends","bind","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDayCloudy","_ref","svgRef","titleId","viewBox","xmlns","xmlnsXlink","undefined","x1","y1","x2","y2","stopColor","offset","stopOpacity","stroke","strokeWidth","fillRule","transform","cx","cy","r","strokeLinecap","rx","ry","ForwardRef","SvgAirFlow","SvgRain","strokeLinejoin","SvgRefresh","SvgLoading","WeatherCard","styled","div","Location","CurrentWeather","Temperature","Celsius","AirFlow","Rain","DayCloudy","DayCloudyIcon","Refresh","isLoading","Weather","TEMP","WDSD","observationTime","toLocaleTimeString","weatherElements","setWeatherElements","setCurrentWeather","fetchData","fetch","json","records","location","weatherElement","neededElements","elementName","elementValue","round","Calendar","activeDate","setActiveDate","v","j","CateDropdown","SearchBar","cateQuery","searchText","setSearchText","DataList","onDataListRowClick","flag","colSpan","s1","Query","substring","s2","accountName","consumeDate","SectionDropdown","handleSectionChange","handleFilter","editRow","ModalForm","openSearch","setOpenSearch","editRowIndex","setEditRowIndex","activeSection","setActiveSection","setDirection","setColumn","setFilter","newData","sortData","unshift","note_date","Demo","numbers","Routes","path","exact","Minisoft","Credits","Food","School","CatesNote","EditCatesNote","App","container","document","getElementById","ReactDom"],"mappings":"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","file":"static/js/main.2e08b011.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDUSJ5yzHvTCCSQTuONsPtOBGodjamReHc\",\r\n  authDomain: \"money2022-173b9.firebaseapp.com\",\r\n  projectId: \"money2022-173b9\",\r\n  storageBucket: \"money2022-173b9.appspot.com\",\r\n  messagingSenderId: \"944583877759\",\r\n  appId: \"1:944583877759:web:0fd8a43af8a727a76c0b4a\"\r\n};\r\n\r\nconst firebaseConfig_dada = {\r\n  apiKey: 'AIzaSyBKVsNm8RP9VKYBgEwmyRQsitx9dncLuaI',\r\n  authDomain: 'social-cool-f16ba.firebaseapp.com',\r\n  projectId: 'social-cool-f16ba',\r\n  storageBucket: 'social-cool-f16ba.appspot.com',\r\n  messagingSenderId: '578558980743',\r\n  appId: '1:578558980743:web:4668ba80e8df3c24087e22',\r\n};\r\n\r\n\r\n// const secondaryApp = firebase.initializeApp(secondaryAppConfig, \"secondary\");\r\n\r\n\r\nconst app = firebase.initializeApp(firebaseConfig);\r\nconst db = firebase.firestore();\r\n\r\n\r\nconst storage = firebase.storage();\r\n\r\nconst app_dada = firebase.initializeApp(firebaseConfig_dada,\"dada\");\r\nconst db_dada = app_dada.firestore();\r\n\r\n\r\nconst auth = app.auth();\r\n\r\n// export default firebase;\r\nexport { db,db_dada, auth,storage };\r\n","import React, { useContext, useState, useEffect } from \"react\"\r\nimport { auth } from \"../utils/firebase\"\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = useState()\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  function signup(email, password) {\r\n    return auth.createUserWithEmailAndPassword(email, password)\r\n  }\r\n\r\n  function login(email, password) {\r\n    return auth.signInWithEmailAndPassword(email, password)\r\n  }\r\n\r\n  function logout() {\r\n    return auth.signOut()\r\n  }\r\n\r\n  function resetPassword(email) {\r\n    return auth.sendPasswordResetEmail(email)\r\n  }\r\n\r\n  function updateEmail(email) {\r\n    return currentUser.updateEmail(email)\r\n  }\r\n\r\n  function updatePassword(password) {\r\n    return currentUser.updatePassword(password)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(user => {\r\n      setCurrentUser(user)\r\n      setLoading(false)\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [])\r\n\r\n  const value = {\r\n    currentUser,\r\n    login,\r\n    signup,\r\n    logout,\r\n    resetPassword,\r\n    updateEmail,\r\n    updatePassword\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n      {/* {children} */}\r\n    </AuthContext.Provider>\r\n  )\r\n}","import React from 'react';\r\nimport {\r\n  Menu,\r\n  Icon,\r\n  Image,\r\n  Dropdown,\r\n  Container,\r\n  Sticky,\r\n} from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// import { useAuth } from './contexts/AuthContext';\r\nimport { useAuth } from './contexts/AuthContext';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function Header() {\r\n  const [activeItem, setActiveItem] = React.useState('');\r\n\r\n  const { currentUser, logout } = useAuth();\r\n\r\n  const history = useHistory();\r\n  function handleClick(e, { name }) {\r\n    setActiveItem(name);\r\n  }\r\n\r\n  async function handleLogout() {\r\n    // setError(\"\")\r\n\r\n    try {\r\n      await logout();\r\n      history.push('/login');\r\n    } catch {\r\n      // setError(\"Failed to log out\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    // Menu secondary Dropdown simple\r\n    // 會產生 gap 變成 Dropdown 內的 item 不好點\r\n    <Menu pointing secondary>\r\n      {/* 下拉選單 */}\r\n      <Dropdown item icon=\"setting\">\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item as={Link} to=\"/accounts\" name=\"accounts\">\r\n            帳戶\r\n          </Dropdown.Item>\r\n          <Dropdown.Item as={Link} to=\"/cates\">\r\n            類別\r\n          </Dropdown.Item>\r\n\r\n          <Dropdown.Item as={Link} to=\"/cates-note\">\r\n            記事類別\r\n          </Dropdown.Item>\r\n\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item as={Link} to=\"/stocks\">\r\n            股票\r\n          </Dropdown.Item>\r\n\r\n          <Dropdown.Item as={Link} to=\"/dashboard/query\">\r\n            查詢\r\n          </Dropdown.Item>\r\n\r\n          {/* <Dropdown.Divider /> */}\r\n          {/* <Dropdown.Header>Export</Dropdown.Header> */}\r\n          {/* <Dropdown.Item>Share</Dropdown.Item> */}\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n\r\n      {/* 特定使用者選單 */}\r\n      {currentUser?.email == 'mkdodos@gmail.com' && (\r\n        <Menu.Item\r\n          as={Link}\r\n          to=\"/mortgages\"\r\n          name=\"mortgages\"\r\n          onClick={handleClick}\r\n          active={activeItem === 'mortgages'}\r\n        >\r\n          房貸\r\n        </Menu.Item>\r\n      )}\r\n      {/* 一般使用者選單 */}\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/credits\"\r\n        name=\"credits\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'credits'}\r\n      >\r\n        信用卡\r\n      </Menu.Item>\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/dashboard\"\r\n        name=\"dashboard\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'dashboard'}\r\n      >\r\n        統計\r\n      </Menu.Item>\r\n\r\n      {/* <Menu.Item\r\n        as={Link}\r\n        to=\"/scores\"\r\n        name=\"scores\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'scores'}\r\n      >\r\n        分數\r\n      </Menu.Item> */}\r\n\r\n      {/* <Menu.Item\r\n        as={Link}\r\n        to=\"/school\"\r\n        name=\"school\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'school'}\r\n      >\r\n        學校\r\n      </Menu.Item> */}\r\n\r\n      {/* <Menu.Item\r\n        as={Link}\r\n        to=\"/food\"\r\n        name=\"food\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'food'}\r\n      >\r\n        點餐\r\n      </Menu.Item> */}\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/trans\"\r\n        name=\"trans\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'trans'}\r\n      >\r\n        轉帳\r\n      </Menu.Item>\r\n\r\n      <Menu.Item\r\n        as={Link}\r\n        to=\"/balances\"\r\n        name=\"balances\"\r\n        onClick={handleClick}\r\n        active={activeItem === 'balances'}\r\n      >\r\n        收支\r\n      </Menu.Item>\r\n\r\n      <Menu.Menu position=\"right\">\r\n        {currentUser ? (\r\n          <Menu.Item name=\"\" onClick={handleLogout}>\r\n            <Icon name=\"sign-out\" />\r\n          </Menu.Item>\r\n        ) : (\r\n          <Menu.Item name=\"login\" as={Link} to=\"/login\">\r\n            Login\r\n          </Menu.Item>\r\n        )}\r\n      </Menu.Menu>\r\n    </Menu>\r\n  );\r\n}\r\n","const numberFormat = (total) => {\r\n  var formatter = new Intl.NumberFormat(\"en-US\", {\r\n    currency: \"USD\", // 2,500\r\n   /* style: \"currency\"  $2,500.00 */\r\n  });\r\n  return formatter.format(total);\r\n};\r\n\r\nexport default numberFormat ;\r\n","import { db } from '../utils/firebase';\r\n// import {db as dada} from '../utils/firebase-dada'\r\nimport { Table, Form, Button, Modal, Tab , Segment,Statistic} from 'semantic-ui-react';\r\nimport DataTable from './DataTable';\r\nimport DataRow from './DataRow';\r\nimport React, { useState } from 'react';\r\nimport EditForm from './EditForm';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport numberFormat from '../utils/numberFormat';\r\n\r\nimport _ from 'lodash'\r\n\r\nexport default function Accounts() {\r\n  const { currentUser } = useAuth();\r\n  const schema = [\r\n    // { text: '名稱', value: 'id', type: 'string' },\r\n    { text: '名稱', value: 'name', type: 'string' },\r\n    { text: '順序', value: 'prior', type: 'number' },\r\n    { text: '餘額', value: 'balance', type: 'number' },\r\n  ];\r\n  const defalutItem = { name: '', prior: '', balance: '' };\r\n  const [rows, setRows] = React.useState([]);\r\n  const [row, setRow] = React.useState(defalutItem);\r\n\r\n  const [total, setTotal] = React.useState(0);\r\n\r\n  // 用來判斷新增或修改,還有修改後將資料更新回該列\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n\r\n  // 控制 Modal 顯示\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const dbCol = db.collection('accounts');\r\n  React.useEffect(() => {\r\n    dbCol\r\n      // .orderBy('balance','desc')\r\n      .where('user', '==', currentUser.email)\r\n      .get()\r\n      .then((snapshot) => {\r\n        let temp = 0 ;\r\n        let data = snapshot.docs.map((doc) => {\r\n          temp += doc.data().balance * 1;\r\n          return { ...doc.data(), id: doc.id, \r\n            // 將金額字串轉為數字才能正確做排序\r\n          balance: parseInt(doc.data().balance),\r\n         };\r\n        });\r\n        data = _.sortBy(data,'balance')\r\n        // data = data.reverse()\r\n        data = data.slice().reverse()\r\n        setRows(data);\r\n        console.log(temp)\r\n        setTotal(temp)\r\n        // setRows(\r\n        //   snapshot.docs.map((doc) => {\r\n        //     return { ...doc.data(), id: doc.id };\r\n        //   })\r\n        // );\r\n      });\r\n  }, []);\r\n\r\n  // 儲存\r\n  function handleSave() {\r\n    const { name, balance, prior } = row;\r\n    if (editedIndex > -1) {\r\n      dbCol\r\n        // 順序要存成數字,方便排序\r\n        .doc(row.id)\r\n        .update({ name, balance, prior:Number(prior) })\r\n        .then(() => {\r\n          let newItemList = rows.slice();\r\n          Object.assign(newItemList[editedIndex], row);\r\n          setRows(newItemList);\r\n          setModalOpen(false);\r\n          setRow(defalutItem);\r\n          console.log(row.id)\r\n        });\r\n    } else {\r\n      dbCol\r\n        .add({ name, balance, prior, user: currentUser.email })\r\n        .then((doc) => {\r\n          setModalOpen(false);\r\n          setRow(defalutItem);\r\n          setRows([...rows, { ...row, id: doc.id }]);\r\n        });\r\n    }\r\n  }\r\n\r\n  function handleClick(row) {\r\n    setEditedIndex(rows.indexOf(row));\r\n    setRow(row);\r\n    setModalOpen(true);\r\n    // console.log(row);\r\n  }\r\n\r\n  function renderRow(row, i) {\r\n    return (\r\n      <DataRow key={i} row={row} value={i} onClick={() => handleClick(row)} />\r\n    );\r\n  }\r\n\r\n  function handleChange(e) {\r\n    \r\n    setRow({ ...row, [e.target.name]: e.target.value });\r\n    // setRow({ [event.target.name]: event.target.value });\r\n  }\r\n\r\n  function handleAdd() {\r\n    setEditedIndex(-1);\r\n    setModalOpen(true);\r\n  }\r\n\r\n  function handleDelete() {\r\n    dbCol.doc(row.id).delete();\r\n    setRows(rows.filter((obj) => obj.id !== row.id));\r\n    setModalOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        open={modalOpen}\r\n        closeIcon\r\n        onClose={() => {\r\n          setModalOpen(false);\r\n        }}\r\n      >\r\n        <Modal.Header>編輯帳戶</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>名稱</label>\r\n              <input\r\n                name=\"name\"                \r\n                value={row.name}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>順序</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"prior\"\r\n                value={row.prior}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>餘額</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"balance\"\r\n                // placeholder=\"Last Name\"\r\n                value={row.balance}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button floated=\"left\" color=\"red\" onClick={handleDelete}>\r\n            Delete\r\n          </Button>\r\n          <Button primary onClick={handleSave}>\r\n            Save\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n      {/* {editedIndex} */}\r\n      \r\n      \r\n      \r\n      <Segment textAlign=\"center\" >\r\n        <Statistic inverted\r\n          color=\"red\"          \r\n        >\r\n          <Statistic.Value>{numberFormat(total)}</Statistic.Value>\r\n          \r\n        </Statistic>\r\n      </Segment>\r\n      \r\n      \r\n      \r\n      <Button onClick={handleAdd} color=\"olive\">\r\n        ADD\r\n      </Button>\r\n      \r\n      \r\n      \r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            {schema.map((obj, i) => (\r\n              <Table.HeaderCell key={i}>{obj.text}</Table.HeaderCell>\r\n            ))}\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {rows.map((row, i) => {\r\n            // return <div>{row.id}</div>\r\n            // (\r\n            return (\r\n              <Table.Row\r\n                onClick={() => {\r\n                  handleClick(row);\r\n                }}\r\n                key={row.id}\r\n              >\r\n                {/* <Table.Cell>{row.id}</Table.Cell> */}\r\n                <Table.Cell>{row.name}</Table.Cell>\r\n                <Table.Cell>{row.prior}</Table.Cell>\r\n                <Table.Cell >{numberFormat(row.balance)}</Table.Cell>\r\n              </Table.Row>\r\n            );\r\n            // )\r\n\r\n            // return renderRow(row, i);\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n\r\n      {/* <DataTable rows={rows} schema={schema} onRowClick={handleRowClick} /> */}\r\n    </>\r\n  );\r\n}\r\n","import { Table } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nexport default function List({ rows, schema }) {\r\n  return (\r\n    <>\r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            {/* 標題列 */}\r\n            {schema.map((header, i) => {\r\n              return <Table.HeaderCell key={i}>{header.text}</Table.HeaderCell>;\r\n            })}\r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {/* 資料列 */}\r\n          {rows.map((row, i) => {\r\n            return (\r\n              <tr key={i}>\r\n                {/* 資料欄 */}\r\n                {schema.map((obj, i) => {\r\n                  return <td key={i}>{row[obj.name]}</td>;\r\n                })}\r\n\r\n                <td>\r\n                <Link to={`/cates/edit/${row.id}`}>Edit</Link>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n}\r\n","import { useAuth } from '../../contexts/AuthContext';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport List from './components/List';\r\n\r\nimport { Button } from 'semantic-ui-react';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { db } from '../../utils/firebase';\r\n\r\nexport default function Cates() {\r\n  const schema = [\r\n    {\r\n      name: 'name',\r\n      text: '名稱',\r\n      type: 'text',\r\n    },\r\n    {\r\n      name: 'prior',\r\n      text: '順序',\r\n      type: 'number',\r\n    },\r\n  ];\r\n\r\n  const { currentUser } = useAuth();\r\n\r\n  const [rows, setRows] = useState([]);\r\n  useEffect(() => {\r\n    db.collection('cates')\r\n      .where('user', '==', currentUser.email)\r\n      .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        setRows(data);\r\n      });\r\n  }, []);\r\n\r\n  const handleInsert = () => {\r\n    console.log('insert');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Link to={`/cates/insert`}>新增</Link>\r\n\r\n      {/* <Button onClick={handleInsert}>新增</Button> */}\r\n      <List rows={rows} schema={schema}></List>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Grid } from 'semantic-ui-react';\r\n\r\nclass Square extends React.Component {\r\n  // handleClick() {\r\n  //   console.log('this is class')\r\n  // }\r\n  render() {\r\n    return (\r\n      <button className=\"square\" onClick={this.props.onClick}>\r\n        {this.props.value}\r\n      </button>\r\n    );\r\n    // return (\r\n    //   <button className=\"square\" onClick={()=>this.handleClick()}>\r\n    //     {this.props.value}\r\n    //   </button>\r\n    // );\r\n  }\r\n}\r\n\r\n// function Square(props) {\r\n//   function handleClick() {\r\n//     console.log('this is square')\r\n//   }\r\n//   return (\r\n\r\n//       <button className='square'  onClick={handleClick}>\r\n//         {props.value}\r\n//       </button>\r\n\r\n//   );\r\n// }\r\n\r\nexport default class TicTacToe extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      squares: Array(9).fill(null),\r\n    };\r\n  }\r\n\r\n  handleClick(i) {\r\n    const squaresCopy = this.state.squares.slice();\r\n    squaresCopy[i] = 'X';\r\n    this.setState({\r\n      squares: squaresCopy,\r\n    });\r\n    // this.setState({ value: 'X' });\r\n  }\r\n\r\n  renderSquare(i) {\r\n    return (\r\n      <Square\r\n        value={this.state.squares[i]}\r\n        onClick={() => {\r\n          this.handleClick(i);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Grid>\r\n        <Grid.Row>\r\n          <Grid.Column>{this.renderSquare(0)}</Grid.Column>\r\n          <Grid.Column>{this.renderSquare(1)}</Grid.Column>\r\n          <Grid.Column>{this.renderSquare(2)}</Grid.Column>\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <Grid.Column>{this.renderSquare(3)}</Grid.Column>\r\n          <Grid.Column>{this.renderSquare(4)}</Grid.Column>\r\n          <Grid.Column>{this.renderSquare(5)}</Grid.Column>\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          {/* <Grid.Column>{this.renderSquare(6)}</Grid.Column> */}\r\n          <Grid.Column>{this.renderSquare(7)}</Grid.Column>\r\n          <Grid.Column>{this.renderSquare(8)}</Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n","import { db } from '../../../utils/firebase';\r\nimport DataTable from '../../../components/DataTable';\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n  Table,\r\n  Icon,\r\n  Label,\r\n  Header,\r\n  Input,\r\n  Select,\r\n  Grid,\r\n} from 'semantic-ui-react';\r\n\r\nexport default function ItemList({\r\n  cates,\r\n  rows,\r\n  rowsCopy,\r\n  setRows,\r\n  setItem,\r\n  setItemCopy,\r\n  setEditedIndex,\r\n  setOpen,\r\n  activeAccount,\r\n  setIsIncome,\r\n  isIncome,\r\n  setIsIncomeOrigin,\r\n  setCate,\r\n  setAccount,\r\n  setType,\r\n}) {\r\n  const [search, setSearch] = useState('');\r\n  // const [rows, setRows] = React.useState([]);\r\n  const schema = [\r\n    { text: '日期', value: 'date', type: 'date' },\r\n    { text: '帳戶', value: 'account', type: 'map' },\r\n    { text: '類別', value: 'cate', type: 'string' },\r\n    { text: '項目', value: 'title', type: 'string' },\r\n    { text: '收入', value: 'income', type: 'number' },\r\n    { text: '支出', value: 'expense', type: 'number' },\r\n  ];\r\n\r\n  // React.useEffect(() => {\r\n  // axios.get('http://192.168.0.12:9000/balances').then(res=>{\r\n  //   setRows(res.data)\r\n  // })\r\n\r\n  function handleEdit(row) {\r\n    // setIsIncome(row.income?true:false)\r\n\r\n    setCate(row.cate);\r\n    // setAccount(row.account);\r\n\r\n    setType(row.type);\r\n\r\n    // 設定作用中項目(收入或支出),同時更新表單中的金額\r\n    setIsIncome((prev) => {\r\n      let editedRow = { date: row.date, title: row.title, id: row.id };\r\n      if (row.income) {\r\n        setItem({ ...editedRow, amt: row.income });\r\n        setItemCopy({ ...editedRow, amt: row.income });\r\n        return true;\r\n      } else {\r\n        setItem({ ...editedRow, amt: row.expense });\r\n        setItemCopy({ ...editedRow, amt: row.expense });\r\n        return false;\r\n      }\r\n    });\r\n\r\n    setIsIncomeOrigin(() => {\r\n      if (row.income) return true;\r\n      return false;\r\n    });\r\n\r\n    setEditedIndex(rows.indexOf(row));\r\n    setOpen(true);\r\n  }\r\n\r\n  function handleSearch(e) {\r\n    setSearch(e.target.value);\r\n\r\n    // 要 toLowerCase 才能正確查詢\r\n    setRows(\r\n      rowsCopy.filter((row) =>\r\n        row.title.toLowerCase().includes(e.target.value.toLowerCase())\r\n      )\r\n    );\r\n  }\r\n\r\n  function handleCateSearch(e, obj) {\r\n    console.log(obj.value);\r\n    // setSearch(e.target.value);\r\n\r\n    // 要 toLowerCase 才能正確查詢\r\n    setRows(rowsCopy.filter((row) => row.cate === obj.value));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* {search} */}\r\n      {/* {JSON.stringify(rows)} */}\r\n      {/* <Grid>\r\n        <Grid.Row columns={2}>\r\n          <Grid.Column>\r\n            <Input\r\n              name=\"search\"\r\n              fluid\r\n              value={search}\r\n              onChange={handleSearch}\r\n              placeholder=\"Search...\"\r\n            ></Input>\r\n          </Grid.Column>\r\n          <Grid.Column>\r\n            <Select\r\n              selection\r\n              fluid\r\n              label=\"類別\"\r\n              placeholder=\"\"\r\n              // value={cate}\r\n              options={cates}\r\n              onChange={handleCateSearch}\r\n            />\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid> */}\r\n\r\n      <Table unstackable>\r\n        {/* <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>日期</Table.HeaderCell>\r\n            <Table.HeaderCell>項目</Table.HeaderCell> \r\n            <Table.HeaderCell>金額</Table.HeaderCell>\r\n             <Table.HeaderCell>#</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header> */}\r\n        <Table.Body>\r\n          {rows.map((row) => {\r\n            return (\r\n              <Table.Row\r\n                key={row.id}\r\n                onClick={() => {\r\n                  handleEdit(row);\r\n                }}\r\n              >\r\n                <Table.Cell>\r\n                  <Header as=\"h4\">{row.title}</Header>\r\n                  {/* <span>{row.date} </span> */}\r\n\r\n                  {!activeAccount && (\r\n                    <Label color=\"teal\">{row.account?.name}</Label>\r\n                  )}\r\n                  {row.cate && <Label>{row.cate}</Label>}\r\n                </Table.Cell>\r\n                <Table.Cell textAlign=\"right\">\r\n                  {row.income ? (\r\n                    <Label color=\"teal\" circular>\r\n                      存\r\n                    </Label>\r\n                  ) : (\r\n                    <Label color=\"orange\" circular>\r\n                      提\r\n                    </Label>\r\n                  )}\r\n                  <br></br>$ {row.income ? row.income : row.expense + ''}\r\n                  {/* {JSON.stringify(row)} */}\r\n                </Table.Cell>\r\n\r\n                {/* <Table.Cell>{row.date.slice(5,10)}</Table.Cell>\r\n                <Table.Cell>{row.title}</Table.Cell>\r\n                <Table.Cell>{row.expense}</Table.Cell>\r\n                <Table.Cell>{row.account?.name}</Table.Cell> */}\r\n                {/* <Table.Cell\r\n                  onClick={() => {\r\n                    handleEdit(row);\r\n                  }}\r\n                >\r\n                  <a href=\"#\">\r\n                    <Icon name=\"edit\" />\r\n                  </a>\r\n                </Table.Cell> */}\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n\r\n      {/* <DataTable rows={rows} schema={schema} /> */}\r\n    </>\r\n  );\r\n}\r\n","import { Form, Button, Modal, Menu } from 'semantic-ui-react';\r\nimport { useState } from 'react';\r\nimport { v4 as uuid } from 'uuid';\r\nimport { db } from '../../../utils/firebase';\r\nimport { useAuth } from '../../../contexts/AuthContext';\r\nconst EditForm = ({\r\n  rows,\r\n  setRows,\r\n  rowsCopy,\r\n  setRowsCopy,\r\n  rowsAccount,\r\n  setRowsAccount,\r\n  item,\r\n  setItem,\r\n  editedIndex,\r\n  defalutItem,\r\n  setEditedIndex,\r\n  open,\r\n  setOpen,\r\n  setActiveAccount,\r\n  activeAccount,\r\n  itemCopy,\r\n  isIncome,\r\n  setIsIncome,\r\n  isIncomeOrigin,\r\n  cates,\r\n  cate,\r\n  setCate,\r\n  account,\r\n  accounts,\r\n  setAccount,\r\n  type,\r\n  \r\n  setType,\r\n}) => {\r\n  const { currentUser } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const types = [\r\n    { key: 'm', text: '一般', value: '一般' },\r\n    { key: 'f', text: '轉帳', value: '轉帳' },\r\n    { key: 'o', text: '投資', value: '投資' },\r\n  ];\r\n\r\n  // const [amt, setAmt] = useState('');\r\n\r\n  // 表單輸入時,設定 item 的值\r\n  const handleChange = (e) => {\r\n    console.log(item);\r\n    setItem({ ...item, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const dbCol = db.collection('balances');\r\n\r\n  function saveItem() {\r\n    // 新增(判斷 isIncome 收入或支出 )\r\n    if (editedIndex == -1) {\r\n      let editedRow = {\r\n        date: item.date,\r\n        title: item.title,\r\n        // cate: cate,\r\n        user: currentUser.email,\r\n        account: activeAccount,\r\n      };\r\n      // 有選類別才寫入\r\n      if (cate) editedRow.cate = cate;\r\n\r\n      // 有選 type 才寫入\r\n      if (type) editedRow.type = type;\r\n\r\n      if (isIncome) {\r\n        editedRow = {\r\n          ...editedRow,\r\n          income: item.amt,\r\n        };\r\n      } else {\r\n        editedRow = {\r\n          ...editedRow,\r\n          expense: item.amt,\r\n        };\r\n      }\r\n\r\n      setLoading(true);\r\n      dbCol.add(editedRow).then((doc) => {\r\n        console.log(doc.id);\r\n        const row = {\r\n          ...editedRow,\r\n          id: doc.id,\r\n          // user: currentUser.email,\r\n          // account: activeAccount,\r\n        };\r\n        setRows([row, ...rows]);\r\n        setRowsCopy([row, ...rowsCopy]);\r\n        setLoading(false);\r\n        setEditedIndex(-1);\r\n        setItem(defalutItem);\r\n        setOpen(false);\r\n\r\n        // 更新帳額餘額\r\n        let amt = activeAccount.balance - item.amt * 1;\r\n        if (isIncome) amt = activeAccount.balance + item.amt * 1;\r\n        updateBalance(amt);\r\n      });\r\n    } else {\r\n      // 更新\r\n      let editedRow = {\r\n        date: item.date,\r\n        title: item.title,\r\n        // cate: cate,\r\n        user: currentUser.email,\r\n        account: activeAccount,\r\n      };\r\n\r\n      // 有選類別才寫入\r\n      if (cate) editedRow.cate = cate;\r\n      // 有選 type 才寫入\r\n      if (type) editedRow.type = type;\r\n\r\n      if (isIncome) {\r\n        editedRow = {\r\n          // date: item.date,\r\n          // title: item.title,\r\n          // cate: cate,\r\n          // user: currentUser.email,\r\n          // account: activeAccount,\r\n          ...editedRow,\r\n          income: item.amt,\r\n          expense: null,\r\n        };\r\n        // delete editedRow.expense;\r\n      } else {\r\n        editedRow = {\r\n          ...editedRow,\r\n          expense: item.amt,\r\n          income: null,\r\n        };\r\n        // delete editedRow.income;\r\n      }\r\n\r\n      setLoading(true);\r\n      dbCol\r\n        .doc(item.id)\r\n        // .update(editedRow)\r\n        // 用 set 避免收支互改時,資料庫一筆資料同時有收支的情形\r\n        // 已有設定值為 null 可用 update\r\n        .update(editedRow)\r\n        // .update(item)\r\n        .then(() => {\r\n          // 更新帳額餘額\r\n          let amt =\r\n            // activeAccount.balance - item.expense * 1 + itemCopy.expense * 1;\r\n            activeAccount.balance - item.amt * 1 + itemCopy.amt * 1;\r\n          if (isIncome)\r\n            amt = activeAccount.balance * 1 + item.amt * 1 - itemCopy.amt * 1;\r\n\r\n          // 原來是支出=>收入\r\n          if (!isIncomeOrigin && isIncome)\r\n            amt = activeAccount.balance + item.amt * 1 + itemCopy.amt * 1;\r\n\r\n          // 原來是收入=>支出\r\n          if (isIncomeOrigin && !isIncome)\r\n            amt = activeAccount.balance - item.amt * 1 - itemCopy.amt * 1;\r\n          updateBalance(amt);\r\n\r\n          // 先更新帳戶餘額再做表格更新,才會正常\r\n          let newItemList = rows.slice();\r\n          // Object.assign(newItemList[editedIndex], item);\r\n          // delete editedRow[\"income\"];\r\n          Object.assign(newItemList[editedIndex], editedRow);\r\n          // console.log(newItemList);\r\n          setRows(newItemList);\r\n\r\n          setLoading(false);\r\n          setEditedIndex(-1);\r\n          setItem(defalutItem);\r\n          setOpen(false);\r\n        });\r\n    }\r\n  }\r\n\r\n  function updateBalance(amt) {\r\n    // 更新帳戶餘額\r\n    db.collection('accounts').doc(activeAccount.id).update({ balance: amt });\r\n    const index = rowsAccount.indexOf(activeAccount);\r\n    const newRows = rowsAccount.slice();\r\n    Object.assign(newRows[index], { ...activeAccount, balance: amt });\r\n    setRowsAccount(newRows);\r\n  }\r\n  const handleDelete = () => {\r\n    // abc\r\n    if (!confirm('確定刪除嗎?')) return;\r\n    setLoading(true);\r\n    dbCol\r\n      .doc(item.id)\r\n      .delete()\r\n      .then(() => {\r\n        setRows(rows.filter((obj) => obj.id !== item.id));\r\n        setRowsCopy(rowsCopy.filter((obj) => obj.id !== item.id));\r\n        setEditedIndex(-1);\r\n        setItem(defalutItem);\r\n        setOpen(false);\r\n        setLoading(false);\r\n\r\n        let amt = activeAccount.balance + item.amt * 1;\r\n        if (isIncome) amt = activeAccount.balance - item.amt * 1;\r\n\r\n        updateBalance(amt);\r\n\r\n        // setActiveAccount(function (prev) {\r\n        //   let amt = prev.balance + item.expense * 1\r\n\r\n        //   // 刪除支出\r\n        //   db.collection('accounts')\r\n        //   .doc(activeAccount.id)\r\n        //   .update({ balance: amt });\r\n\r\n        //   return { ...prev, balance: amt };\r\n        // });\r\n      });\r\n  };\r\n\r\n  function handleAmtChange(e) {\r\n    setAmt(e.target.value);\r\n  }\r\n\r\n  function handleItemClick(e, { name }) {\r\n    console.log(item);\r\n    // 設定作用中項目樣式\r\n    // 設定金額為收入或支出\r\n    if (name === 'income') {\r\n      setIsIncome(true);\r\n      // setItem({...item, income:})\r\n    } else {\r\n      setIsIncome(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <pre>{JSON.stringify(itemCopy)}</pre> */}\r\n\r\n      <Modal\r\n        open={open}\r\n        closeIcon\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      >\r\n        <Modal.Header>\r\n          編輯表單\r\n          {isIncomeOrigin ? 'income' : 'expense'}\r\n        </Modal.Header>\r\n        <Modal.Content>\r\n          {/* {JSON.stringify(item)} */}\r\n          <Menu fluid widths={2} pointing secondary>\r\n            <Menu.Item\r\n              color=\"teal\"\r\n              name=\"income\"\r\n              active={isIncome}\r\n              onClick={handleItemClick}\r\n            >\r\n              收入\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              color=\"orange\"\r\n              name=\"expense\"\r\n              active={!isIncome}\r\n              onClick={handleItemClick}\r\n            >\r\n              支出\r\n            </Menu.Item>\r\n          </Menu>\r\n\r\n          <Form>\r\n            <Form.Field>\r\n              <label>日期</label>\r\n              <input\r\n                name=\"date\"\r\n                type=\"date\"\r\n                placeholder=\"\"\r\n                value={item.date}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n\r\n\r\n\r\n\r\n            {/* <Form.Select\r\n              selection\r\n              fluid\r\n              label=\"帳戶\"             \r\n              value={account}\r\n              options={accounts}\r\n              onChange={(e, obj) => {\r\n                setAccount(obj.value);\r\n              }}\r\n            /> */}\r\n\r\n\r\n            <Form.Select\r\n              selection\r\n              fluid\r\n              label=\"類別\"\r\n              placeholder=\"\"\r\n              value={cate}\r\n              options={cates}\r\n              onChange={(e, obj) => {\r\n                setCate(obj.value);\r\n              }}\r\n            />\r\n\r\n            <Form.Field>\r\n              <label>項目</label>\r\n              <input\r\n                name=\"title\"\r\n                placeholder=\"\"\r\n                value={item.title}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>金額</label>\r\n              <input\r\n                name=\"amt\"\r\n                type=\"number\"\r\n                placeholder=\"\"\r\n                value={item.amt}\r\n                // value={isIncome?item.income:item.expense}\r\n                onChange={handleChange}\r\n              />\r\n            </Form.Field>\r\n\r\n            <Form.Select\r\n              fluid\r\n              label=\"統計類型\"\r\n              value={type}\r\n              options={types}\r\n              onChange={(e, obj) => {\r\n                setType(obj.value);\r\n              }}\r\n            />\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          {editedIndex > -1 && (\r\n            <Button\r\n              loading={loading}\r\n              floated=\"left\"\r\n              color=\"red\"\r\n              onClick={handleDelete}\r\n            >\r\n              Delete\r\n            </Button>\r\n          )}\r\n\r\n          <Button loading={loading} floated=\"right\" primary onClick={saveItem}>\r\n            Save\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditForm;\r\n","import { Grid, Segment, Icon } from 'semantic-ui-react';\r\nimport { useState, useEffect } from 'react';\r\nimport { floor } from 'lodash';\r\n\r\nconst Accounts = ({ rows, activeAccount, accountClick }) => {\r\n  const [range, setRange] = useState(0);\r\n\r\n  // 帳戶一次顯示幾個\r\n  const accountPerPage = 4;\r\n\r\n  function handleSetRange() {\r\n    // const pages = Math.floor(rows.length / accountPerPage);\r\n    let pages = rows.length / accountPerPage;\r\n    // 判斷是否整除,決定要顯示幾頁\r\n    // 假設有6筆,每次顯示3,就會整除,顯示2頁\r\n    // 假設有6筆,每次顯示4,不會整除,顯示2頁\r\n    pages = Number.isInteger(pages) ? pages : Math.ceil(pages);\r\n    console.log(Number.isInteger(pages));\r\n    setRange((prev) => {\r\n      if (prev < pages - 1) return prev + 1;\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Segment.Group horizontal>\r\n        {rows\r\n          .slice(\r\n            accountPerPage * range,\r\n            accountPerPage * range + accountPerPage\r\n          )\r\n          .map((row, i) => (\r\n            <Segment\r\n              key={row.id}\r\n              textAlign=\"center\"\r\n              color=\"teal\"\r\n              // 點選反白\r\n              inverted={activeAccount?.name === row.name}\r\n              onClick={() => {\r\n                accountClick(row);\r\n              }}\r\n            >\r\n              {row.name}\r\n            </Segment>\r\n          ))}\r\n        <Segment\r\n          textAlign=\"center\"\r\n          basic\r\n          color=\"olive\"\r\n          onClick={handleSetRange}\r\n        >\r\n          <Icon size=\"large\" name=\"arrow alternate circle right outline\" />\r\n        </Segment>\r\n      </Segment.Group>\r\n    </>\r\n\r\n    // <Grid columns={3}>\r\n    //   {rows.map((row, i) => (\r\n    //     <Grid.Column key={row.id}>\r\n    //       <Segment\r\n    //         textAlign=\"center\"\r\n    //         color=\"teal\"\r\n    //         // 點選反白\r\n    //         inverted={activeAccount?.name === row.name}\r\n    //         onClick={() => {\r\n    //           accountClick(row);\r\n    //         }}\r\n    //       >\r\n    //         {row.name}\r\n    //       </Segment>\r\n    //     </Grid.Column>\r\n    //   ))}\r\n    // </Grid>\r\n  );\r\n};\r\n\r\nexport default Accounts;\r\n","import React from 'react';\r\nimport {\r\n  Button,\r\n  Input,\r\n  Icon,\r\n  Menu,\r\n  Segment,\r\n  Grid,\r\n  Image,\r\n} from 'semantic-ui-react';\r\n\r\nexport default function DateFilter({\r\n  handleFilterDate,\r\n  setFilterDate,\r\n  filterDate,\r\n}) {\r\n  return (\r\n    <>\r\n      <Grid>\r\n        <Grid.Row>\r\n          <Grid.Column width={4}>\r\n            <Button size=\"small\" onClick={() => handleFilterDate(-1)}>\r\n              <Icon name=\"arrow left\" />\r\n            </Button>\r\n          </Grid.Column>\r\n          <Grid.Column width={8}>\r\n            <Input\r\n              fluid\r\n              type=\"date\"\r\n              value={filterDate}\r\n              onChange={(e) => setFilterDate(e.target.value)}\r\n            />\r\n          </Grid.Column>\r\n          <Grid.Column width={4}>\r\n            <Button size=\"small\" onClick={() => handleFilterDate(1)}>\r\n              <Icon name=\"arrow right\" />\r\n            </Button>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n\r\n      {/* <Menu secondary widths={3}>\r\n        <Menu.Item>\r\n          <Button onClick={() => handleFilterDate(-1)}>\r\n            <Icon name=\"arrow left\" />\r\n          </Button>\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n          <Input\r\n            size=\"small\"\r\n            fluid\r\n            type=\"date\"\r\n            value={filterDate}\r\n            onChange={(e) => setFilterDate(e.target.value)}\r\n          />\r\n        </Menu.Item>\r\n        <Menu.Item position=\"left\">\r\n          <Button onClick={() => handleFilterDate(1)}>\r\n            <Icon name=\"arrow right\" />\r\n          </Button>\r\n        </Menu.Item>\r\n      </Menu> */}\r\n\r\n      {/* <Button onClick={() => handleFilterDate(-1)}>\r\n        <Icon name=\"arrow left\" />\r\n      </Button>\r\n      <Input\r\n        type=\"date\"\r\n        value={filterDate}\r\n        onChange={(e) => setFilterDate(e.target.value)}\r\n      />\r\n      <Button onClick={() => handleFilterDate(1)}>\r\n        <Icon name=\"arrow right\" />\r\n      </Button> */}\r\n    </>\r\n  );\r\n}\r\n","import ItemList from './components/ItemList';\r\nimport EditForm from './components/EditForm';\r\nimport Accounts from './components/Accounts';\r\nimport Query from './components/Query';\r\nimport DateFilter from './components/DateFilter';\r\nimport { useState, useEffect } from 'react';\r\nimport { db, auth } from '../../utils/firebase';\r\nimport {\r\n  Button,\r\n  Grid,\r\n  Header,\r\n  Statistic,\r\n  Input,\r\n  Divider,\r\n} from 'semantic-ui-react';\r\n\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst Balances = () => {\r\n  const { currentUser, logout } = useAuth();\r\n\r\n  // 顯示 Modal\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // 資料陣列\r\n  const [rows, setRows] = useState([]);\r\n\r\n  // 提供給篩選用的資料陣列,才不會因為篩選變動了原陣列\r\n  const [rowsCopy, setRowsCopy] = useState([]);\r\n\r\n  // 帳戶資料\r\n  const [rowsAccount, setRowsAccount] = useState([]);\r\n\r\n  const [activeAccount, setActiveAccount] = useState();\r\n\r\n  const defalutItem = {\r\n    date: new Date().toISOString().slice(0, 10),\r\n    title: '',\r\n    amt: '',\r\n  };\r\n\r\n  // 單筆資料\r\n  const [item, setItem] = useState(defalutItem);\r\n\r\n  // 點選時編輯時,複製一份單筆資料,做為儲存時計算帳戶餘額之用\r\n  const [itemCopy, setItemCopy] = useState(defalutItem);\r\n\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n\r\n  // 收支判斷\r\n  const [isIncome, setIsIncome] = useState(false);\r\n\r\n  // 收支判斷(在更新時,有可能收支互換,用此作用判斷以便更新帳戶餘額)\r\n  // 在 ItemList row click 事件設定\r\n  // 在 EditForm save 時,用來判斷\r\n  const [isIncomeOrigin, setIsIncomeOrigin] = useState(false);\r\n\r\n  // 類別下拉\r\n  const [cate, setCate] = useState();\r\n  const [cates, setCates] = useState([]);\r\n\r\n  // 帳戶下拉\r\n  const [account, setAccount] = useState();\r\n  const [accounts, setAccounts] = useState([]);\r\n\r\n  const [type, setType] = useState();\r\n\r\n  // 日期篩選條件值\r\n  const [filterDate, setFilterDate] = useState(\r\n    new Date().toISOString().slice(0, 10)\r\n  );\r\n\r\n  useEffect(() => {\r\n    // axios.get('http://192.168.0.12:9000/balances').then(res=>{\r\n    //   setRows(res.data)\r\n    // })\r\n\r\n    // 類別資料\r\n    let colCates = db.collection('cates').orderBy('prior');\r\n    // let colCates = db.collection('cates');\r\n    if (currentUser) colCates = colCates.where('user', '==', currentUser.email);\r\n\r\n    colCates = colCates.get().then((snapshot) => {\r\n      const rows = snapshot.docs.map((doc) => {\r\n        const d = doc.data();\r\n        return { text: d.name, value: d.name, key: doc.id };\r\n      });\r\n      setCates(rows);\r\n    });\r\n\r\n    // 帳戶資料\r\n    db.collection('accounts')\r\n      .where('user', '==', currentUser.email)\r\n      .orderBy('prior')\r\n      // .limit(4)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          // console.log(doc.data().name);\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n\r\n        const options = snapshot.docs.map((doc) => {\r\n          const d = doc.data();\r\n          return { text: d.name, value: d.name, key: doc.id };\r\n        });\r\n\r\n        setAccounts(options)\r\n\r\n        // 帳戶預設值\r\n        setActiveAccount(data[0]);\r\n        setRowsAccount(data);\r\n\r\n        fetchBalancesData(data[0]);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchBalancesData(activeAccount);\r\n  }, [filterDate]);\r\n\r\n  const fetchBalancesData = (account) => {\r\n    let dbCol = db.collection('balances');\r\n    if (currentUser) dbCol = dbCol.where('user', '==', currentUser?.email);\r\n    // 收支資料(一次顯示一天資料)\r\n    dbCol\r\n      .where('date', '==', filterDate)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data2 = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n\r\n        setRowsCopy(data2);\r\n        setRows(\r\n          data2.filter(\r\n            (row) => row.account && row.account.name == account?.name\r\n          )\r\n        );\r\n      });\r\n  };\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n    setItem(defalutItem);\r\n    setEditedIndex(-1);\r\n  };\r\n\r\n  const handleAccountClick = (account) => {\r\n    // 設定作用中帳戶\r\n    setActiveAccount(account);\r\n    setRows(\r\n      rowsCopy.filter((row) => row.account && row.account.name == account.name)\r\n    );\r\n  };\r\n\r\n  function addDays(date, days) {\r\n    var result = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n\r\n  const handleFilterDate = (days) => {\r\n    const newDate = addDays(filterDate, days).toISOString().slice(0, 10);\r\n    setFilterDate(newDate);\r\n    // console.log(newDate);\r\n  };\r\n\r\n  // const handleFilterDateMinus = () => {\r\n  //   const newDate = addDays(filterDate, -1).toISOString().slice(0, 10);\r\n  //   setFilterDate(newDate);\r\n  //   console.log(newDate);\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      {/* <pre>{JSON.stringify(itemCopy)}</pre> */}\r\n\r\n      {/* {JSON.stringify(activeAccount?.balance)} */}\r\n\r\n      <Grid>\r\n        <Grid.Row>\r\n          <Grid.Column>\r\n            <Accounts\r\n              rows={rowsAccount}\r\n              activeAccount={activeAccount}\r\n              accountClick={handleAccountClick}\r\n            />\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n\r\n      {activeAccount && (\r\n        <Grid columns={2}>\r\n          <Grid.Row>\r\n            <Grid.Column>\r\n              {/* <Header>{rows.length}</Header> */}\r\n\r\n              <Statistic horizontal>\r\n                <Statistic.Value>{activeAccount?.balance}</Statistic.Value>\r\n              </Statistic>\r\n            </Grid.Column>\r\n            <Grid.Column verticalAlign=\"middle\">\r\n              <Button onClick={handleOpen} floated=\"right\" color=\"yellow\">\r\n                ADD\r\n              </Button>\r\n            </Grid.Column>\r\n          </Grid.Row>\r\n        </Grid>\r\n      )}\r\n      <Divider />\r\n      {/* <br></br> */}\r\n      <DateFilter\r\n        filterDate={filterDate}\r\n        setFilterDate={setFilterDate}\r\n        handleFilterDate={handleFilterDate}\r\n      />\r\n\r\n      <Grid>\r\n        <Grid.Row>\r\n          <Grid.Column>\r\n            <ItemList\r\n              setType={setType}\r\n              setAccount={setAccount}\r\n              setCate={setCate}\r\n              cates={cates}\r\n              setOpen={setOpen}\r\n              rows={rows}\r\n              rowsCopy={rowsCopy}\r\n              setRows={setRows}\r\n              item={item}\r\n              setItem={setItem}\r\n              setItemCopy={setItemCopy}\r\n              isIncome={isIncome}\r\n              setIsIncome={setIsIncome}\r\n              isIncomeOrigin={isIncomeOrigin}\r\n              setIsIncomeOrigin={setIsIncomeOrigin}\r\n              setEditedIndex={setEditedIndex}\r\n              activeAccount={activeAccount}\r\n            />\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n\r\n      {/* {JSON.stringify(item)} */}\r\n      <EditForm\r\n        type={type}\r\n        setType={setType}\r\n        cates={cates}\r\n        cate={cate}\r\n        setCate={setCate}\r\n\r\n        account={account}\r\n        accounts={accounts}\r\n        setAccount={setAccount}\r\n\r\n        isIncomeOrigin={isIncomeOrigin}\r\n        setIsIncome={setIsIncome}\r\n        isIncome={isIncome}\r\n        defalutItem={defalutItem}\r\n        rows={rows}\r\n        setRows={setRows}\r\n        setRowsCopy={setRowsCopy}\r\n        rowsCopy={rowsCopy}\r\n        rowsAccount={rowsAccount}\r\n        setRowsAccount={setRowsAccount}\r\n        item={item}\r\n        setItem={setItem}\r\n        editedIndex={editedIndex}\r\n        setEditedIndex={setEditedIndex}\r\n        open={open}\r\n        setOpen={setOpen}\r\n        setActiveAccount={setActiveAccount}\r\n        activeAccount={activeAccount}\r\n        itemCopy={itemCopy}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Balances;\r\n","import { useHistory, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../../../contexts/AuthContext';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { db } from '../../../utils/firebase';\r\n\r\nimport { Form, Button } from 'semantic-ui-react';\r\n\r\nexport default function EditCate() {\r\n\r\n  const { currentUser } = useAuth();\r\n  const history = useHistory();\r\n  const { id } = useParams();\r\n\r\n  const defalutItem = {\r\n    name: '',\r\n    prior: '',\r\n  };\r\n\r\n  const [item, setItem] = useState(defalutItem);\r\n\r\n  useEffect(() => {\r\n    // if(!id){\r\n    //   console.log('abc');\r\n    //   return;\r\n    // }\r\n    var docRef = db.collection('cates').doc(id);\r\n\r\n    docRef\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists) {\r\n          setItem(doc.data());\r\n          console.log('Document data:', doc.data());\r\n        } else {\r\n          // doc.data() will be undefined in this case\r\n          console.log('No such document!');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error getting document:', error);\r\n      });\r\n  }, []);\r\n\r\n  // 表單輸入時,設定 item 的值\r\n  const handleChange = (e) => {\r\n    setItem({ ...item, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (id) {\r\n      // 將順序從文字轉成數字,排序看起來才會正常\r\n      var docRef = db.collection('cates').doc(id);\r\n      docRef.update({ ...item, prior: Number(item.prior) }).then(() => {\r\n        history.push('/cates');\r\n      });\r\n    } else {\r\n      db.collection('cates')\r\n        .add({ ...item, prior: Number(item.prior),user:currentUser.email })\r\n        .then(() => {\r\n          history.push('/cates');\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    // if(contactId)\r\n    // await ContactService.DeleteContact(item.id)\r\n    // history.push('/contacts')\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form onSubmit={handleSave}>\r\n        <Form.Field>\r\n          <label>名稱</label>\r\n          <input\r\n            name=\"name\"\r\n            placeholder=\"\"\r\n            value={item.name}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <label>順序</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"prior\"\r\n            placeholder=\"\"\r\n            value={item.prior}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n\r\n        <Button type=\"submit\" primary>\r\n          Save\r\n        </Button>\r\n      </Form>\r\n      {/* <div>{JSON.stringify(item)}</div> */}\r\n    </>\r\n\r\n    // <div>{id}</div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Button, Table, Modal, Form, Input } from 'semantic-ui-react';\r\nimport { db } from '../utils/firebase';\r\nexport default function AutoTable(props) {\r\n  const defalutItem = props.defalutItem;\r\n  const schema = props.schema;\r\n  // const data = props.data;\r\n  // 資料陣列\r\n  const [itemList, setItemList] = React.useState([]);\r\n  // 資料列\r\n  const [item, setItem] = React.useState(defalutItem);\r\n  // 編輯列索引\r\n  const [editedIndex, setEditedIndex] = React.useState(-1);\r\n  // Modal\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const dbCol = db.collection(props.collectionName);\r\n\r\n  React.useEffect(() => {\r\n    dbCol.get().then((snapshot) => {\r\n      const rows = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n      setItemList(rows);\r\n    });\r\n  }, []);\r\n\r\n  // CRUD\r\n  function handleEdit(obj) {\r\n    setOpen(true);\r\n    // 點選編輯列的索引,用來修改後,把值傳回該列\r\n    setEditedIndex(itemList.indexOf(obj));\r\n    setItem(obj);\r\n  }\r\n\r\n  function handleUpdate() {\r\n    // 新增\r\n    if (editedIndex == -1) {\r\n      const row = { ...item, id: Date.now() };\r\n      dbCol.add(row);\r\n      setItemList([...itemList, row]);\r\n    }\r\n    // 更新\r\n    else {\r\n      dbCol.doc(item.id).update(item);\r\n\r\n      // 複製一份原資料陣列\r\n      const data = itemList.slice();\r\n      // 將編輯列的資料寫入\r\n\r\n      Object.assign(data[editedIndex], item);\r\n      // 設定更改後的資料陣列給原陣列\r\n      setItemList(data);\r\n      setEditedIndex(-1);\r\n    }\r\n\r\n    // 新增或更新完將表單輸入項的值清空\r\n    setItem(defalutItem);\r\n    setOpen(false);\r\n  }\r\n\r\n  function handleDelete() {\r\n    if (!confirm('確定刪除嗎?')) return;\r\n\r\n    dbCol.doc(item.id).delete();\r\n    const data = itemList.filter((obj) => obj.id !== item.id);\r\n    setItemList(data);\r\n    setOpen(false);\r\n  }\r\n\r\n  \r\n  return (\r\n    <>\r\n      {/* <pre>{JSON.stringify(item)}</pre> */}\r\n      {/* <pre>{editedIndex}</pre> */}\r\n      <Modal open={open} closeIcon onClose={() => setOpen(false)}>\r\n        <Modal.Header>編輯表單</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            {/* 表單 */}\r\n            {schema.map((obj, i) => {\r\n              return (\r\n                <Form.Field key={i}>\r\n                  <label>{obj.text}</label>\r\n                  <Input\r\n                    placeholder={obj.text}\r\n                    name={obj.name}\r\n                    value={item[obj.name]}\r\n                    type={obj.type}\r\n                    onChange={(e) => {\r\n                      setItem({ ...item, [e.target.name]: e.target.value });\r\n                    }}\r\n                  />\r\n                </Form.Field>\r\n              );\r\n            })}\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <button className=\"ui button blue\" onClick={handleUpdate}>\r\n            儲存\r\n          </button>\r\n          {editedIndex !== -1 && (\r\n            <button\r\n              className=\"ui button red left floated\"\r\n              onClick={handleDelete}\r\n            >\r\n              刪除\r\n            </button>\r\n          )}\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      <button\r\n        className=\"ui button\"\r\n        onClick={() => {\r\n          setOpen(true);\r\n          setItem(defalutItem);\r\n          setEditedIndex(-1);\r\n        }}\r\n      >\r\n        新增\r\n      </button>\r\n\r\n      <MyTable edit={handleEdit} schema={schema} rows={itemList} dataRow={props.dataRow}  />\r\n    </>\r\n  );\r\n}\r\n\r\nclass MyTable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Table unstackable>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              {/* 標題列 */}\r\n              {this.props.schema.map((header, i) => {\r\n                return (\r\n                  <Table.HeaderCell key={i}>{header.text}</Table.HeaderCell>\r\n                );\r\n              })}\r\n              <Table.HeaderCell>#</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n          <Table.Body>\r\n            {/* 資料列 */}\r\n            {this.props.rows.map((row, i) => {\r\n              return (\r\n                <tr key={i}>\r\n                  {/* 資料欄(自訂或預設) */}\r\n                  {this.props.dataRow\r\n                    ? this.props.dataRow\r\n                    : this.props.schema.map((obj, i) => {\r\n                        return <td key={i}>{row[obj.name]}</td>;\r\n                      })}\r\n\r\n                  <td onClick={() => this.props.edit(row)}>\r\n                    <a href=\"#\">編輯</a>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </Table.Body>\r\n        </Table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import AutoTableFirebase from '../components/AutoTableFirebase';\r\nexport default function Stocks() {\r\n  const schema = [\r\n    { name: 'name', text: '名稱', type: 'text' },\r\n    { name: 'qty', text: '股數', type: 'number' },\r\n    { name: 'price', text: '現價', type: 'number' },\r\n    { name: 'cost', text: '成本', type: 'number' }\r\n  ];\r\n  const defalutItem = {\r\n    name:'',\r\n    qty:'',\r\n    price:'',\r\n    cost:''\r\n  }\r\n\r\n  // 自訂資料欄\r\n  let dataRow = schema.map((obj, i) => {\r\n    return <td key={i}>A</td>;    \r\n  })\r\n  // console.log(dataRow)\r\n  // dataRow=[...dataRow]\r\n  const collectionName = 'stocks'\r\n  return <AutoTableFirebase schema={schema} defalutItem={defalutItem}\r\n  collectionName={collectionName} \r\n  />;\r\n}\r\n","import React from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\n\r\nexport default function Trans({ rows, onChange, value, text }) {\r\n  const friendOptions = [\r\n    {\r\n      key: 'Jenny Hess',\r\n      text: 'Jenny Hess',\r\n      value: 'Jenny Hess',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Dropdown\r\n      value={value}\r\n      fluid\r\n      placeholder={text}\r\n      selection\r\n      options={rows}\r\n      onChange={onChange}\r\n    ></Dropdown>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Label,\r\n  Input,\r\n  Icon,\r\n  Button,\r\n  Header,\r\n  Modal,\r\n  List,\r\n} from 'semantic-ui-react';\r\nimport Trans from './Trans';\r\nimport './index.css';\r\nimport { db } from '../../utils/firebase';\r\n\r\nexport default function TransList({ options, user }) {\r\n  // 帳戶 id\r\n  const [from, setFrom] = useState();\r\n  // 帳戶名稱\r\n  const [fromAcc, setFromAcc] = useState();\r\n  const [amount, setAmount] = useState('');\r\n  const [to, setTo] = useState();\r\n  const [toAcc, setToAcc] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  // 備註\r\n  const [note, setNote] = useState('');\r\n\r\n  function handleClick() {\r\n    // 取得帳戶餘額\r\n    db.collection('accounts')\r\n      .doc(from)\r\n      .get()\r\n      .then((doc) => {\r\n        // 更新帳戶餘額\r\n        db.collection('accounts')\r\n          .doc(from)\r\n          .update({ balance: Number(doc.data().balance) - amount });\r\n\r\n        // console.log(new Date().toISOString().slice(0, 10));\r\n        // 新增收支\r\n        db.collection('balances').add({\r\n          account: doc.data(),\r\n          cate: '',\r\n          date: new Date().toISOString().slice(0, 10),\r\n          expense: amount,\r\n          title: `[${toAcc}] ${note}`,\r\n          user: user,\r\n          type: '轉帳',\r\n        });\r\n      });\r\n\r\n    // 取得帳戶餘額\r\n    db.collection('accounts')\r\n      .doc(to)\r\n      .get()\r\n      .then((doc) => {\r\n        // 更新帳戶餘額\r\n        db.collection('accounts')\r\n          .doc(to)\r\n          .update({ balance: Number(doc.data().balance) + Number(amount) })\r\n          .then(() => {\r\n            // console.log(amount);\r\n          });\r\n\r\n        // 新增收支\r\n        db.collection('balances').add({\r\n          account: doc.data(),\r\n          cate: '',\r\n          date: new Date().toISOString().slice(0, 10),\r\n          income: amount,\r\n          title: `[${fromAcc}] ${note}`,\r\n          user: user,\r\n          type: '轉帳',\r\n        });\r\n      });\r\n\r\n    setOpen(true);\r\n  }\r\n\r\n  function onFromChange(e, obj) {\r\n    // 設定下拉值\r\n    setFrom(obj.value);\r\n\r\n    // 帳戶名稱\r\n    const accName = obj.options.filter((option) => option.key == obj.value)[0]\r\n      .text;\r\n    setFromAcc(accName);\r\n    // 依下拉值設定該帳戶資料\r\n    // const acc = rows.filter((row) => row.name == obj.value);\r\n    // setFromAcc(acc[0]);\r\n  }\r\n\r\n  function onToChange(e, obj) {\r\n    setTo(obj.value);\r\n\r\n    // 帳戶名稱\r\n    const accName = obj.options.filter((option) => option.key == obj.value)[0]\r\n      .text;\r\n    setToAcc(accName);\r\n  }\r\n\r\n  function handleModalClose() {\r\n    setAmount('');\r\n    setFrom('');\r\n    setTo('');\r\n    setOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        // closeIcon\r\n        open={open}\r\n        // onClose={() => setOpen(false)}\r\n        onOpen={() => setOpen(true)}\r\n      >\r\n        <Header icon=\"archive\" content=\"轉帳成功 !\" />\r\n        <Modal.Content>\r\n          <div>\r\n            <Label basic color=\"teal\" size=\"large\">\r\n              {fromAcc}\r\n            </Label>\r\n            <Icon name=\"arrow right\" />\r\n            <Label size=\"large\" color=\"teal\">\r\n              ${amount}\r\n            </Label>{' '}\r\n            <Icon name=\"arrow right\" />{' '}\r\n            <Label basic color=\"teal\" size=\"large\">\r\n              {toAcc}\r\n            </Label>{' '}\r\n          </div>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color=\"green\" onClick={handleModalClose}>\r\n            <Icon name=\"checkmark\" /> 關閉\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      <div className=\"trans-container\">\r\n        <div className=\"trans-card\">\r\n          <div className=\"header\">轉帳作業</div>\r\n          <div className=\"acc\">\r\n            <Trans\r\n              text=\"轉出帳戶\"\r\n              rows={options}\r\n              onChange={onFromChange}\r\n              value={from}\r\n            />\r\n          </div>\r\n          <div className=\"acc\">\r\n            <Input\r\n              value={amount}\r\n              type=\"number\"\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              label=\"$\"\r\n              fluid\r\n              placeholder=\"轉帳金額\"\r\n            />\r\n          </div>\r\n          <div className=\"acc\">\r\n            <Trans\r\n              text=\"轉入帳戶\"\r\n              rows={options}\r\n              onChange={onToChange}\r\n              value={to}\r\n            />\r\n          </div>\r\n          <div className=\"acc\">\r\n            <Input\r\n              value={note}\r\n              type=\"text\"\r\n              onChange={(e) => setNote(e.target.value)}\r\n              fluid\r\n              placeholder=\"備註\"\r\n            />\r\n          </div>\r\n          <div className=\"acc footer\">\r\n            <Button fluid color=\"teal\" onClick={handleClick}>\r\n              確定\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n\r\n    // <Trans rows={rows} />\r\n    // <Input placeholder=\"$ 轉帳金額\" />\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { db } from '../../utils/firebase';\r\nimport TransList from './TransList';\r\nimport './index.css';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nexport default function Index() {\r\n  // accounts 帳戶資料\r\n  // {\r\n  //   \"name\": \"一卡通\",\r\n  //   \"balance\": 0,\r\n  //   \"prior\": 6,\r\n  //   \"user\": \"dada@gmail.com\",\r\n  //   \"id\": \"4NV13sCkLhIhxX1EfXZF\"\r\n  // }\r\n\r\n  const { currentUser } = useAuth();\r\n  const [rows, setRows] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.clear();\r\n\r\n    db.collection('accounts')\r\n      .where('user', '==', currentUser.email)\r\n      .orderBy('prior')\r\n      // .limit(1)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n\r\n        // setRows(data);\r\n\r\n        const items = snapshot.docs.map((doc) => {\r\n          const item = doc.data();\r\n          return {\r\n            key: doc.id,\r\n            text: item.name,\r\n            value: doc.id,\r\n          };\r\n        });\r\n\r\n        setOptions(items);\r\n      });\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <TransList options={options} user={currentUser?.email} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n// import uuid from 'uuid';\r\n\r\nexport const BookContext = createContext();\r\n\r\nconst BookContextProvider = (props) => {\r\n  // 資料陣列\r\n  const [books, setBooks] = useState([\r\n    fetch('https://jsonplaceholder.typicode.com/todos/1')\r\n    .then(response => response.json())\r\n    .then(json => console.log(json))\r\n  ]);\r\n\r\n  // 資料列預設值\r\n  const defalutItem = {\r\n    title: '',\r\n    author: '',\r\n  };\r\n  // 編輯列\r\n  const [editedBook, setEditedBook] = useState(defalutItem);\r\n  // 編輯列索引\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n  // 視窗開關\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // 開啟編輯視窗\r\n  const openForm = () => {\r\n    setEditedIndex(-1);\r\n    setEditedBook(defalutItem);\r\n    setOpen(true);\r\n  };\r\n\r\n  // 刪除列\r\n  const removeBook = (id) => {\r\n    setBooks(books.filter((book) => book.id !== id));\r\n  };\r\n\r\n  // 按下表格的編輯列\r\n  const editBook = (book) => {\r\n    setEditedBook(book);\r\n    setEditedIndex(books.indexOf(book));\r\n    setOpen(true);\r\n  };\r\n\r\n  // 表單輸入時 onChange\r\n  const updateBook = (book) => {\r\n    setEditedBook(book);\r\n  };\r\n\r\n  // 儲存資料\r\n  const saveBook = (book) => {\r\n    // 新增或修改\r\n    if (editedIndex == -1) {\r\n      setBooks([...books, { ...book, id: Date.now() }]);\r\n    } else {\r\n      const data = books.slice();\r\n      Object.assign(data[editedIndex], book);\r\n      setBooks(data);\r\n    }\r\n    // 預設值\r\n    setEditedBook(defalutItem);\r\n    setEditedIndex(-1);\r\n    // 視窗關閉\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <BookContext.Provider\r\n      value={{\r\n        books,\r\n        editedBook,\r\n        open,\r\n        removeBook,\r\n        editBook,\r\n        updateBook,\r\n        saveBook,\r\n        openForm,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </BookContext.Provider>\r\n  );\r\n};\r\n\r\nexport default BookContextProvider;\r\n","import React, { createContext, useState, useEffect } from 'react';\r\nimport { db } from '../utils/firebase';\r\n\r\nexport const FirebaseBookContext = createContext();\r\n\r\nconst FirebaseBookContextProvider = (props) => {\r\n  const dbCol = db.collection(props.collectionName)\r\n  useEffect(() => {\r\n    dbCol\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        setBooks(data);\r\n      });\r\n  }, []);\r\n\r\n  // 資料陣列\r\n  const [books, setBooks] = useState([]);\r\n\r\n  // 資料列預設值\r\n  const defalutItem = {\r\n    name: '',\r\n    price: '',\r\n  };\r\n  // 編輯列\r\n  const [editedBook, setEditedBook] = useState(defalutItem);\r\n  // 編輯列索引\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n  // 視窗開關\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // 開啟編輯視窗\r\n  const openForm = () => {\r\n    setEditedIndex(-1);\r\n    setEditedBook(defalutItem);\r\n    setOpen(true);\r\n  };\r\n\r\n  // 關閉編輯視窗\r\n  const closeForm = () => {\r\n    setEditedIndex(-1);\r\n    setEditedBook(defalutItem);\r\n    setOpen(false);\r\n  };\r\n\r\n  // 刪除列\r\n  const removeBook = (id) => {\r\n    dbCol.doc(id).delete()\r\n    setBooks(books.filter((book) => book.id !== id));\r\n  };\r\n\r\n  // 按下表格的編輯列\r\n  const editBook = (book) => {\r\n    setEditedBook(book);\r\n    setEditedIndex(books.indexOf(book));\r\n    setOpen(true);\r\n  };\r\n\r\n  // 表單輸入時 onChange\r\n  const updateBook = (book) => {\r\n    setEditedBook(book);\r\n  };\r\n\r\n  // 儲存資料\r\n  const saveBook = (book) => {\r\n    // 新增或修改\r\n    if (editedIndex == -1) {\r\n      // const row = { ...book, id: Date.now() }\r\n      dbCol.add(book).then((doc)=>{\r\n        setBooks([...books, { ...book, id: doc.id } ]);\r\n      })\r\n      \r\n    } else {\r\n      dbCol.doc(book.id).update(book)\r\n      const data = books.slice();\r\n      Object.assign(data[editedIndex], book);\r\n      setBooks(data);\r\n    }\r\n    // 預設值\r\n    setEditedBook(defalutItem);\r\n    setEditedIndex(-1);\r\n    // 視窗關閉\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <FirebaseBookContext.Provider\r\n      value={{\r\n        books,\r\n        editedBook,\r\n        open,\r\n        removeBook,\r\n        editBook,\r\n        updateBook,\r\n        saveBook,\r\n        openForm,\r\n        closeForm\r\n      }}\r\n    >\r\n      {props.children}\r\n    </FirebaseBookContext.Provider>\r\n  );\r\n};\r\n\r\nexport default FirebaseBookContextProvider;\r\n","import { useContext } from 'react';\r\n// import { BookContext } from '../contexts/BookContext';\r\nimport { FirebaseBookContext } from '../contexts/FirebaseBookContext';\r\nimport { Table, Header, Button } from 'semantic-ui-react';\r\n\r\nconst BookList = () => {\r\n  const { editBook, books, removeBook, openForm } =\r\n    useContext(FirebaseBookContext);\r\n  const handleOpen = () => {\r\n    // console.log('open');\r\n    openForm();\r\n  };\r\n  return (\r\n    <>\r\n      <Header>{books.length}</Header>\r\n      <Button onClick={handleOpen}>ADD</Button>\r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>書名</Table.HeaderCell>\r\n            <Table.HeaderCell>作者</Table.HeaderCell>            \r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {books.map((book) => {\r\n            return (\r\n              <Table.Row key={book.id}>\r\n                <Table.Cell>{book.title}</Table.Cell>\r\n                <Table.Cell>{book.author}</Table.Cell>               \r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    removeBook(book.id);\r\n                  }}\r\n                >\r\n                  Delete\r\n                </Table.Cell>\r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    editBook(book);\r\n                  }}\r\n                >\r\n                  Edit\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookList;\r\n","import { useContext } from 'react';\r\n// import { BookContext } from '../contexts/BookContext';\r\nimport { FirebaseBookContext } from '../contexts/FirebaseBookContext';\r\nimport { Table, Header, Button } from 'semantic-ui-react';\r\n\r\nconst BookList = () => {\r\n  const { editBook, books, removeBook, openForm } =\r\n    useContext(FirebaseBookContext);\r\n  const handleOpen = () => {\r\n    console.log('open');\r\n    openForm();\r\n  };\r\n  return (\r\n    <>\r\n      <Header>{books.length}</Header>\r\n      <Button onClick={handleOpen}>ADD</Button>\r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>書名</Table.HeaderCell>\r\n            <Table.HeaderCell>作者</Table.HeaderCell>\r\n            <Table.HeaderCell>Qty</Table.HeaderCell>\r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {books.map((book) => {\r\n            return (\r\n              <Table.Row key={book.id}>\r\n                <Table.Cell>{book.name}</Table.Cell>\r\n                <Table.Cell>{book.price}</Table.Cell>\r\n                <Table.Cell>{book.qty}</Table.Cell>\r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    removeBook(book.id);\r\n                  }}\r\n                >\r\n                  Delete\r\n                </Table.Cell>\r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    editBook(book);\r\n                  }}\r\n                >\r\n                  Edit\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookList;\r\n","import { useContext, useState } from 'react';\r\nimport { FirebaseBookContext } from '../contexts/FirebaseBookContext';\r\nimport { Form, Input, Button, Modal } from 'semantic-ui-react';\r\nconst NewBookForm = () => {\r\n  const { editedBook, updateBook, saveBook, open, closeForm } =\r\n    useContext(FirebaseBookContext);\r\n  const [title, setTitle] = useState('');\r\n  const [author, setAuthor] = useState('');\r\n  \r\n\r\n  const handleUpdate = () => {\r\n    updateBook(editedBook, title);\r\n    setTitle('');\r\n    setAuthor('');\r\n  };\r\n\r\n  const handleSave = () => {\r\n    saveBook(editedBook);\r\n    setTitle('');\r\n    setAuthor('');\r\n  };\r\n\r\n  const updateInput = (e) => {\r\n    updateBook({\r\n      ...editedBook,\r\n      [e.target.name]: e.target.value,\r\n    });  \r\n  }\r\n  return (\r\n    <>\r\n      <Modal open={open}\r\n      closeIcon\r\n      onClose={closeForm}\r\n      >\r\n        <Modal.Header>\r\n          編輯\r\n        </Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>Title</label>\r\n              <Input\r\n                placeholder=\"book title\"\r\n                name=\"price\"\r\n                value={editedBook.price}\r\n                // value={editedBook['title']}\r\n                type=\"text\"\r\n                onChange={updateInput}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>Author</label>\r\n              <Input\r\n                placeholder=\"book author\"\r\n                name=\"author\"\r\n                value={editedBook.author}\r\n                type=\"text\"\r\n                onChange={(e) => {\r\n                  updateBook({\r\n                    ...editedBook,\r\n                    [e.target.name]: e.target.value,\r\n                  });                 \r\n                }}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n\r\n          \r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n            <Button onClick={handleSave}>Update</Button>\r\n          </Modal.Actions>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewBookForm;\r\n","import axios from \"axios\";\r\nimport { db } from \"../utils/firebase\";\r\nexport class ContactService {\r\n\r\n  static serverURL = `http://localhost:9000`;\r\n  static getAllContacts() {\r\n    let data = [];\r\n    db.collection('cates').get().then(snapshot=>{\r\n     \r\n      snapshot.docs.map(doc=>{\r\n        data.push({...doc.data()})\r\n        // return {...doc.data(), id:doc.id}\r\n      })\r\n     \r\n    })\r\n    return data;     \r\n    \r\n    // return ['a','b']\r\n    // return axios.get(`${this.serverURL}/money`)\r\n  }\r\n  \r\n}","import { ContactService } from '../../services/ContactService';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst ContactList = () => {\r\n  const [state, setState] = useState({\r\n    loading: false,\r\n    contacts: [],\r\n    errorMessage: '',\r\n  });\r\n  useEffect( () => {\r\n    setState({ ...state, loading: false });\r\n    const response =  ContactService.getAllContacts();\r\n    setState({ ...state, loading: false, contacts: response });\r\n    console.log(response);\r\n  }, []);\r\n\r\n  const { contacts } = state;\r\n  return <pre>{JSON.stringify(contacts)}</pre>;\r\n};\r\n\r\nexport default ContactList;\r\n","// import React, { useContext } from 'react';\r\nimport BookContextProvider from '../contexts/BookContext';\r\nimport BookList from '../components/BookList';\r\nimport StockList from '../components/StockList';\r\nimport FirebaseBookContextProvider from '../contexts/FirebaseBookContext';\r\n\r\nimport NewBookForm from './BookForm';\r\n\r\nimport FakeData from './FakeData';\r\nimport ContactList from './contacts/ContactList';\r\n// import  from '../contexts/BookContext';\r\n\r\nconst Books = () => {\r\n  return (\r\n    <>\r\n      {/* <FakeData /> */}\r\n      <ContactList/>\r\n      <FirebaseBookContextProvider collectionName=\"stocks\">\r\n        <NewBookForm />\r\n        <StockList />\r\n      </FirebaseBookContextProvider>\r\n      <FirebaseBookContextProvider collectionName=\"books\">\r\n        <NewBookForm />\r\n        <BookList />\r\n      </FirebaseBookContextProvider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Books;\r\n","import axios from \"axios\"\r\nimport { db } from \"../../utils/firebase\"\r\n// server 資料處理\r\nexport class ContactService {\r\n  static serverURL = \"http://192.168.0.12:9000\"\r\n  \r\n  // \r\n  static getAllContacts() {\r\n    let dataURL=`${this.serverURL}/contacts`\r\n    return axios.get(dataURL)\r\n  }\r\n\r\n  static getContact(contactId) {\r\n    let dataURL=`${this.serverURL}/contacts/${contactId}`\r\n    return axios.get(dataURL)\r\n  }\r\n\r\n  static AddContact(contact) {\r\n    let dataURL=`${this.serverURL}/contacts`\r\n    return axios.post(dataURL,contact)\r\n  }\r\n\r\n  static UpdateContact(contact) {\r\n    let dataURL=`${this.serverURL}/contacts/${contact.id}`\r\n    return axios.put(dataURL,contact)\r\n  }\r\n\r\n  static DeleteContact(contactId) {\r\n    let dataURL=`${this.serverURL}/contacts/${contactId}`\r\n    return axios.delete(dataURL)\r\n  }\r\n\r\n  // static getAllCates() {\r\n  //   return db.collection('cates').get()\r\n  // }\r\n}","export default __webpack_public_path__ + \"static/media/spin.0d8837f6.gif\";","import spinImg from '../img/spin.gif'\r\n\r\nexport default function Spinner() {\r\n  return (\r\n<div className=\"ui basic segment\">\r\n<img src={spinImg} className=\"ui centered medium image\" style={{width:'100px'}} />\r\n</div>\r\n\r\n    \r\n  )\r\n}","// React Contact Manager App\r\n// https://www.youtube.com/watch?v=ZfqnUm7w6ig&t=5031\r\n// 搭配 json server\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { ContactService } from './ContactService';\r\nimport { Table, Button } from 'semantic-ui-react';\r\nimport Spinner from '../../components/Spinner';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ContactList = () => {\r\n  let [state, setState] = useState({\r\n    loading: false,\r\n    contacts: [],\r\n  });\r\n\r\n  // useEffect(async () => {\r\n  //   let response = await ContactService.getAllCates().then((snapshot) => {\r\n  //     const data = snapshot.docs.map((doc) => {\r\n  //       console.log(snapshot.size);\r\n  //       return doc.data();\r\n  //     });\r\n  //     setState({ ...state, contacts: data });\r\n  //   });\r\n  // }, []);\r\n\r\n  // axios 有不同寫法\r\n  useEffect(async () => {\r\n    setState({ ...state, loading: true });\r\n    let response = await axios.get('http://192.168.0.12:9000/contacts');\r\n    setState({ ...state, loading: false, contacts: response.data });\r\n    //   setTimeout(function(){\r\n\r\n    // },1000);\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   axios.get('http://192.168.0.12:9000/contacts').then((response) => {\r\n  //     setState({ ...state, contacts: response.data });\r\n  //   });\r\n  // }, []);\r\n\r\n  // useEffect(async () => {\r\n  //   let response = await ContactService.getAllContacts();\r\n  //   setState({ ...state, contacts: response.data });\r\n  // }, []);\r\n\r\n  const { contacts, loading } = state;\r\n  return (\r\n    <>\r\n      {/* <pre>{JSON.stringify(state.contacts)}</pre> */}\r\n      {loading ? (\r\n        <Spinner />\r\n      ) : (\r\n        <>\r\n          <Button><Link to={'/contacts/add'}>ADD</Link></Button>\r\n          <Table unstackable>\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>名稱</Table.HeaderCell>\r\n                <Table.HeaderCell>金額</Table.HeaderCell>\r\n                <Table.HeaderCell>#</Table.HeaderCell>\r\n                <Table.HeaderCell>#</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n              {contacts.map((item) => {\r\n                return (\r\n                  <Table.Row key={item.id}>\r\n                    <Table.Cell>{item.name}</Table.Cell>\r\n                    <Table.Cell>{item.amt}</Table.Cell>\r\n\r\n                    <Table.Cell                     \r\n                    >\r\n                       <Link to={`/contacts/edit/${item.id}`}>Edit</Link>\r\n                    </Table.Cell>\r\n\r\n                    <Table.Cell>\r\n                      <Link to={`/contacts/view/${item.id}`}>View</Link>\r\n                    </Table.Cell>\r\n                  </Table.Row>\r\n                );\r\n              })}\r\n            </Table.Body>\r\n          </Table>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ContactList;\r\n","import { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { ContactService } from \"./ContactService\";\r\n\r\nexport default function ViewContact() {\r\n  let {contactId} = useParams()\r\n  useEffect(async()=>{\r\n    let response = await ContactService.getContact(contactId);\r\n    console.log(response.data)\r\n  },[])\r\n  return (\r\n    <div>\r\n      {contactId}\r\n    </div>\r\n  );\r\n}","import { Form, Button } from 'semantic-ui-react';\r\nimport { useEffect, useState } from 'react';\r\nimport { ContactService } from './ContactService';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nexport default function AddContact() {\r\n  const history = useHistory()\r\n  const {contactId} = useParams()\r\n  const defalutItem = {\r\n    name: '',\r\n    amt: '',\r\n  };\r\n\r\n  useEffect(async()=>{\r\n    if(!contactId)\r\n    return \r\n    const response = await ContactService.getContact(contactId)\r\n    // console.log(contact)\r\n    setItem(response.data)\r\n  },[])\r\n\r\n  // 單筆資料\r\n  const [item, setItem] = useState(defalutItem);\r\n\r\n  // 表單輸入時,設定 item 的值\r\n  const handleChange = (e) => {\r\n    setItem({ ...item, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if(contactId)\r\n     await ContactService.UpdateContact(item)\r\n    else\r\n     await ContactService.AddContact(item)\r\n    \r\n    history.push('/contacts')\r\n    console.log('save');\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if(contactId)\r\n    await ContactService.DeleteContact(item.id)      \r\n    history.push('/contacts')\r\n   \r\n  };\r\n\r\n  return (\r\n    <>\r\n      {' '}\r\n      <Form onSubmit={handleSave}>\r\n        <Form.Field>\r\n          <label>名稱</label>\r\n          <input\r\n            name=\"name\"\r\n            placeholder=\"\"\r\n            value={item.name}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <label>金額</label>\r\n          <input\r\n            name=\"amt\"\r\n            placeholder=\"\"\r\n            value={item.amt}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n\r\n        <Button type='submit'\r\n          primary          \r\n        >\r\n          Save\r\n        </Button>\r\n\r\n       \r\n      </Form>\r\n\r\n\r\n      <Button \r\n         floated='right'\r\n         onClick={handleDelete}         \r\n        >\r\n          Delete\r\n        </Button>\r\n    </>\r\n  );\r\n}\r\n","import React, { useRef, useState } from 'react';\r\nimport { Form, Button, Card, Segment, Icon } from 'semantic-ui-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nexport default function Login() {\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const { login } = useAuth();\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      setError('');\r\n      setLoading(true);\r\n      await login(emailRef.current.value, passwordRef.current.value);\r\n      history.push('/balances');\r\n    } catch {\r\n      setError('Failed to log in');\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Card fluid>\r\n        <Card.Content textAlign='center' header=\"Money 2022\" />\r\n        <Card.Content >\r\n          <Form size=\"large\" onSubmit={handleSubmit}>\r\n            <Form.Field>\r\n              <label>Email</label>\r\n              <input ref={emailRef} defaultValue=\"mkdodos@gmail.com\"></input>\r\n              {/* <input ref={emailRef} ></input> */}\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>Password</label>\r\n              <input ref={passwordRef} defaultValue=\"123456\"></input>\r\n              {/* <input ref={passwordRef} ></input> */}\r\n            </Form.Field>\r\n            <Button fluid type=\"submit\" size=\"large\" color=\"blue\">\r\n              登入\r\n            </Button>\r\n          </Form>\r\n        </Card.Content>\r\n        <Card.Content extra>\r\n          <Icon name=\"user\" />4 Friends\r\n        </Card.Content>\r\n      </Card>\r\n\r\n      {/* <Segment></Segment> */}\r\n\r\n      {/* <Button\r\n      fluid\r\n        basic\r\n        floated=\"right\"\r\n        onClick={async () => {\r\n          await login('dada@gmail.com', '123456');\r\n          history.push('/balances');\r\n        }}\r\n        size=\"large\"\r\n        color=\"blue\"\r\n      >\r\n        Dada\r\n      </Button> */}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\"\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n  const {currentUser} = useAuth();\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser ? <Component {...props} /> : <Redirect to=\"/login\" />;\r\n      }}\r\n    ></Route>\r\n  );\r\n}\r\n","import {\r\n  Container,\r\n  Grid,\r\n  Segment,\r\n  Statistic,\r\n  Dropdown,\r\n  Menu,\r\n  Button,\r\n} from 'semantic-ui-react';\r\nimport React from 'react';\r\nfunction MonthSelect(props) {\r\n  const [month, setMonth] = React.useState();\r\n  const months = [];\r\n\r\n  for (let i = 1; i <= 12; i++) {\r\n    let num = i;\r\n    if (i <= 9) num = '0' + i;\r\n    months.push({\r\n      key: num,\r\n      text: num,\r\n      value: num,\r\n    });\r\n  }\r\n  return (\r\n    <Dropdown\r\n      selection\r\n      value={month}\r\n      placeholder=\"順位\"\r\n      options={months}\r\n      onChange={props.onChange}\r\n    ></Dropdown>\r\n  );\r\n}\r\n\r\nconst yearOptions = [\r\n  { text: 2023, value: 2023, key: 2023 },\r\n  { text: 2022, value: 2022, key: 2022 },\r\n];\r\n\r\nfunction MonthButton(props) {\r\n  return (\r\n    <Menu widths={4}>\r\n      <Menu.Item>\r\n        <Dropdown\r\n          options={yearOptions}\r\n          value={props.year}\r\n          onChange={props.onYearChange}\r\n        />\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Button onClick={props.onMinusClick}>-</Button>\r\n      </Menu.Item>\r\n\r\n      <Menu.Item>\r\n        <Button\r\n          primary\r\n          onDoubleClick={props.onDoubleClick}\r\n          onClick={props.onClick}\r\n        >\r\n          {props.text}\r\n        </Button>\r\n      </Menu.Item>\r\n      <Menu.Item>\r\n        <Button onClick={props.onPlusClick}>+</Button>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default MonthSelect;\r\nexport { MonthButton };\r\n","import { useState, useEffect } from 'react';\r\nimport { db } from '../utils/firebase';\r\nimport { Dropdown, Form } from 'semantic-ui-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport default function AccountDropdown({ account, name, onChange, label }) {\r\n  const { currentUser } = useAuth();\r\n  const [rows, setRows] = useState([]);\r\n\r\n  useEffect(() => {\r\n    db.collection('accounts')\r\n      // .limit(10)\r\n      .where('user', '==', currentUser.email)\r\n      .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { text: doc.data().name, value: doc.data().name, key: doc.id };\r\n        });\r\n        // console.log(data);\r\n        setRows(data);\r\n        // setRowsCopy(data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <Form.Select\r\n      placeholder=\"帳戶\"\r\n      label={label}\r\n      value={account}\r\n      name={name}\r\n      fluid\r\n      options={rows}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n","import { useEffect, useReducer, useState } from 'react';\r\nimport { Table, Segment, Statistic, Label } from 'semantic-ui-react';\r\nimport { db } from '../utils/firebase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport numberFormat from '../utils/numberFormat';\r\nimport _ from 'lodash';\r\nimport { MonthButton } from './MonthSelect';\r\nimport AccountDropdown from './AccountDropdown';\r\n\r\nexport default function Dashboard() {\r\n  const [total, setTotal] = useState(0);\r\n  const { currentUser } = useAuth();\r\n\r\n  function reducer(state, action) {\r\n    switch (action.type) {\r\n      case 'sort':\r\n        // 第二次按下同欄位\r\n        if (state.column === action.column) {\r\n          return {\r\n            ...state,\r\n            data: state.data.slice().reverse(),\r\n            direction:\r\n              state.direction === 'ascending' ? 'descending' : 'ascending',\r\n          };\r\n        }\r\n        // 第一次按下某欄位\r\n        return {\r\n          ...state,\r\n          column: action.column,\r\n          data: _.sortBy(state.data, [action.column]),\r\n          // dataCopy: state.data ,\r\n          direction: 'ascending',\r\n        };\r\n      // 初始化資料,並留一份做為篩選用\r\n      case 'setData':\r\n        return { data: action.data, dataCopy: action.data };\r\n      // 點選日期篩選資料\r\n      case 'filterData':\r\n        return { ...state, data: action.data };\r\n      // 點選合計將資料回復原來\r\n      case 'copyData':\r\n        return { ...state, data: state.dataCopy };\r\n\r\n      default:\r\n        throw new Error();\r\n    }\r\n  }\r\n\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    column: null,\r\n    data: [],\r\n    dataCopy: [],\r\n    direction: null,\r\n  });\r\n\r\n  const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n  const [year, setYear] = useState(new Date().getFullYear());\r\n  const [account, setAccount] = useState('');\r\n\r\n  const { column, data, direction, dataCopy } = state;\r\n  useEffect(() => {\r\n    let mm = '';\r\n    month >= 10 ? (mm = month) : (mm = '0' + month);\r\n    db.collection('balances')\r\n      .where('date', '>=', `${year}-${mm}-01`)\r\n      .where('date', '<=', `${year}-${mm}-31`)\r\n      // .where('date', '>=', `2022-${mm}-01`)\r\n      // .where('date', '<=', `2022-${mm}-31`)\r\n      // .where('date', 'startAt', '2022-07')\r\n      .where('user', '==', currentUser.email)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const rows = snapshot.docs.map((doc) => {\r\n          return {\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            // 將金額字串轉為數字才能正確做排序\r\n            expense: parseInt(doc.data().expense),\r\n          };\r\n        });\r\n\r\n        // 篩選資料\r\n        let filterdData = rows.filter(\r\n          (row) => row.expense > 0 && row.type !== '轉帳'\r\n        );\r\n\r\n        if (account) {\r\n          filterdData = filterdData.filter(\r\n            (row) => row.account.name == account\r\n          );\r\n        }\r\n\r\n        // 合計\r\n        let temp = 0;\r\n        filterdData.map((row) => {\r\n          temp += row.expense * 1;\r\n        });\r\n        setTotal(temp);\r\n\r\n        dispatch({ type: 'setData', data: filterdData, dataCopy: filterdData });\r\n      });\r\n  }, [month, year, account]);\r\n\r\n  function calTotal(arr) {\r\n    let total = 0;\r\n    arr.map((row) => {\r\n      total += row.expense * 1;\r\n    });\r\n\r\n    return total;\r\n  }\r\n\r\n  const handleYearClick = (e) => {\r\n    switch (e.detail) {\r\n      case 1:\r\n        console.log(' click');\r\n        setYear((prev) => {\r\n          return prev - 1;\r\n        });\r\n        break;\r\n      case 2:\r\n        console.log('double click');\r\n        break;\r\n      case 3:\r\n        console.log('triple click');\r\n        break;\r\n    }\r\n  };\r\n\r\n  function handleYearChange(e, { value }) {\r\n    setYear(value);\r\n    console.log(value);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <MonthButton\r\n        text={`${month} 月`}\r\n        year={year}\r\n        onYearChange={handleYearChange}\r\n        // setYear={setYear}\r\n        onYearClick={handleYearClick}\r\n        // onYearDoubleClick={() => setYear(new Date().getFullYear())}\r\n        onPlusClick={() => {\r\n          if (month == 12) setMonth(1);\r\n          else setMonth(month + 1);\r\n        }}\r\n        // 中間按鈕按下切換回當月\r\n        onClick={() => {\r\n          setMonth(new Date().getMonth() + 1);\r\n        }}\r\n        onMinusClick={() => {\r\n          if (month == 1) setMonth(12);\r\n          else setMonth(month - 1);\r\n        }}\r\n      ></MonthButton>\r\n\r\n      <Segment textAlign=\"center\">\r\n        <Statistic\r\n          color=\"blue\"\r\n          onClick={() => {\r\n            // console.log(data)\r\n            console.log(dataCopy);\r\n            dispatch({ type: 'copyData' });\r\n            setTotal(calTotal(dataCopy));\r\n          }}\r\n        >\r\n          <Statistic.Value>{numberFormat(total)}</Statistic.Value>\r\n          {/* <Statistic.Label>blue</Statistic.Label> */}\r\n        </Statistic>\r\n      </Segment>\r\n\r\n      <AccountDropdown onChange={(e, obj) => setAccount(obj.value)} />\r\n\r\n      <Table celled unstackable sortable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell\r\n              width={3}\r\n              // 顯示向上向下箭頭(sorted='ascending' || 'descending')\r\n              sorted={state.column === 'date' ? direction : null}\r\n              onClick={() => {\r\n                dispatch({ type: 'sort', column: 'date' });\r\n              }}\r\n            >\r\n              日期\r\n            </Table.HeaderCell>\r\n            <Table.HeaderCell\r\n              sorted={state.column === 'title' ? direction : null}\r\n              onClick={() => {\r\n                dispatch({ type: 'sort', column: 'title' });\r\n              }}\r\n            >\r\n              項目\r\n            </Table.HeaderCell>\r\n            <Table.HeaderCell\r\n              sorted={state.column === 'expense' ? direction : null}\r\n              onClick={() => {\r\n                dispatch({ type: 'sort', column: 'expense' });                \r\n              }}\r\n            >\r\n              支出\r\n            </Table.HeaderCell>\r\n            {/* <Table.HeaderCell>帳戶</Table.HeaderCell> */}\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {data.map((row) => {\r\n            return (\r\n              <Table.Row key={row.id}>\r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    let temp = data.filter((obj) => obj.date == row.date);\r\n                    dispatch({ type: 'filterData', data: temp });\r\n                    setTotal(calTotal(temp));\r\n                  }}\r\n                >\r\n                  {row.date.slice(5, 10)}\r\n                </Table.Cell>\r\n                <Table.Cell>\r\n                  {row.title ? row.title : <Label>{row.cate}</Label>}\r\n                </Table.Cell>\r\n                <Table.Cell>{row.expense}</Table.Cell>\r\n                {/* <Table.Cell>{row.account.name}</Table.Cell> */}\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {\r\n  Button,\r\n  Input,\r\n  Form,\r\n  Grid,\r\n  Menu,\r\n  Image,\r\n  Label,\r\n  Header,\r\n  Segment,\r\n  Icon,\r\n  Divider,\r\n} from 'semantic-ui-react';\r\n\r\nimport { db } from '../../../utils/firebase';\r\n// import image from '../../../img/image.png';\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function EditForm() {\r\n  const { id } = useParams();\r\n  // const row = rows.filter((row) => row.id == id)[0];\r\n\r\n  const [row, setRow] = useState({});\r\n\r\n  const [price, setPrice] = useState(140);\r\n  const [qty, setQty] = useState(0);\r\n\r\n  const [cart, setCart] = useState([]);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    db.collection('food')\r\n      .doc(id)\r\n      .get()\r\n      .then((doc) => {\r\n        setRow({ ...doc.data(), id });\r\n        // console.log(doc.data());\r\n      });\r\n\r\n    // 購物車\r\n    let cart = localStorage.getItem('cart');\r\n    if (!cart) return;\r\n\r\n    cart = JSON.parse(cart);\r\n    const item = cart.find((item) => item.id == id);\r\n    if (item) setQty(item.qty);\r\n    // console.log(item);\r\n  }, []);\r\n\r\n  // console.log(row);\r\n\r\n  const add = () => {\r\n    setQty((prev) => {\r\n      return prev + 1;\r\n    });\r\n  };\r\n\r\n  const minus = () => {\r\n    setQty((prev) => {\r\n      return prev - 1;\r\n    });\r\n  };\r\n\r\n  const CartAdd = () => {\r\n    // 取出\r\n    let cartData = localStorage.getItem('cart');\r\n    if (cartData) cartData = JSON.parse(cartData);\r\n    else cartData = [];\r\n\r\n    // 判斷購物車中是否已有該品項\r\n    const index = cartData.findIndex((obj) => obj.id == id);\r\n    const item = { ...row, qty };\r\n\r\n    if (index > -1) {\r\n      // 有\r\n      Object.assign(cartData[index], item);\r\n      console.log('yes');\r\n    } else {\r\n      // 無\r\n      cartData.push(item);\r\n      console.log('no');\r\n    }\r\n\r\n    // 加入\r\n    // const item = {prodId:id,qty}\r\n\r\n    // 存入\r\n    const cartStr = JSON.stringify(cartData);\r\n    localStorage.setItem('cart', cartStr);\r\n\r\n    console.log(cartStr);\r\n    history.push('/cart');\r\n  };\r\n\r\n  const viewCart = () => {\r\n    history.push('/cart');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* {id} */}\r\n      <Segment.Group horizontal>\r\n        <Segment>\r\n          <Image src={row.imageUrl} size=\"small\" color=\"pink\" />\r\n          <Header as=\"h3\"> {row.name} </Header>\r\n          <Header as=\"h4\"> ${row.price}</Header>\r\n          <Divider />\r\n          {/* <Header as=\"h4\"> 小計 ${price*qty}</Header> */}\r\n          {/* <Divider /> */}\r\n          <Button circular icon=\"minus\" size=\"small\" onClick={minus} />\r\n          <Button basic>{qty}</Button>\r\n          <Button\r\n            circular\r\n            icon=\"plus\"\r\n            size=\"small\"\r\n            color=\"pink\"\r\n            onClick={add}\r\n          />\r\n          <Button color=\"pink\" floated=\"right\" onClick={CartAdd}>\r\n            加入購物車\r\n          </Button>\r\n        </Segment>\r\n      </Segment.Group>\r\n\r\n      <Button color=\"pink\" fluid onClick={viewCart}>\r\n        查看購物車\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/hamburger.de7c156f.jpg\";","import React from 'react';\r\nimport wire from '../../../img/image.png';\r\nimport ham from '../images/hamburger.jpg';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { Segment, Image, Header, Card, Icon } from 'semantic-ui-react';\r\nexport default function ProdList({rows}) {\r\nconst history = useHistory();\r\n\r\n  \r\n\r\n  const toCart = (id)=>{\r\n    history.push(`prod/${id}`)\r\n    console.log('toc')\r\n  }\r\n  return (\r\n    <div>\r\n      \r\n\r\n      {rows.map((row, index) => {\r\n        return (\r\n          <div key={row.id}>\r\n            {/* {row.image} */}\r\n            {index % 2 == 0 && (\r\n              <Card.Group itemsPerRow={2}>\r\n                <Card onClick={()=>toCart(row.id)}>\r\n                  <Image src={row.imageUrl} style={{margin:'10px'}}  />\r\n                  <Card.Content>\r\n                    <Card.Header>{row.name}</Card.Header>\r\n                    <Card.Description>${row.price}</Card.Description>\r\n                  </Card.Content>\r\n                </Card>\r\n\r\n                {/* 判斷索引未達最大值才顯示 */}\r\n                {index < rows.length - 1 && (\r\n                  <Card onClick={()=>toCart(rows[index+1].id)}>\r\n                    <Image src={rows[index+1].imageUrl}  style={{margin:'10px'}} />\r\n                    <Card.Content>\r\n                      <Card.Header>{rows[index+1].name}</Card.Header>\r\n                      <Card.Description>${rows[index+1].price}</Card.Description>\r\n                    </Card.Content>\r\n                  </Card>\r\n                )}\r\n\r\n                \r\n              </Card.Group>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      \r\n    \r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  List,\r\n  Image,\r\n  Item,\r\n  Input,\r\n  Icon,\r\n  Button,\r\n  Label,\r\n  Placeholder,\r\n} from 'semantic-ui-react';\r\nimport image from '../../../img/image.png';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function Cart() {\r\n  const history = useHistory();\r\n  // 將 localStorage 的資料存在 state\r\n  const [rows, setRows] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  useEffect(() => {\r\n    // localStorage.removeItem('cart');\r\n    let cartData = localStorage.getItem('cart');\r\n    if (!cartData) return;\r\n    cartData = JSON.parse(cartData);\r\n    setRows(cartData);\r\n    const sum = cartData.reduce((a, b) => {\r\n      // return  b.price * b.qty;\r\n      // return a.price * a.qty + b.price * b.qty;\r\n      return a + b.price * b.qty;\r\n      // return a.price * a.qty ;\r\n    },0);\r\n    // console.log(sum)\r\n    setTotal(sum);\r\n    // console.log(cartData);\r\n  }, []);\r\n\r\n  const placeOrder = () => {\r\n    localStorage.removeItem('cart');\r\n    history.push('/food');\r\n    // console.log('order')\r\n  };\r\n\r\n  // 調整數量 + -\r\n  const add = (row) => {\r\n    // 取得該列索引\r\n    let i = rows.indexOf(row);\r\n\r\n    // 將該列數量更新\r\n    row.qty = row.qty + 1;\r\n    let newRows = rows.slice();\r\n    Object.assign(newRows[i], row);\r\n    setRows(newRows);\r\n    localStorage.setItem('cart', JSON.stringify(newRows));\r\n\r\n    const sum = newRows.reduce((a, b) => {\r\n      return a + b.price * b.qty;\r\n    },0);\r\n    setTotal(sum);\r\n  };\r\n\r\n  const minus = (row) => {\r\n    let i = rows.indexOf(row);\r\n    // console.log(i)\r\n\r\n    let newRows = rows.slice();\r\n    row.qty = row.qty - 1;\r\n    Object.assign(newRows[i], row);\r\n    setRows(newRows);\r\n    localStorage.setItem('cart', JSON.stringify(newRows));\r\n\r\n    const sum = newRows.reduce((a, b) => {\r\n      return a + b.price * b.qty;\r\n    },0);\r\n    setTotal(sum);\r\n    // setQty((prev) => {\r\n    //   return prev - 1;\r\n    // });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Item.Group divided unstackable>\r\n        {rows.map((row) => {\r\n          return (\r\n            <Item key={row.id}>\r\n              <Item.Image size=\"mini\" src={row.imageUrl} />\r\n              <Item.Content verticalAlign=\"middle\">\r\n                <Item.Header as=\"a\">\r\n                  {row.name} ${row.price}\r\n                </Item.Header>\r\n                <Item.Description>\r\n                  <Button\r\n                    circular\r\n                    icon=\"minus\"\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      minus(row);\r\n                    }}\r\n                  />\r\n                  <Button basic>{row.qty}</Button>\r\n                  <Button\r\n                    circular\r\n                    icon=\"plus\"\r\n                    size=\"small\"\r\n                    color=\"pink\"\r\n                    onClick={() => {\r\n                      add(row);\r\n                    }}\r\n                  />\r\n\r\n                  {/* <Button icon=\"minus\" circular />\r\n                  <Button basic>{row.qty}</Button>\r\n                  <Button icon=\"plus\" color=\"pink\" circular /> */}\r\n                </Item.Description>\r\n              </Item.Content>\r\n            </Item>\r\n          );\r\n        })}\r\n      </Item.Group>\r\n\r\n      <Button\r\n        fluid\r\n       \r\n        as=\"div\"\r\n        labelPosition=\"left\"\r\n        onClick={placeOrder}\r\n      >\r\n        <Label as=\"a\" color='pink' basic>\r\n          ${total}\r\n        </Label>\r\n        <Button fluid  color=\"pink\">結帳</Button>\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport EditForm from './component/EditForm';\r\n// import Cart from './component/Cart';\r\nimport ProdList from './component/ProdList';\r\nimport { db } from '../../utils/firebase';\r\nimport Cart from './component/Cart';\r\n// import { useHistory } from 'react-router-dom';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button, Divider } from 'semantic-ui-react';\r\n\r\nexport default function index() {\r\n  const history = useHistory();\r\n  const [rows, setRows] = useState([]);\r\n  useEffect(() => {\r\n    // console.log('data')\r\n    db.collection('food')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        console.log('data');\r\n        setRows(data);\r\n      });\r\n  }, []);\r\n\r\n  const viewCart = () => {\r\n    history.push('/cart');\r\n  };\r\n  return (\r\n    <div>\r\n      \r\n      <ProdList rows={rows} />\r\n      <Divider/>\r\n      <Button color=\"pink\" fluid onClick={viewCart}>\r\n        查看購物車\r\n      </Button>\r\n      \r\n      {/* <EditForm/> */}\r\n      {/* <Cart/> */}\r\n    </div>\r\n  );\r\n}\r\n","import { compact, filter } from 'lodash';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  Table,\r\n  Form,\r\n  Button,\r\n  Input,\r\n  Modal,\r\n  Dropdown,\r\n  Grid,\r\n  GridRow,\r\n} from 'semantic-ui-react';\r\nimport { db } from '../../utils/firebase';\r\nexport default function Balances2() {\r\n  // 帳戶類別下拉資料\r\n  const [accountOptions, setAccountOptions] = useState([]);\r\n  const [cateOptions, setCateOptions] = useState([]);\r\n  // 記帳資料\r\n  const [rows, setRows] = useState([]);\r\n  // 查詢用\r\n  const [rowsCopy, setRowsCopy] = useState([]);\r\n\r\n  // 篩選條件\r\n  const [filters, setFilters] = useState({ title: '', account: '', cate:'' });\r\n\r\n  const handleFilters = (e, obj) => {\r\n    setFilters({\r\n      ...filters,\r\n      [obj.name]: obj.value,\r\n    });\r\n    // console.log(filters);\r\n  };\r\n\r\n  // 編輯列預設值\r\n  const defaultRow = {\r\n    date: new Date().toISOString().slice(0, 10),\r\n    title: '',\r\n    expense: '',\r\n    type: '一般',\r\n  };\r\n\r\n  // 編輯列\r\n  const [editedRow, setEditedRow] = useState(defaultRow);\r\n\r\n  // 記帳類型下拉資料\r\n  const types = [\r\n    { key: '1', text: '一般', value: '一般' },\r\n    { key: '2', text: '轉帳', value: '轉帳' },\r\n    { key: '3', text: '投資', value: '投資' },\r\n  ];\r\n\r\n  // 按鈕載入中圖示\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // 編輯視窗\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // 篩選月份\r\n  const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n\r\n  // const dbCol = db.collection('test');\r\n  const dbCol = db.collection('balances');\r\n\r\n  useEffect(() => {\r\n    getBalancesData();\r\n    getAccountsData();\r\n    getCatesData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setRows(\r\n      rowsCopy.filter(\r\n        (row) =>\r\n          row.account.name.includes(filters.account) &&\r\n          //  row.title?.toLowerCase().includes(filters.title?.toLowerCase())\r\n          row.title.includes(filters.title) &&\r\n          row.cate?.includes(filters.cate)\r\n      )\r\n    );\r\n\r\n    console.log(filters);\r\n    // setRows(\r\n    //   rowsCopy.filter((item) =>\r\n    //     Object.entries(filters).every(([key, value]) =>\r\n    //       item[key].includes(value)\r\n    //     )\r\n    //   )\r\n    // );\r\n  }, [filters]);\r\n\r\n  // 取得帳戶下拉資料\r\n  const getAccountsData = () => {\r\n    setLoading(true);\r\n    db.collection('accounts')\r\n      .where('user', '==', 'mkdodos@gmail.com')\r\n      .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        let data = snapshot.docs.map((doc) => {\r\n          return { key: doc.id, text: doc.data().name, value: doc.data().name };\r\n        });\r\n        // console.log(data);\r\n        setAccountOptions(data);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  // 取得類別下拉資料\r\n  const getCatesData = () => {\r\n    setLoading(true);\r\n    db.collection('cates')\r\n      .where('user', '==', 'mkdodos@gmail.com')\r\n      .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        let data = snapshot.docs.map((doc) => {\r\n          return { key: doc.id, text: doc.data().name, value: doc.data().name };\r\n        });\r\n        // console.log(data);\r\n        setCateOptions(data);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  // 取得記帳資料\r\n  const getBalancesData = () => {\r\n    setLoading(true);\r\n    dbCol\r\n      .where('date', '>=', `2022-0${month}-01`)\r\n      .where('date', '<=', `2022-0${month}-31`)\r\n      // .limit(20)\r\n      .get()\r\n      .then((snapshot) => {\r\n        let data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        data = data.slice().reverse();\r\n        console.log(data);\r\n        setRows(data);\r\n        setRowsCopy(data);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  // 表單輸入時,設定編輯列的值\r\n  const handleInputChange = (e) => {\r\n    setEditedRow({ ...editedRow, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // 儲存\r\n  const saveRow = () => {\r\n    setLoading(true);\r\n    // 用 id 判斷新增或更新\r\n    if (editedRow.id) {\r\n      dbCol\r\n        .doc(editedRow.id)\r\n        .update(editedRow)\r\n        .then(() => {\r\n          getBalancesData();\r\n          setEditedRow(defaultRow);\r\n          setOpen(false);\r\n        });\r\n    } else {\r\n      dbCol.add(editedRow).then(() => {\r\n        getBalancesData();\r\n        setEditedRow(defaultRow);\r\n        setOpen(false);\r\n      });\r\n    }\r\n\r\n    // console.log(editedRow.id)\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        open={open}\r\n        closeIcon\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      >\r\n        <Modal.Header>編輯</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>日期</label>\r\n              <input\r\n                name=\"date\"\r\n                type=\"date\"\r\n                placeholder=\"\"\r\n                value={editedRow.date}\r\n                onChange={handleInputChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>項目</label>\r\n              <input\r\n                name=\"title\"\r\n                type=\"text\"\r\n                value={editedRow.title}\r\n                onChange={handleInputChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>金額</label>\r\n              <input\r\n                name=\"expense\"\r\n                type=\"number\"\r\n                value={editedRow.expense}\r\n                onChange={handleInputChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Select\r\n              label=\"記帳類型\"\r\n              value={editedRow.type}\r\n              onChange={(e, obj) => {\r\n                setEditedRow({ ...editedRow, type: obj.value });\r\n              }}\r\n              name=\"types\"\r\n              options={types}\r\n            ></Form.Select>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button primary loading={loading} onClick={saveRow}>\r\n            儲存\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      {/* 查詢 */}\r\n      <Grid>\r\n        <Grid.Row columns={3}>\r\n          <Grid.Column>\r\n            <Input\r\n              name=\"search\"\r\n              fluid\r\n              // value={search}\r\n              onChange={(e) => {\r\n                setFilters({ ...filters, title: e.target.value });\r\n              }}\r\n              placeholder=\"Search...\"\r\n            ></Input>\r\n          </Grid.Column>\r\n          <Grid.Column>\r\n            <Dropdown\r\n              selection\r\n              clearable\r\n              options={accountOptions}\r\n              label=\"帳戶\"\r\n              onChange={(e, obj) => {\r\n                setFilters({ ...filters, account: obj.value });\r\n              }}\r\n            ></Dropdown>\r\n          </Grid.Column>\r\n          <Grid.Column>\r\n            <Dropdown\r\n              selection\r\n              clearable\r\n              options={cateOptions}\r\n              label=\"類別\"\r\n              onChange={(e, obj) => {\r\n                setFilters({ ...filters, cate: obj.value });\r\n              }}\r\n            ></Dropdown>\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n\r\n      <Table striped unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell width={2}>日期</Table.HeaderCell>\r\n            <Table.HeaderCell width={1}>帳戶</Table.HeaderCell>\r\n            <Table.HeaderCell width={4}>項目</Table.HeaderCell>\r\n            <Table.HeaderCell width={2}>金額</Table.HeaderCell>\r\n            <Table.HeaderCell>記帳類型</Table.HeaderCell>\r\n            {/* <Table.HeaderCell>#</Table.HeaderCell> */}\r\n          </Table.Row>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {rows.map((row) => {\r\n            return (\r\n              <Table.Row\r\n                key={row.id}\r\n                onClick={() => {\r\n                  setEditedRow(row);\r\n                  setOpen(true);\r\n                  console.log(row);\r\n                }}\r\n              >\r\n                <Table.Cell>{row.date}</Table.Cell>\r\n                <Table.Cell>{row.account.name}</Table.Cell>\r\n                <Table.Cell>{row.title}</Table.Cell>\r\n                <Table.Cell>{row.expense || row.income}</Table.Cell>\r\n                <Table.Cell>{row.type}</Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport {Table} from  \"semantic-ui-react\"\r\nexport default function EmpBasic() {\r\n  const [rows, setRows] = useState([])\r\n  useEffect(()=>{\r\n\r\n    axios.get('http://localhost:8888/laravel5salary/public/emp/basic/data')\r\n    .then((res)=>{\r\n      setRows(res.data)\r\n      console.log(res.data)\r\n    })\r\n  },[])\r\n \r\n  return (\r\n    <>\r\n    <pre>{JSON.stringify(rows)}</pre>\r\n    {rows.map(row=>{\r\n      return <div key={row.name}>{row.name}</div>\r\n     \r\n    })}\r\n    </>\r\n  )\r\n}","import React from 'react'\r\n\r\nexport default function Circle({num, active, onClick}) {\r\n\r\n  let style1 = {\r\n\t\tbackgroundColor: '#55d6be',\r\n    outline: 'none',\r\n\t\theight: '50px',\r\n    width:'50px',\r\n    borderRadius:'50%',\r\n    border: '1px solid white'\r\n\t};\r\n\r\n\r\n  let style2 = {\r\n\t\tbackgroundColor: '#fc6471',\r\n    outline: 'none',\r\n\t\theight: '50px',\r\n    width:'50px',\r\n    borderRadius:'50%',\r\n    border: '1px solid white'\r\n\t};\r\n\r\n  // style1.backgroundColor = '#fc6471'\r\n\r\n  \r\n\r\n  return (\r\n    <button style={active?style1:style2} onClick={onClick}>{num}\r\n      {/* <div style={styleNum}>{num}</div>       */}\r\n    </button>\r\n  )\r\n}\r\n","import '../components/Board.css'\r\n\r\nexport default function Board({score}) {\r\n  return (\r\n    <div className='score'><span className=\"score-text\">{score}</span></div>\r\n  )\r\n}\r\n","import { useState } from 'react';\r\nimport '../styles/List.css';\r\n\r\nexport default function List({ year, setYear, rows, setSelectedRow,onYearClick }) {\r\n  // const [active, setActive] = useState('');\r\n  return (\r\n    <div>\r\n     \r\n      <div className=\"wrapper\">\r\n        <table className='scores-table'>\r\n          <thead>\r\n            <tr>\r\n              <th>Year</th>\r\n              <th>Basic</th>\r\n              <th>Advance</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map((row) => {\r\n              return (\r\n                <tr key={row.id}\r\n                onClick={()=>onYearClick(row)}\r\n                  // onClick={() => {\r\n                  //   setYear(row.year);\r\n                  //   setSelectedRow(row)\r\n                    \r\n                  // }}\r\n                >\r\n                  <td className={year == row.year ? 'active' : ''}>{row.year}</td>\r\n                  <td>{row.basic}</td>\r\n                  <td>{row.advance}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n\r\n            {/* <tr\r\n            onClick={() => {\r\n              setYear(2018);\r\n            }}\r\n            >\r\n              <td className={year == '2018' ? 'active' : ''}>2018</td>\r\n              <td>120</td>\r\n              <td>72</td>\r\n            </tr> */}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Message, Icon, Statistic } from 'semantic-ui-react';\r\n\r\nexport default function Clock() {\r\n  // 取得開始日期和結束日期的毫秒數做相減\r\n  // 將相差的毫秒數換算成天數\r\n  // 將計算出的天數扣掉,再將餘數換算成小時\r\n  // 將計算出的小時扣掉,再將餘數換算成分鐘\r\n  const target = '2022-11-20';\r\n  const from = new Date().getTime();\r\n  const to = new Date(`${target} 00:00:00`).getTime();\r\n  // 天\r\n  let days = (to - from) / 60 / 60 / 1000 / 24;\r\n  days = Math.floor(days);\r\n  // 小時\r\n  let left = to - from - days * 24 * 60 * 60 * 1000;\r\n  let hours = left / 60 / 60 / 1000;\r\n  hours = Math.floor(hours);\r\n  // 分鐘\r\n  left = left - hours * 60 * 60 * 1000;\r\n  let mins = left / 60 / 1000;\r\n  mins = Math.floor(mins);\r\n\r\n  return (\r\n    <div>\r\n      <Message icon>\r\n        <Message.Content>\r\n          <Message.Header> <Icon name=\"circle notched\" loading /> 距離 {target} </Message.Header>\r\n         \r\n          <Statistic.Group>\r\n            <Statistic>\r\n              <Statistic.Value>{days}</Statistic.Value>\r\n              <Statistic.Label>天</Statistic.Label>\r\n            </Statistic>\r\n            <Statistic>\r\n              <Statistic.Value>{hours}</Statistic.Value>\r\n              <Statistic.Label>小時</Statistic.Label>\r\n            </Statistic>\r\n            <Statistic>\r\n              <Statistic.Value>{mins}</Statistic.Value>\r\n              <Statistic.Label>分鐘</Statistic.Label>\r\n            </Statistic>\r\n          </Statistic.Group>\r\n\r\n         \r\n        </Message.Content>\r\n      </Message>\r\n      <br></br>\r\n    </div>\r\n  );\r\n}\r\n","import Circle from './components/Circle';\r\nimport Board from './components/Board';\r\nimport { useEffect, useState } from 'react';\r\nimport { db } from '../../utils/firebase';\r\nimport { Loader } from 'semantic-ui-react';\r\nimport List from './components/List';\r\nimport Clock from './components/Clock';\r\n\r\nexport default function Scores() {\r\n  const styleGrid = {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(6, 50px)',\r\n    gridTemplateRows: 'repeat(4, 50px)',\r\n    gap: '5px',\r\n    justifyContent: 'center',\r\n    marginBottom: '20px',\r\n  };\r\n\r\n  const active = {\r\n    backgroundColor: '#fc6471',\r\n  };\r\n\r\n  const [rows, setRows] = useState([]);\r\n  const [rowDetails, setRowDetails] = useState([]);\r\n  const [rowDetailsBasic, setRowDetailsBasic] = useState([]);\r\n  const [rowDetailsAdvance, setRowDetailsAdvance] = useState([]);\r\n  const [score, setScore] = useState(0);\r\n  const [scoreAdvance, setScoreAdvance] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [seletedRow, setSelectedRow] = useState({});\r\n  const [year, setYear] = useState(0);\r\n\r\n  // 分數\r\n  const dbColScores = db.collection('scores');\r\n  // 分數明細\r\n  const dbColScoreDetails = db.collection('scoreDetails');\r\n\r\n  // 欄位\r\n  const schemaScores = {\r\n    // 年份 number\r\n    year: 2017,\r\n    // 基礎題分數 number\r\n    basic: 120,\r\n    // 進階題分數 number\r\n    advance: 80,\r\n  };\r\n\r\n  const schemaScoreDetails = {\r\n    // 年份 number\r\n    year: 2018,\r\n    // 題型 string ['basic','advance']\r\n    type: 'basic',\r\n    // 題號 number\r\n    sn: 1,\r\n    // 對錯 boolean\r\n    correct: true,\r\n  };\r\n\r\n  useEffect(() => {\r\n    for (let y = 2017; y < 2022; y++) {\r\n      // dbColScores.add({ ...schemaScores, year: y });\r\n      // for (let i = 1; i < 25; i++) {\r\n      //   dbColScoreDetails.add({ ...schemaScoreDetails, sn: i, year: y });\r\n      // }\r\n      // for (let i = 1; i < 11; i++) {\r\n      //   dbColScoreDetails.add({ ...schemaScoreDetails, sn: i, year: y,type:'advance' });\r\n      // }\r\n    }\r\n    // const y = 2022;\r\n    // dbColScores.add({ ...schemaScores, year: y });\r\n    // for (let i = 1; i < 25; i++) {\r\n    //   dbColScoreDetails.add({ ...schemaScoreDetails, sn: i, year: y });\r\n    // }\r\n    // for (let i = 1; i < 11; i++) {\r\n    //   dbColScoreDetails.add({\r\n    //     ...schemaScoreDetails,\r\n    //     sn: i,\r\n    //     year: y,\r\n    //     type: 'advance',\r\n    //   });\r\n    // }\r\n\r\n    // setLoading(true);\r\n\r\n    // dbColScores.where('year','==',2022).get().then((snapshot) => {\r\n    //   snapshot.docs.map((doc) => {\r\n    //     dbColScores.doc(doc.id).delete();\r\n    //   });\r\n    // });\r\n\r\n    // dbColScoreDetails.where('year','==',2022).get().then((snapshot) => {\r\n    //   snapshot.docs.map((doc) => {\r\n    //     dbColScoreDetails.doc(doc.id).delete();\r\n    //   });\r\n    // });\r\n\r\n    // 設定分數資料\r\n    dbColScores\r\n      .orderBy('year')\r\n      // .where('year','==',2022)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc, index) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n\r\n        setRows(data);\r\n      });\r\n  }, []);\r\n\r\n  // 年有變化時更新明細資料\r\n  useEffect(() => {\r\n    // 設定分數明細資料\r\n    dbColScoreDetails\r\n      .orderBy('sn')\r\n      .where('year', '==', year)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n\r\n        // 計算分數\r\n        const basic = data.filter((row) => row.type === 'basic');\r\n        setRowDetailsBasic(basic);\r\n        calTotal(basic);\r\n\r\n        const advance = data.filter((row) => row.type === 'advance');\r\n        setRowDetailsAdvance(advance);\r\n        calScoreAdvance(advance);\r\n        // setRowDetails(data);\r\n      });\r\n  }, [year]);\r\n\r\n  // 分數有變化時更新主表的分數\r\n  useEffect(() => {\r\n    const index = rows.indexOf(seletedRow);\r\n    if (index !== -1) {\r\n      dbColScores\r\n        .doc(seletedRow.id)\r\n        .update({ basic: score })\r\n        .then(() => {\r\n          let newScores = rows.slice();\r\n          Object.assign(newScores[index], { ...seletedRow, basic: score });\r\n          setRows(newScores);\r\n        });\r\n    }\r\n  }, [score]);\r\n\r\n  useEffect(() => {\r\n    const index = rows.indexOf(seletedRow);\r\n    if (index !== -1) {\r\n      dbColScores\r\n        .doc(seletedRow.id)\r\n        .update({ advance: scoreAdvance })\r\n        .then(() => {\r\n          let newScores = rows.slice();\r\n          Object.assign(newScores[index], {\r\n            ...seletedRow,\r\n            advance: scoreAdvance,\r\n          });\r\n          setRows(newScores);\r\n        });\r\n    }\r\n  }, [scoreAdvance]);\r\n\r\n  // 計算分數\r\n  const calTotal = (data) => {\r\n    let total = 0;\r\n    data.map((item) => {\r\n      if (item.correct) return (total += 5);\r\n      return total;\r\n    });\r\n    setScore(total);\r\n  };\r\n\r\n  // 計算分數\r\n  const calScoreAdvance = (data) => {\r\n    let total = 0;\r\n    data.map((item) => {\r\n      if (item.correct) return (total += 8);\r\n      return total;\r\n    });\r\n    setScoreAdvance(total);\r\n  };\r\n\r\n  // 點選明細球(計算分數, 更新該筆的對錯)\r\n  const onClick = (item) => {\r\n    dbColScoreDetails\r\n      .doc(item.id)\r\n      .update({ correct: !item.correct })\r\n      .then(() => {\r\n        if (item.type === 'basic') {\r\n          let newRows = rowDetailsBasic.slice();\r\n          let row = item;\r\n          Object.assign(row, { ...row, correct: !row.correct });\r\n          setRowDetailsBasic(newRows);\r\n          calTotal(newRows);\r\n        }\r\n\r\n        if (item.type === 'advance') {\r\n          let newRows = rowDetailsAdvance.slice();\r\n          let row = item;\r\n          Object.assign(row, { ...row, correct: !row.correct });\r\n          setRowDetailsAdvance(newRows);\r\n          calScoreAdvance(newRows);\r\n        }\r\n      });\r\n  };\r\n\r\n  // 點選年\r\n  const onYearClick = (row) => {\r\n    setYear(row.year);\r\n    setSelectedRow(row);\r\n  };\r\n  /*************************************************/\r\n  return (\r\n    <>\r\n      <Clock />\r\n\r\n      {/* {typeof year} */}\r\n      <List\r\n        year={year}\r\n        setYear={setYear}\r\n        rows={rows}\r\n        setSelectedRow={setSelectedRow}\r\n        onYearClick={onYearClick}\r\n      ></List>\r\n\r\n      {loading ? (\r\n        <Loader active inline=\"centered\" />\r\n      ) : (\r\n        <>\r\n          <Board score={score}></Board>\r\n          <div style={styleGrid}>\r\n            {rowDetailsBasic.map((item) => (\r\n              <Circle\r\n                onClick={() => onClick(item)}\r\n                active={item.correct}\r\n                key={item.id}\r\n                num={item.sn}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <Board score={scoreAdvance}></Board>\r\n          <div style={styleGrid}>\r\n            {rowDetailsAdvance.map((item) => (\r\n              <Circle\r\n                onClick={() => onClick(item)}\r\n                active={item.correct}\r\n                key={item.id}\r\n                num={item.sn}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n  Table,\r\n  Icon,\r\n  Form,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Message,\r\n  Header,\r\n  Segment,\r\n  Divider,\r\n  Label,\r\n} from 'semantic-ui-react';\r\n\r\n\r\n\r\n\r\nexport default function Scoreboard({\r\n  rows,\r\n  setEditedIndex,\r\n  open,\r\n  setOpen,\r\n  setEditedRow,\r\n  editedRow,\r\n}) {\r\n  \r\n  const defaultItem = {\r\n    year: '',\r\n    section: '',\r\n    ch: '',\r\n    en: '',\r\n    math: '',\r\n    nature: '',\r\n    society: '',\r\n  };\r\n \r\n\r\n  const types = ['期中', '期末'];\r\n\r\n  // 儲存\r\n  const saveRow = () => {\r\n    const newRows = rows.slice();\r\n\r\n    editedRow.total =\r\n      Number(editedRow.ch) +\r\n      Number(editedRow.en) +\r\n      Number(editedRow.math) +\r\n      Number(editedRow.nature) +\r\n      Number(editedRow.society);\r\n\r\n    setLoading(true);\r\n    if (editedIndex > -1) {\r\n      dbCol\r\n        .doc(editedRow.id)\r\n        .update(editedRow)\r\n        .then(() => {\r\n          Object.assign(newRows[editedIndex], editedRow);\r\n          setRows(newRows);\r\n          setOpen(false);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      dbCol.add(editedRow).then((doc) => {\r\n        setRows([...rows, { ...editedRow, id: doc.id }]);\r\n        setOpen(false);\r\n        setLoading(false);\r\n      });\r\n    }\r\n  };\r\n\r\n  // 刪除\r\n  const deleteRow = () => {\r\n    setLoading(true);\r\n    dbCol\r\n      .doc(editedRow.id)\r\n      .delete()\r\n      .then(() => {\r\n        const newRows = rows.slice();\r\n        newRows.splice(editedIndex, 1);\r\n        setRows(newRows);\r\n        setOpen(false);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const setYear = (y) => {\r\n    setEditedRow({ ...editedRow, year: y });\r\n  };\r\n\r\n  const setSection = (section) => {\r\n    setEditedRow({ ...editedRow, section });\r\n  };\r\n  return (\r\n    <div>\r\n      {/* 表格使用 celled , 用到 rowSpan 的欄位,有的列會沒有出現格線,需加上 structured */}\r\n      {/* <Table striped unstackable celled structured  > */}\r\n      {/* <Table  unstackable celled structured selectable> */}\r\n      <Table  unstackable  >\r\n        <Table.Header>\r\n          <Table.Row textAlign=\"right\">\r\n            <Table.HeaderCell textAlign=\"center\">學期</Table.HeaderCell>\r\n            <Table.HeaderCell textAlign=\"center\">\r\n              {' '}\r\n              <Icon name=\"tree\" />\r\n            </Table.HeaderCell>\r\n            <Table.HeaderCell>國語</Table.HeaderCell>\r\n            <Table.HeaderCell>英文</Table.HeaderCell>\r\n            <Table.HeaderCell>數學</Table.HeaderCell>\r\n            <Table.HeaderCell>自然</Table.HeaderCell>\r\n            <Table.HeaderCell>社會</Table.HeaderCell>\r\n            <Table.HeaderCell>\r\n              <Icon name=\"signal\" />\r\n              {/* <Icon name=\"bookmark\" /> */}\r\n              {/* <Icon name=\"delicious\" /> */}\r\n              {/* <Icon name=\"world\" /> */}\r\n              {/* <Icon name=\"radio\" /> */}\r\n            </Table.HeaderCell>\r\n            <Table.HeaderCell></Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {rows.map((row, index) => {\r\n            return (\r\n              <Table.Row key={row.id} textAlign=\"right\">\r\n                {index % 2 == 0 && (\r\n                  <Table.Cell  rowSpan=\"2\" textAlign=\"center\">\r\n                    {row.year}-{row.section}\r\n                  </Table.Cell>\r\n                )}\r\n\r\n                <Table.Cell textAlign=\"center\">\r\n                 \r\n                  <Label color={row.type == 1 ? 'olive' : 'green'}>\r\n                    {types[row.type - 1]}\r\n                  </Label>\r\n                </Table.Cell>\r\n                <Table.Cell>{row.ch}</Table.Cell>\r\n                <Table.Cell>{row.en}</Table.Cell>\r\n                <Table.Cell>{row.math}</Table.Cell>\r\n                <Table.Cell>{row.nature}</Table.Cell>\r\n                <Table.Cell>{row.society}</Table.Cell>\r\n                <Table.Cell textAlign=\"right\">\r\n                  <Header as=\"h4\">{row.total}</Header>\r\n                </Table.Cell>\r\n                <Table.Cell\r\n                  onClick={() => {\r\n                    setEditedRow(row);\r\n                    setEditedIndex(index);\r\n                    setOpen(true);\r\n                  }}\r\n                >\r\n                  <a href='#'> <Icon name=\"edit\" /></a>\r\n                 \r\n                </Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { List, Modal, Label, Button } from 'semantic-ui-react';\r\nexport default function YearSelector({ open, setOpen, setYear, year }) {\r\n  const years = [111, 112, 113, 114];\r\n  const [thisY, setThisY] = useState('');\r\n  return (\r\n    <div>\r\n      <Modal open={open} onClose={() => setOpen(false)} closeIcon>\r\n        <Modal.Header>年度</Modal.Header>\r\n        <Modal.Content>\r\n          <List horizontal celled>\r\n            {years.map((y) => {\r\n              return (\r\n                <List.Item\r\n                  key={y}\r\n                  onClick={() => {\r\n                    console.log(y);\r\n                    setOpen(false);\r\n                    setYear(y);\r\n                    // setThisY(y);\r\n                  }}\r\n                >\r\n                  {/* <Label  horizontal>{y}</Label> */}\r\n\r\n                  {y == year ? (\r\n                    <Button color=\"teal\">{y}</Button>\r\n                  ) : (\r\n                    <Button>{y}</Button>\r\n                  )}\r\n\r\n                  {/* <List.Content>\r\n                    <List.Header>{y}</List.Header>\r\n                  </List.Content> */}\r\n                </List.Item>\r\n              );\r\n            })}\r\n          </List>\r\n        </Modal.Content>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { List, Modal, Button } from 'semantic-ui-react';\r\nexport default function SectionSelector({ setEditedRow,editedRow  }) {\r\n  const sections = ['1', '2'];\r\n  const names = ['上', '下'];\r\n  \r\n  return (\r\n    <div>\r\n      <List horizontal>\r\n        {sections.map((section,index) => {\r\n          return (\r\n            <List.Item\r\n              key={section}\r\n              onClick={() => {               \r\n                setEditedRow({...editedRow,section})\r\n              }}\r\n            >\r\n              <List.Content>\r\n                <List.Header>\r\n                  <Button basic primary={editedRow.section==section}>{names[index]}學期</Button>\r\n                </List.Header>\r\n              </List.Content>\r\n            </List.Item>\r\n          );\r\n        })}\r\n      </List>\r\n      \r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { List, Modal, Button } from 'semantic-ui-react';\r\nexport default function TypeSelector({ open, setOpen, setEditedRow,editedRow }) {\r\n  const types = ['1', '2'];\r\n  const names = ['期中', '期末'];\r\n  \r\n  return (\r\n    <div>\r\n      \r\n      <List horizontal>\r\n        {types.map((type,index) => {\r\n          return (\r\n            <List.Item\r\n              key={type}\r\n              onClick={() => {                \r\n                setEditedRow({...editedRow,type})\r\n              }}\r\n            >\r\n              <List.Content>\r\n                <List.Header>\r\n                  <Button basic positive={editedRow.type==type}>{names[index]}考</Button>\r\n                </List.Header>\r\n              </List.Content>\r\n            </List.Item>\r\n          );\r\n        })}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\n\r\nimport { Modal, Form, Divider, Header, Icon, Button } from 'semantic-ui-react';\r\nimport YearSelector from './YearSelector';\r\nimport SectionSelector from './SectionSelector';\r\nimport TypeSelector from './TypeSelector';\r\nexport default function EditForm({\r\n  open,\r\n  setOpen,\r\n  editedRow,\r\n  setEditedRow,\r\n  defaultItem,\r\n  rows,\r\n  editedIndex,\r\n  setEditedIndex,\r\n  saveRow,\r\n  deleteRow,\r\n  loading,\r\n  setLoading,\r\n  yearOpen,\r\n  setYearOpen\r\n}) {\r\n  \r\n  const setYear = (y) => {\r\n    setEditedRow({ ...editedRow, year: y });\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      <Button\r\n      basic\r\n        color='teal'\r\n        onClick={() => {\r\n          setEditedIndex(-1);\r\n          setOpen(true);\r\n          setEditedRow(defaultItem);\r\n        }}\r\n      ><Icon name='plus'/>\r\n        新增\r\n      </Button>\r\n\r\n      <Modal closeIcon open={open} onClose={() => setOpen(false)}>\r\n        <YearSelector\r\n          open={yearOpen}\r\n          setOpen={setYearOpen}\r\n          setYear={setYear}\r\n          year={editedRow.year}\r\n        />\r\n\r\n        <Modal.Header>編輯</Modal.Header>\r\n        <Modal.Content>\r\n          <Form unstackable>\r\n            <Form.Group widths={2}>\r\n              <Form.Input\r\n                placeholder=\"年度\"\r\n                type=\"number\"\r\n                value={editedRow.year}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, year: e.target.value });\r\n                }}\r\n              />\r\n              <Form.Button\r\n                onClick={() => {\r\n                  setYearOpen(true);\r\n                }}\r\n              >\r\n                選擇年度\r\n              </Form.Button>\r\n            </Form.Group>\r\n\r\n            <Form.Group widths={2}>\r\n             \r\n           \r\n            </Form.Group>\r\n\r\n\r\n            <SectionSelector editedRow={editedRow} setEditedRow={setEditedRow}/>\r\n            <TypeSelector editedRow={editedRow} setEditedRow={setEditedRow}/>\r\n\r\n            <Divider horizontal>\r\n              <Header as=\"h4\">\r\n                <Icon name=\"signal\" />\r\n              </Header>\r\n            </Divider>\r\n            {/* <Header>分數</Header> */}\r\n            <Form.Field inline>\r\n              <label>國語</label>\r\n              <input\r\n                type=\"number\"\r\n                value={editedRow.ch}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, ch: e.target.value });\r\n                }}\r\n              />\r\n            </Form.Field>\r\n\r\n            <Form.Field inline>\r\n              <label>英文</label>\r\n              <input\r\n                type=\"number\"\r\n                value={editedRow.en}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, en: e.target.value });\r\n                }}\r\n              />\r\n            </Form.Field>\r\n\r\n            <Form.Field inline>\r\n              <label>數學</label>\r\n              <input\r\n                type=\"number\"\r\n                value={editedRow.math}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, math: e.target.value });\r\n                }}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field inline>\r\n              <label>自然</label>\r\n              <input\r\n                type=\"number\"\r\n                value={editedRow.nature}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, nature: e.target.value });\r\n                }}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field inline>\r\n              <label>社會</label>\r\n              {/* <Label>a</Label> */}\r\n              <input\r\n                type=\"number\"\r\n                value={editedRow.society}\r\n                onChange={(e) => {\r\n                  setEditedRow({ ...editedRow, society: e.target.value });\r\n                }}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button loading={loading} primary onClick={saveRow}>\r\n            儲存\r\n          </Button>\r\n          <Button\r\n            loading={loading}\r\n            color=\"red\"\r\n            floated=\"left\"\r\n            onClick={deleteRow}\r\n          >\r\n            刪除\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Label, Divider,Icon } from 'semantic-ui-react';\r\nexport default function Answer() {\r\n  const basic = [\r\n    1, 3, 3, 4, 2, 3, 4, 3, 1, 1, 4, 3, 3, 4, 3, 1, 4, 3, 2, 2, 3, 2, 3, 2,\r\n  ];\r\n  const adv = ['192', '3公尺8公分','8','1','不能','26','XOX','8:30','610','396'];\r\n  return (\r\n    <div>\r\n      {basic.map((row, index) => {\r\n        return (\r\n          <>\r\n            <Label circular basic color=\"teal\" size='large'>\r\n              {row}\r\n            </Label >\r\n            {index % 5 == 4 && index % 10 != 9 &&\r\n              <Icon size='tiny' name='circle' color='teal'/>}\r\n            {/* {index % 5 == 4 && index % 10 != 9 &&  \r\n            '-'\r\n            } */}\r\n            {index % 10 == 9 && <Divider />}\r\n           \r\n           \r\n          </>\r\n        );\r\n      })}\r\n      <Divider />\r\n\r\n      {adv.map((row, index) => {\r\n        return (\r\n          <>\r\n            <Label  basic color=\"pink\" size='large'>\r\n              {row}\r\n            </Label>\r\n            {index % 5 == 4 && <Divider />}\r\n          </>\r\n        );\r\n      })}\r\n\r\n      <Divider />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport Scoreboard from './components/Scoreboard';\r\n// import YearSelector from './components/YearSelector';\r\nimport EditForm from './components/EditForm';\r\n\r\nimport { db } from '../../utils/firebase';\r\nimport { Divider } from 'semantic-ui-react';\r\n\r\nimport Answer from './components/Answer';\r\n\r\nexport default function index() {\r\n  const defaultItem = {\r\n    year: '',\r\n    section: '',\r\n    ch: '',\r\n    en: '',\r\n    math: '',\r\n    nature: '',\r\n    society: '',\r\n  };\r\n  const [editedRow, setEditedRow] = useState(defaultItem);\r\n  const [rows, setRows] = useState([]);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [yearOpen, setYearOpen] = useState(false);\r\n\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const dbCol = db.collection('schoolExams');\r\n\r\n  useEffect(() => {\r\n    dbCol.get().then((snapshot) => {\r\n      const data = snapshot.docs.map((doc) => {\r\n        return { ...doc.data(), id: doc.id };\r\n      });\r\n\r\n      // 資料排序(年度,學期)\r\n      // data.sort((a, b) => a.year - b.year || a.type - b.type);\r\n      // data.sort((a, b) => a.year - b.year || a.section - b.section);\r\n      data.sort(\r\n        (a, b) => a.year - b.year || a.section - b.section || a.type - b.type\r\n      );\r\n      setRows(data);\r\n    });\r\n  }, []);\r\n\r\n  // 儲存\r\n  const saveRow = () => {\r\n    const newRows = rows.slice();\r\n\r\n    editedRow.total =\r\n      Number(editedRow.ch) +\r\n      Number(editedRow.en) +\r\n      Number(editedRow.math) +\r\n      Number(editedRow.nature) +\r\n      Number(editedRow.society);\r\n\r\n    setLoading(true);\r\n    if (editedIndex > -1) {\r\n      dbCol\r\n        .doc(editedRow.id)\r\n        .update(editedRow)\r\n        .then(() => {\r\n          Object.assign(newRows[editedIndex], editedRow);\r\n          setRows(newRows);\r\n          setOpen(false);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      dbCol.add(editedRow).then((doc) => {\r\n        setRows([...rows, { ...editedRow, id: doc.id }]);\r\n        setOpen(false);\r\n        setLoading(false);\r\n      });\r\n    }\r\n  };\r\n\r\n  // 刪除\r\n  const deleteRow = () => {\r\n    setLoading(true);\r\n    dbCol\r\n      .doc(editedRow.id)\r\n      .delete()\r\n      .then(() => {\r\n        const newRows = rows.slice();\r\n        newRows.splice(editedIndex, 1);\r\n        setRows(newRows);\r\n        setOpen(false);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Answer/>\r\n      {/* 編輯表單 */}\r\n      <EditForm\r\n        open={open}\r\n        setOpen={setOpen}\r\n        editedRow={editedRow}\r\n        setEditedRow={setEditedRow}\r\n        defaultItem={defaultItem}\r\n        rows={rows}\r\n        editedIndex={editedIndex}\r\n        setEditedIndex={setEditedIndex}\r\n        saveRow={saveRow}\r\n        deleteRow={deleteRow}\r\n        loading={loading}\r\n        setLoading={setLoading}\r\n        yearOpen={yearOpen}\r\n        setYearOpen={setYearOpen}\r\n      />\r\n      <Divider horizontal>考試成績</Divider>\r\n      {/* 資料表格 */}\r\n      <Scoreboard\r\n        rows={rows}\r\n        open={open}\r\n        setOpen={setOpen}\r\n        editedRow={editedRow}\r\n        setEditedRow={setEditedRow}\r\n        setEditedIndex={setEditedIndex}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","const accountData=\r\n[\r\n  {\r\n    \"id\": \"1\",\r\n    \"name\": \"房貸A\",\r\n    \"balance\":\"123\"\r\n  },\r\n  {\r\n    \"id\": \"2\",\r\n    \"name\": \"房貸B\",\r\n    \"balance\":\"456\"\r\n  },\r\n  {\r\n    \"id\": \"3\",\r\n    \"name\": \"土銀\",\r\n    \"balance\":\"789\"\r\n  }\r\n]\r\n\r\n\r\n// {\r\n//   \"id\": \"1\",\r\n//   \"account\":\"帳戶\",\r\n//   \"date\":\"日期\",\r\n//   \"basic\": \"本金\",\r\n//   \"interest\":\"利息\",  \r\n// },\r\nconst mortgageData=\r\n[\r\n  {\r\n    \"id\": \"1\",\r\n    \"account\":\"房貸A\",\r\n    \"date\":\"2022-10-08\",\r\n    \"basic\": \"11872\",\r\n    \"interest\":\"5123\",\r\n    \r\n  },\r\n  {\r\n    \"id\": \"2\",\r\n    \"account\":\"房貸B\",\r\n    \"date\":\"2022-10-08\",\r\n    \"basic\": \"247\",\r\n    \"interest\":\"123\"\r\n  },\r\n  {\r\n    \"id\": \"3\",\r\n    \"account\":\"房貸B\",\r\n    \"date\":\"2022-10-08\",\r\n    \"basic\": \"10\",\r\n    \"interest\":\"13\"\r\n  },\r\n]\r\n\r\n\r\nexport {accountData, mortgageData}\r\n","import { useEffect, useState } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { accountData as accounts, mortgageData as mortgages } from './data';\r\nimport {\r\n  Segment,\r\n  Header,\r\n  Table,\r\n  Grid,\r\n  Button,\r\n  Modal,\r\n  Form,\r\n} from 'semantic-ui-react';\r\nexport default function Mortgages() {\r\n  // 房貸帳戶資料\r\n  const [accountData, setAccountData] = useState([]);\r\n\r\n  // 銀行帳戶資料\r\n  const [bankData, setBankData] = useState({});\r\n\r\n  // 房貸支出資料另外複製一份作為篩選用(在新增和刪除時都要同步更新這二份資料)\r\n  const [mortgageData, setMorgageData] = useState([]);\r\n  const [mortgageDataCopy, setMorgageDataCopy] = useState([]);\r\n\r\n  // 作用中帳戶\r\n  const [activeAccount, setActiveAccount] = useState();\r\n\r\n  // 編輯列\r\n  const defaultRow = {\r\n    date: new Date().toISOString().slice(0, 10),\r\n    basic: '',\r\n    interest: '',\r\n    account: '',\r\n  };\r\n  const [editedRow, setEditedRow] = useState(defaultRow);\r\n  const [editedIndex, setEditedIndex] = useState(-1);\r\n\r\n  // 視窗\r\n  const [open, setOpen] = useState(false);\r\n  // 按鈕載入中\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setAccountData(\r\n      accounts.filter((obj) => obj.name === '房貸A' || obj.name === '房貸B')\r\n    );\r\n\r\n    setBankData(accounts.filter((obj) => obj.name === '土銀')[0]);\r\n\r\n    // 設定原始資料\r\n    setMorgageData(mortgages);\r\n    setMorgageDataCopy(mortgages);\r\n  }, []);\r\n\r\n  // 點擊帳戶\r\n  const handleAccountClick = (item, index) => {\r\n    // 設定作用中帳戶和索引\r\n    setActiveAccount({ ...item, index });\r\n    setMorgageData(mortgageDataCopy.filter((obj) => obj.account === item.name));\r\n  };\r\n\r\n  const deleteRow = () => {\r\n    // 計算新的帳戶餘額\r\n    const newBalance = activeAccount.balance * 1 + editedRow.basic * 1;\r\n    updateBalance(newBalance);\r\n\r\n    updateBank('delete');\r\n\r\n    setMorgageData(mortgageData.filter((obj) => obj.id !== editedRow.id));\r\n    setMorgageDataCopy(\r\n      mortgageDataCopy.filter((obj) => obj.id !== editedRow.id)\r\n    );\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  // 一般文字輸入\r\n  const inputChange = (e) => {\r\n    // 設定編輯列的值\r\n    setEditedRow({ ...editedRow, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // 儲存\r\n  const saveRow = () => {\r\n    if (editedIndex > -1) {\r\n    } else {\r\n      // 新增\r\n      createRow();\r\n    }\r\n  };\r\n\r\n  const createRow = () => {\r\n    // 將新的值加入陣列\r\n    const newRow = { ...editedRow, account: activeAccount.name, id: uuidv4() };\r\n    setMorgageData([newRow, ...mortgageData]);\r\n    setMorgageDataCopy([newRow, ...mortgageDataCopy]);\r\n\r\n    // 計算新的帳戶餘額\r\n    const newBalance = activeAccount.balance * 1 - editedRow.basic * 1;\r\n    updateBalance(newBalance);\r\n\r\n    updateBank('create');\r\n\r\n    setOpen(false);\r\n    setEditedRow(defaultRow);\r\n  };\r\n\r\n  const updateBalance = (balance) => {\r\n    // 複製一份帳戶資料\r\n    const newAccountData = accountData.slice();\r\n    // 更新該筆作用中帳戶的餘額\r\n    Object.assign(newAccountData[activeAccount.index], {\r\n      ...activeAccount,\r\n      balance,\r\n    });\r\n\r\n    // 將資料寫入原資料\r\n    setAccountData(newAccountData);\r\n\r\n    // 更新作用中帳戶的餘額,再下次新增支出時計算餘額才會正確\r\n    setActiveAccount({ ...activeAccount, balance });\r\n  };\r\n\r\n  // 更新銀行餘額\r\n  const updateBank = (action) => {\r\n    switch (action) {\r\n      case 'create':\r\n        setBankData((prev) => {\r\n          return {\r\n            ...prev,\r\n            balance:\r\n              Number(prev.balance) -\r\n              Number(editedRow.basic) -\r\n              Number(editedRow.interest),\r\n          };\r\n        });\r\n        break;\r\n\r\n      case 'delete':\r\n        setBankData((prev) => {\r\n          return {\r\n            ...prev,\r\n            balance:\r\n              Number(prev.balance) +\r\n              Number(editedRow.basic) +\r\n              Number(editedRow.interest),\r\n          };\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  // 點擊表格列\r\n  const tableRowClick = (item, index) => {\r\n    // 設定編輯列的值\r\n    setEditedRow(item);\r\n    setEditedIndex(index);\r\n    setOpen(true);\r\n    console.log(item);\r\n  };\r\n  return (\r\n    <div>\r\n      {/* 編輯視窗 */}\r\n\r\n      <Modal\r\n        open={open}\r\n        closeIcon\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      >\r\n        <Modal.Header>編輯房貸</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>日期</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                value={editedRow.date}\r\n                onChange={inputChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>本金</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"basic\"\r\n                value={editedRow.basic}\r\n                onChange={inputChange}\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>利息</label>\r\n              <input\r\n                type=\"number\"\r\n                name=\"interest\"\r\n                value={editedRow.interest}\r\n                onChange={inputChange}\r\n              />\r\n            </Form.Field>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          {editedIndex > -1 && (\r\n            <Button\r\n              onClick={deleteRow}\r\n              color=\"red\"\r\n              floated=\"left\"\r\n              loading={loading}\r\n            >\r\n              刪除\r\n            </Button>\r\n          )}\r\n          <Button onClick={saveRow} color=\"blue\" loading={loading}>\r\n            儲存\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      {/* 帳戶 */}\r\n      <Grid columns={2}>\r\n        <Grid.Row>\r\n          {accountData.map((obj, index) => (\r\n            <Grid.Column key={obj.id}>\r\n              <Segment\r\n                inverted={obj.name === activeAccount?.name}\r\n                color=\"teal\"\r\n                onClick={() => handleAccountClick(obj, index)}\r\n              >\r\n                <Header as=\"h2\" inverted={obj.name === activeAccount?.name}>\r\n                  {obj.balance}\r\n                  <Header.Subheader>{obj.name}</Header.Subheader>\r\n                </Header>\r\n              </Segment>\r\n            </Grid.Column>\r\n          ))}\r\n        </Grid.Row>\r\n        <Grid.Row>\r\n          <Grid.Column>\r\n            {bankData.name}\r\n            {bankData.balance}\r\n          </Grid.Column>\r\n          {/* 新增鈕 */}\r\n          <Grid.Column>\r\n            {activeAccount && (\r\n              <Button\r\n                floated=\"right\"\r\n                color=\"yellow\"\r\n                onClick={() => {\r\n                  setOpen(true);\r\n                  setEditedIndex(-1);\r\n                  setEditedRow(defaultRow);\r\n                }}\r\n              >\r\n                ADD\r\n              </Button>\r\n            )}\r\n          </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n      {/* 表格 */}\r\n      <Table celled unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>日期</Table.HeaderCell>\r\n            <Table.HeaderCell>本金</Table.HeaderCell>\r\n            <Table.HeaderCell>利息</Table.HeaderCell>\r\n            <Table.HeaderCell>帳戶</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {mortgageData.map((row, index) => (\r\n            <Table.Row key={row.id} onClick={() => tableRowClick(row, index)}>\r\n              <Table.Cell>{row.date}</Table.Cell>\r\n              <Table.Cell>{row.basic}</Table.Cell>\r\n              <Table.Cell>{row.interest}</Table.Cell>\r\n              <Table.Cell>{row.account}</Table.Cell>\r\n            </Table.Row>\r\n          ))}\r\n        </Table.Body>\r\n\r\n        <Table.Footer></Table.Footer>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","var _desc, _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDayCloudy(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"136px\",\n    height: \"124px\",\n    viewBox: \"0 0 136 124\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"day-cloudy\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    x1: \"24.3617045%\",\n    y1: \"72.8710337%\",\n    x2: \"63.6421593%\",\n    y2: \"39.9796521%\",\n    id: \"linearGradient-1\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#F2F2F2\",\n    offset: \"0%\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#CFCFCF\",\n    offset: \"100%\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    x1: \"72.5161778%\",\n    y1: \"64.8727273%\",\n    x2: \"8.62380839%\",\n    y2: \"22.6545455%\",\n    id: \"linearGradient-2\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFFFFF\",\n    offset: \"2%\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFFFFF\",\n    stopOpacity: 0,\n    offset: \"100%\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"day-cloudy\",\n    transform: \"translate(0.000000, 2.000000)\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#EFCC00\",\n    fillRule: \"nonzero\",\n    cx: 84.5,\n    cy: 49.4446841,\n    r: 31.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M84,-0.0553158818 L84,10.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M84,87.9446841 L84,98.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34,49.9446841 L45,49.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M123,49.9446841 L134,49.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49,14.9446841 L57,22.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M112,76.9446841 L120,84.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49,84.9446841 L57,76.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M112,22.9446841 L120,14.9446841\",\n    id: \"Path\",\n    stroke: \"#EFCC00\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M43.6759917,34.9446841 C59.8900952,34.9120269 74.7864611,43.8329661 82.3604414,58.1116072 C94.8397967,50.8446293 110.55339,52.1457401 121.656555,61.3653887 C132.75972,70.5850372 136.871287,85.7459907 131.938648,99.2794764 C127.006009,112.812962 114.08701,121.816608 99.6311764,121.795541 L43.6759917,121.944684 C19.5544075,121.944684 0,102.469091 0,78.444729 C0,54.4203672 19.5544075,34.9446841 43.6759917,34.9446841 Z\",\n    id: \"Path\",\n    fill: \"url(#linearGradient-1)\",\n    fillRule: \"nonzero\"\n  }), /*#__PURE__*/React.createElement(\"ellipse\", {\n    id: \"Oval\",\n    fill: \"url(#linearGradient-2)\",\n    fillRule: \"nonzero\",\n    transform: \"translate(99.372837, 87.180572) rotate(-74.390000) translate(-99.372837, -87.180572) \",\n    cx: 99.3728371,\n    cy: 87.1805719,\n    rx: 34.1705349,\n    ry: 34.2478481\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDayCloudy);\nexport default __webpack_public_path__ + \"static/media/day-cloudy.005047ee.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAirFlow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"120px\",\n    height: \"92px\",\n    viewBox: \"0 0 120 92\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"2682842 - breeze fast speed weather wind windy\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    strokeLinecap: \"round\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"2682842---breeze-fast-speed-weather-wind-windy\",\n    transform: \"translate(3.000000, 2.000000)\",\n    strokeWidth: 5\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,59.5725105 L65.4936276,59.5725105 C72.9529911,59.5725105 79,65.6166664 79,73.0725105 L79,73.0725105 C79,80.5283547 72.9529911,86.5725105 65.4936276,86.5725105\",\n    id: \"Path\",\n    stroke: \"#A5A9AA\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M79.3239437,0.57251054 C84.1155973,0.57251054 88,4.37809017 88,9.07251054 L88,9.07251054 C88,13.7669309 84.1155973,17.5725105 79.3239437,17.5725105 L0,17.5725105\",\n    id: \"Path\",\n    stroke: \"#A5A9AA\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M77,40.5725105 L107.487805,40.5725105 C111.084391,40.5725105 114,43.4881196 114,47.0847057 L114,47.0847057 C113.986565,50.6717631 111.074887,53.5725105 107.487805,53.5725105\",\n    id: \"Path\",\n    stroke: \"#B9C1C6\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M42,39.5725105 L62,39.5725105\",\n    id: \"Path\",\n    stroke: \"#A5A9AA\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,39.5725105 L27,39.5725105\",\n    id: \"Path\",\n    stroke: \"#B9C1C6\",\n    fill: \"#D8D8D8\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAirFlow);\nexport default __webpack_public_path__ + \"static/media/airFlow.93b49bb5.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRain(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"142px\",\n    height: \"123px\",\n    viewBox: \"0 0 142 123\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"2682820 - forecast hail rain snow stones storm weather\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"2682820---forecast-hail-rain-snow-stones-storm-weather\",\n    transform: \"translate(4.000000, 4.000000)\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#C4C4C4\",\n    fillRule: \"nonzero\",\n    cx: 124.5,\n    cy: 63.8514002,\n    r: 7.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1,98.3514002 L133,98.3514002\",\n    id: \"Path\",\n    stroke: \"#0D98FF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,113.3514 L108,113.3514\",\n    id: \"Path\",\n    stroke: \"#0D98FF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49,16.3514002 L49,81.3514002 C43.3174639,74.5799058 36.1329484,69.1840349 28,65.579524\",\n    id: \"Path\",\n    stroke: \"#0BAEFF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M83,26.3514002 L83,81.3514002 C83,81.3514002 91.8092933,65.6477466 109,65.59813\",\n    id: \"Path\",\n    stroke: \"#0BAEFF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"#C4C4C4\",\n    fillRule: \"nonzero\",\n    cx: 9.5,\n    cy: 60.8514002,\n    r: 7.5\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66,1.35140018 L66,33.3514002\",\n    id: \"Path\",\n    stroke: \"#0BAEFF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M66,51.3514002 L66,73.3514002\",\n    id: \"Path\",\n    stroke: \"#0BAEFF\",\n    strokeWidth: 10,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRain);\nexport default __webpack_public_path__ + \"static/media/rain.8e10718e.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRefresh(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"104px\",\n    height: \"92px\",\n    viewBox: \"0 0 104 92\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"redo\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"redo\",\n    transform: \"translate(48.500000, 43.500000) scale(1, -1) rotate(73.000000) translate(-48.500000, -43.500000) translate(0.000000, -5.000000)\",\n    fill: \"#979797\",\n    fillRule: \"nonzero\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48.5889819,0 C61.5488468,0.0233510116 73.3155726,5.13031863 82.0029395,13.4324167 L88.9875262,6.44783571 C91.9444617,3.49109819 97,5.58520133 97,9.76675841 L97,35.9839206 C97,38.5761261 94.8986593,40.6774651 92.3064516,40.6774651 L66.0892681,40.6774651 C61.9077077,40.6774651 59.8136028,35.6219309 62.7703427,32.6649979 L70.9351613,24.500186 C64.8992581,18.8485716 57.088998,15.7179774 48.7913911,15.6464008 C30.721621,15.4903405 15.4900786,30.1136653 15.6463347,48.7832166 C15.7945726,66.4937204 30.1529194,81.3548514 48.5,81.3548514 C56.5429819,81.3548514 64.1445746,78.4843578 70.1351069,73.227979 C71.0626694,72.4142357 72.463498,72.4637135 73.3361069,73.3361261 L81.0925867,81.0925996 C82.045377,82.0453892 81.998246,83.5987569 80.9983246,84.5018731 C72.398375,92.2698849 61.0016573,97 48.5,97 C21.7143105,97 0,75.2859027 0,48.5004306 C0,21.7454664 21.833996,-0.0478344144 48.5889819,0 Z\",\n    id: \"Path\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRefresh);\nexport default __webpack_public_path__ + \"static/media/refresh.e352fc8b.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLoading(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"97px\",\n    height: \"91px\",\n    viewBox: \"0 0 97 91\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"loading\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"loading\",\n    transform: \"translate(46.453398, 49.194133) scale(1, -1) rotate(73.000000) translate(-46.453398, -49.194133) translate(4.953398, 0.694133)\",\n    fill: \"#BDBDBD\",\n    fillRule: \"nonzero\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M48.5889819,-0.00046772224 C61.5488468,0.0233510116 73.3155726,5.13031863 82.0029395,13.4324167 L70.9351613,24.500186 C64.8992581,18.8485716 57.088998,15.7179774 48.7913911,15.6464008 C30.721621,15.4903405 15.4900786,30.1136653 15.6463347,48.7832166 C15.7945726,66.4937204 30.1529194,81.3548514 48.5,81.3548514 C56.5429819,81.3548514 64.1445746,78.4843578 70.1351069,73.227979 C71.0626694,72.4142357 72.463498,72.4637135 73.3361069,73.3361261 L81.0925867,81.0925996 C82.045377,82.0453892 81.998246,83.5987569 80.9983246,84.5018731 C72.398375,92.2698849 61.0016573,97 48.5,97 C21.7143105,97 0,75.2859027 0,48.5004306 C0,21.7454664 21.833996,-0.0478344144 48.5889819,-0.00046772224 Z\",\n    id: \"Path\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLoading);\nexport default __webpack_public_path__ + \"static/media/loading.f8d56fd5.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState } from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { ReactComponent as DayCloudyIcon } from './images/day-cloudy.svg';\r\nimport { ReactComponent as AirFlowIcon } from './images/airFlow.svg';\r\nimport { ReactComponent as RainIcon } from './images/rain.svg';\r\nimport { ReactComponent as RefreshIcon } from './images/refresh.svg';\r\nimport { ReactComponent as LoadingIcon } from './images/loading.svg';\r\n\r\nconst Container = styled.div`\r\n  background-color: #ededed;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst WeatherCard = styled.div`\r\n  position: relative;\r\n  // min-width: 360px;\r\n  box-shadow: 0 1px 3px 0 #999999;\r\n  background-color: #f9f9f9;\r\n  box-sizing: border-box;\r\n  padding: 30px 25px;\r\n`;\r\n\r\nconst Location = styled.div`\r\n  font-size: 28px;\r\n  color: #212121;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  font-size: 16px;\r\n  color: #828282;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst CurrentWeather = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Temperature = styled.div`\r\n  color: #757575;\r\n  font-size: 96px;\r\n  font-weight: 300;\r\n  display: flex;\r\n`;\r\n\r\nconst Celsius = styled.div`\r\n  font-weight: normal;\r\n  font-size: 42px;\r\n`;\r\n\r\nconst AirFlow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 16x;\r\n  font-weight: 300;\r\n  color: #828282;\r\n  margin-bottom: 20px;\r\n\r\n  svg {\r\n    width: 25px;\r\n    height: auto;\r\n    margin-right: 30px;\r\n  }\r\n`;\r\n\r\nconst Rain = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 16x;\r\n  font-weight: 300;\r\n  color: #828282;\r\n\r\n  svg {\r\n    width: 25px;\r\n    height: auto;\r\n    margin-right: 30px;\r\n  }\r\n`;\r\n\r\nconst DayCloudy = styled(DayCloudyIcon)`\r\n  flex-basis: 30%;\r\n`;\r\n\r\nconst Refresh = styled.div`\r\n  position: absolute;\r\n  right: 15px;\r\n  bottom: 15px;\r\n  font-size: 12px;\r\n  display: inline-flex;\r\n  align-items: flex-end;\r\n  color: #828282;\r\n\r\n  svg {\r\n    margin-left: 10px;\r\n    width: 15px;\r\n    height: 15px;\r\n    cursor: pointer;\r\n    /* STEP 2：使用 rotate 動畫效果在 svg 圖示上 */\r\n    animation: rotate infinite 1.5s linear;\r\n    animation-duration: ${({ isLoading }) => (isLoading ? '1.5s' : '0s')};\r\n  }\r\n\r\n  /* STEP 1：定義旋轉的動畫效果，並取名為 rotate */\r\n  @keyframes rotate {\r\n    from {\r\n      transform: rotate(360deg);\r\n    }\r\n    to {\r\n      transform: rotate(0deg);\r\n    }\r\n  }\r\n`;\r\n\r\nconst AUTHORIZATION_KEY = 'CWB-9428EFB2-0CCE-4FA9-89FB-82EBBBB1415E';\r\nconst LOCATION_NAME = '臺北';\r\nconst LOCATION_NAME_FORECAST = '臺北市';\r\n\r\nexport default function Weather() {\r\n  const [weatherElements, setWeatherElements] = useState({\r\n    TEMP: '',\r\n    WDSD: '',\r\n    observationTime: new Date().toLocaleTimeString(),\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const setCurrentWeather = async () => {\r\n    setLoading(true);\r\n    const data = await fetchData();\r\n    setWeatherElements({\r\n      ...data,\r\n      observationTime: new Date().toLocaleTimeString(),\r\n    });\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCurrentWeather();\r\n  }, []);\r\n\r\n  // 將取得資料獨立一個函式,之後在有需要的地方再用 async , await 方式設定資料\r\n  const fetchData = () => {\r\n    return fetch(\r\n      `https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=${AUTHORIZATION_KEY}&locationName=${LOCATION_NAME}`\r\n    )\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        const locationData = data.records.location[0];\r\n        const elements = locationData.weatherElement.reduce(\r\n          (neededElements, item) => {\r\n            if (['WDSD', 'TEMP', 'HUMD'].includes(item.elementName)) {\r\n              neededElements[item.elementName] = item.elementValue;\r\n            }\r\n            return neededElements;\r\n          },\r\n          {}\r\n        );\r\n\r\n        return elements;\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* <Container> */}\r\n      <WeatherCard>\r\n        <Location>台南市</Location>\r\n        <Description>多雲時晴</Description>\r\n        <CurrentWeather>\r\n          <Temperature>\r\n            {!loading && Math.round(weatherElements.TEMP)}{' '}\r\n            {!loading && <Celsius>°C</Celsius>}\r\n          </Temperature>\r\n          <DayCloudy />\r\n        </CurrentWeather>\r\n        <AirFlow>\r\n          <AirFlowIcon /> {weatherElements.WDSD} m/h\r\n        </AirFlow>\r\n        <Rain>\r\n          <RainIcon /> 48%\r\n        </Rain>\r\n        <Refresh onClick={setCurrentWeather} isLoading={loading}>\r\n          最後觀測時間：{weatherElements.observationTime}{' '}\r\n          {loading ? <LoadingIcon /> : <RefreshIcon />}\r\n        </Refresh>\r\n      </WeatherCard>\r\n      {/* </Container> */}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nexport default function Calendar() {\r\n  const [activeDate, setActiveDate] = useState();\r\n  return (\r\n    <div>\r\n      <Table celled unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            {Array.from({ length: 7 }, (v, i) => (\r\n              <Table.HeaderCell key={i}>\r\n                星期\r\n                {i < 6 ? i + 1 : '日'}\r\n              </Table.HeaderCell>\r\n            ))}\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {Array.from({ length: 5 }, (v, i) => (\r\n            <Table.Row key={i}>\r\n              {Array.from({ length: 7 }, (v, j) => (\r\n               \r\n               \r\n               <Table.Cell key={j} onClick={()=>setActiveDate(i*7+j+1)} active={activeDate===i*7+j+1} >\r\n                  \r\n                  {i*7+j+1<32?i*7+j+1:''}\r\n                </Table.Cell>\r\n              ))}\r\n\r\n              {/* <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell>\r\n              <Table.Cell>Cell</Table.Cell> */}\r\n            </Table.Row>\r\n          ))}\r\n        </Table.Body>\r\n\r\n        <Table.Footer></Table.Footer>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { db } from '../utils/firebase';\r\nimport { Dropdown, Form } from 'semantic-ui-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport default function CateDropdown({ cate, setCate,placeholder, onChange,label,width, name }) {\r\n  const { currentUser } = useAuth();\r\n  const [rows, setRows] = useState([]);\r\n  const [rowsCopy, setRowsCopy] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n  useEffect(() => {\r\n    db.collection('cates')\r\n      // .limit(10)\r\n      .where('user', '==', currentUser.email)\r\n      .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { text: doc.data().name, value: doc.data().name, key: doc.id };\r\n        });\r\n        // console.log(data);\r\n        setRows(data);\r\n        // setRowsCopy(data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <Form.Select\r\n      value={cate}\r\n      name={name}\r\n      label={label}\r\n      placeholder={placeholder}\r\n      // fluid\r\n      fluid\r\n      width={width}\r\n      // selection\r\n      options={rows}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n// 類別下拉\r\nimport CateDropdown from '../../../components/CateDropdown';\r\n\r\nimport { Form } from 'semantic-ui-react';\r\n\r\nexport default function SearchBar({\r\n  cateQuery,\r\n  searchText,\r\n  setSearchText,\r\n  setRows,\r\n  rowsCopy,\r\n}) {\r\n  return (\r\n    <div>\r\n      <Form unstackable>\r\n        <Form.Group>\r\n          <CateDropdown\r\n          width={8}\r\n          placeholder=\"類別\" onChange={cateQuery} />\r\n          \r\n          <Form.Input\r\n            width={8}\r\n            fluid\r\n            value={searchText}\r\n            placeholder=\"選類別後,在此關鍵字搜尋...\"\r\n            onChange={(e) => {\r\n              setSearchText(e.target.value);\r\n              setRows(\r\n                rowsCopy.filter((row) => row.title.includes(e.target.value))\r\n              );\r\n            }}\r\n          />\r\n        </Form.Group>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Segment, Table, Label, Header } from 'semantic-ui-react';\r\nexport default function DataList({ rows,onDataListRowClick }) {\r\n  return (\r\n    <div>\r\n      {rows.map((row) => {\r\n        return (\r\n          \r\n           \r\n\r\n            <Table unstackable key={row.id}>\r\n              {row.flag && (\r\n                <Table.Header>\r\n                  <Table.Row>\r\n                    <Table.HeaderCell textAlign=\"center\" colSpan=\"2\">\r\n                      {row.s1}\r\n                    </Table.HeaderCell>\r\n                  </Table.Row>\r\n                </Table.Header>\r\n              )}\r\n\r\n              <Table.Body>\r\n                <Table.Row onClick={()=>onDataListRowClick(row)}>\r\n                  <Table.Cell>\r\n                    <Header as=\"h4\">{row.title}</Header>\r\n                    <span>{row.date}</span>\r\n\r\n                    {row.account && <Label>{row.account.name}</Label>}\r\n                    {/* {row.cate && <Label>{row.cate}</Label>} */}\r\n                  </Table.Cell>\r\n                  <Table.Cell textAlign=\"right\">\r\n                    {row.income ? (\r\n                      <Label color=\"teal\" circular>\r\n                        存\r\n                      </Label>\r\n                    ) : (\r\n                      <Label color=\"orange\" circular>\r\n                        提\r\n                      </Label>\r\n                    )}\r\n                    <br></br>$ {row.income ? row.income : row.expense + ''}\r\n                  </Table.Cell>\r\n                </Table.Row>\r\n              </Table.Body>\r\n            </Table>\r\n         \r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Form } from 'semantic-ui-react';\r\nimport AccountDropdown from '../../../components/AccountDropdown';\r\nimport CateDropdown from '../../../components/CateDropdown';\r\n\r\nexport default function EditForm({ editedRow, setEditedRow }) {\r\n  const handleDropdownChange = (e, obj) => {\r\n    setEditedRow({ ...editedRow, [obj.name]: obj.value });\r\n  };\r\n\r\n  // 帳戶下拉切換\r\n  const handleAccountChange = (e, obj) => {\r\n    // 更新編輯列中的 account 物件的 name 屬性\r\n    setEditedRow({\r\n      ...editedRow,\r\n      account: { ...editedRow.account, name: obj.value },\r\n    });\r\n  };\r\n\r\n  // 表單輸入時,設定 item 的值\r\n  const handleChange = (e) => {\r\n    setEditedRow({ ...editedRow, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form unstackable>\r\n        <Form.Field>\r\n          <label>日期</label>\r\n          <input\r\n            name=\"date\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            value={editedRow.date}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n\r\n        <AccountDropdown\r\n          label=\"帳戶\"\r\n          name=\"account\"\r\n          account={editedRow?.account.name}\r\n          onChange={handleAccountChange}\r\n        />\r\n\r\n        <CateDropdown\r\n          name=\"cate\"\r\n          cate={editedRow?.cate}\r\n          label=\"類別\"\r\n          onChange={handleDropdownChange}\r\n        />\r\n        <Form.Input name=\"title\"   onChange={handleChange} value={editedRow?.title} label=\"項目\" />\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\n\r\n// 查詢列\r\nimport SearchBar from './components/SearchBar';\r\n\r\n// firebase\r\nimport { db } from '../../utils/firebase';\r\n\r\n// 使用者登入相關\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n// 資料顯示\r\nimport DataList from './components/DataList';\r\n\r\n// UI\r\nimport { Modal, Button } from 'semantic-ui-react';\r\n\r\nimport EditForm from './components/EditForm';\r\n\r\nexport default function Query() {\r\n  // 目前登入使用者\r\n  const { currentUser } = useAuth();\r\n  // 資料列\r\n  const [rows, setRows] = useState([]);\r\n\r\n  const [defaultItem, SetDefaultItem] = useState({\r\n    cate: '',\r\n    title: '',\r\n    income: '',\r\n    expense: '',\r\n  });\r\n\r\n  // 編輯列資料\r\n  const [editedRow, setEditedRow] = useState(defaultItem);\r\n\r\n  // 編輯視窗開關\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n\r\n  // 關鍵字搜尋(目前還沒研究如何直接從 firebase 做關鍵字搜尋,\r\n  // 所以先用類別從遠端載入資料,複製一份在本端做為搜尋用)\r\n  const [rowsCopy, setRowsCopy] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  useEffect(() => {\r\n    // cateQuery();\r\n  }, []);\r\n  const cateQuery = (e, obj) => {\r\n    db.collection('balances')\r\n      .orderBy('date', 'desc')\r\n      .where('user', '==', currentUser.email)\r\n      // .where('cate', '==', '洗牙')\r\n      .where('cate', '==', obj.value)\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n       \r\n\r\n     \r\n\r\n\r\n        // 處理日期,取得日期的年月比對,不同的話設定 flag 為 true\r\n        // 在顯示資料時, flag 為 true 才將年月顯示在標題列\r\n        const newRows = data.slice();\r\n        newRows.map((row, index) => {\r\n          let s1 = newRows[index].date.substring(0, 7);\r\n          let s2 = '';\r\n          if (index > 0) {\r\n            s2 = newRows[index - 1].date.substring(0, 7);\r\n          }\r\n\r\n          let flag = false;\r\n          if (s1 != s2) {\r\n            flag = true;\r\n          }\r\n\r\n          let newRow = { ...row, s1, s2, flag };\r\n          newRows[index] = newRow;\r\n        });\r\n\r\n        setRows(newRows);\r\n        setRowsCopy(newRows);\r\n        // console.log(newRows);\r\n      });\r\n  };\r\n\r\n  const handleDataListRowClick = (row) => {\r\n    setOpen(true);\r\n    console.log(row);\r\n\r\n    // 原始資料可能只有支出或收入,在欄位 onChange 時,會出現錯誤,在 defaultItem 有包含全部預設值\r\n    // 一併設定給 editedRow , 即可解決\r\n    setEditedRow({ ...defaultItem, ...row });\r\n  };\r\n\r\n  // 儲存\r\n  const saveRow = () => {\r\n    console.log(editedRow);\r\n    // setLoading(true);\r\n    const accountName= editedRow.account.name\r\n    // return;\r\n    db.collection('balances')\r\n      .doc(editedRow.id)\r\n      // 帳戶欄位是以物件型態儲存,更新寫法和一般欄位有所差異\r\n      // 更新 account 物件的  name 屬性\r\n      .update({...editedRow,account:{...editedRow.account,name:accountName}})\r\n      // .update(editedRow)\r\n      .then(() => {\r\n        // Object.assign(rows[editedIndex], editedRow);\r\n        // setLoading(false);\r\n        setOpen(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SearchBar cateQuery={cateQuery} searchText={searchText} \r\n      setSearchText={setSearchText} setRows={setRows} rowsCopy={rowsCopy}\r\n      />\r\n      <br/>\r\n      <DataList rows={rows} onDataListRowClick={handleDataListRowClick} />\r\n\r\n      <Modal\r\n        open={open}\r\n        closeIcon\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n      >\r\n        <Modal.Header>編輯</Modal.Header>\r\n        <Modal.Content>\r\n          <EditForm editedRow={editedRow} setEditedRow={setEditedRow} />\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color=\"teal\" onClick={saveRow}>\r\n            儲存\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      {/* <TableRow rows={rows}/> */}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { Form, Button, Checkbox } from 'semantic-ui-react';\r\n\r\nexport default function EditForm({\r\n  rows,\r\n  setRows,\r\n  row,\r\n  setRow,\r\n  saveRow,\r\n  loading,\r\n}) {\r\n  useEffect(() => {}, []);\r\n\r\n  // 輸入資料時同時設定 row\r\n  const inputChange = (e) => {\r\n    setRow({ ...row, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form>\r\n        <Form.Field>\r\n          <label>期數</label>\r\n          <input\r\n            type=\"number\"\r\n            value={row.section}\r\n            onChange={inputChange}\r\n            name=\"section\"\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <label>日期</label>\r\n          <input\r\n            type=\"date\"\r\n            value={row.consumeDate}\r\n            placeholder=\"\"\r\n            onChange={inputChange}\r\n            name=\"consumeDate\"\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <label>項目</label>\r\n          <input\r\n            placeholder=\"\"\r\n            value={row.note}\r\n            onChange={inputChange}\r\n            name=\"note\"\r\n          />\r\n        </Form.Field>\r\n\r\n        <Form.Field>\r\n          <label>金額</label>\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"\"\r\n            value={row.amt}\r\n            onChange={inputChange}\r\n            name=\"amt\"\r\n          />\r\n        </Form.Field>\r\n\r\n        <Button primary fluid loading={loading} type=\"submit\" onClick={saveRow}>\r\n          儲存\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Button, Header, Statistic, Segment } from 'semantic-ui-react';\r\nimport numberFormat from '../../../utils/numberFormat';\r\n\r\nexport default function Dashboard({ rows }) {\r\n  const [total, setTotal] = useState(0);\r\n  // 計算加總\r\n  const calTotal = () => {\r\n    let sum = 0;\r\n    rows.map((row) => {\r\n      sum += Number(row.amt);\r\n    });\r\n    setTotal(sum);\r\n  };\r\n\r\n  // 資料有變動就重新計算\r\n  useEffect(() => {\r\n    calTotal();\r\n  }, [rows]);\r\n\r\n  return (\r\n    <>\r\n      <Segment textAlign=\"center\">\r\n        <Statistic color=\"blue\">\r\n          <Statistic.Value>{numberFormat(total)}</Statistic.Value>\r\n        </Statistic>\r\n      </Segment>\r\n     \r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Dropdown } from 'semantic-ui-react';\r\nimport { useEffect, useState } from 'react';\r\nimport { db } from '../../../utils/firebase';\r\n\r\nexport default function SectionDropdown({ filter, handleSectionChange }) {\r\n  // 編輯列\r\n  const [rows, setRows] = useState([]);\r\n\r\n  // firebase 集合\r\n  const dbCol = db.collection('sections');\r\n\r\n  // 取得資料\r\n  useEffect(() => {\r\n    dbCol.orderBy('section','desc').get().then((snapshot) => {\r\n      let data = snapshot.docs.map((doc) => {\r\n        return {\r\n          key: doc.id,\r\n          text: doc.data().section,\r\n          value: doc.data().section,\r\n        };\r\n      });\r\n\r\n\r\n      \r\n    \r\n\r\n      setRows(data);\r\n    });\r\n  }, []);\r\n\r\n  // const friendOptions = [\r\n  //   {\r\n  //     key: '11201',\r\n  //     text: '11201',\r\n  //     value: '11201',\r\n  //   },\r\n\r\n  //   {\r\n  //     key: '11112',\r\n  //     text: '11112',\r\n  //     value: '11112',\r\n  //   },\r\n  // ];\r\n\r\n  return (\r\n    <div>\r\n      <Dropdown\r\n        clearable\r\n        onChange={handleSectionChange}\r\n        value={filter.section}\r\n        // placeholder=\"Select Friend\"\r\n        fluid\r\n        selection\r\n        options={rows}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Button, Header, Form, Modal, Input } from 'semantic-ui-react';\r\nimport EditForm from './EditForm';\r\nimport SectionDropdown from './SectionDropdown';\r\n\r\nexport default function SearchBar({\r\n  open,\r\n  setOpen,\r\n  rows,\r\n  setRows,\r\n  filter,\r\n  handleFilter,\r\n  handleInputChange,\r\n  handleSectionChange\r\n}) {\r\n  return (\r\n    <div>\r\n      <Modal\r\n        onClose={() => setOpen(false)}\r\n        onOpen={() => setOpen(true)}\r\n        open={open}\r\n        closeIcon\r\n        // trigger={<Button>搜尋</Button>}\r\n      >\r\n        <Modal.Header>篩選表單</Modal.Header>\r\n        <Modal.Content>\r\n          <Form>\r\n            <Form.Field>\r\n              <label>項目</label>\r\n\r\n              <Input\r\n                value={filter.note}\r\n                // placeholder=\"note\"\r\n                onChange={handleInputChange}\r\n                name=\"note\"\r\n                size=\"small\"\r\n              />\r\n            </Form.Field>\r\n            <Form.Field>\r\n              <label>期數</label>\r\n              <SectionDropdown filter={filter} handleSectionChange={handleSectionChange} />  \r\n            </Form.Field>\r\n\r\n           \r\n            <Button onClick={handleFilter}>篩選</Button>\r\n          </Form>\r\n\r\n       \r\n          {/* <Input\r\n            value={filter.section}\r\n            onChange={handleInputChange}\r\n            name=\"section\"\r\n            size=\"small\"\r\n          /> */}\r\n         \r\n        </Modal.Content>\r\n        <Modal.Actions></Modal.Actions>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Table, Header, Label } from 'semantic-ui-react';\r\nexport default function DataList({ rows, editRow }) {\r\n  return (\r\n    <div>\r\n      <Table unstackable>\r\n        <Table.Body>\r\n          {rows.map((row, index) => {\r\n            return (\r\n              <Table.Row key={row.id} onClick={() => editRow(row, index)}>\r\n                <Table.Cell>\r\n                  <Header as=\"h4\">{row.note}</Header>\r\n                  <span>{row.consumeDate} </span>\r\n                </Table.Cell>\r\n                <Table.Cell textAlign=\"right\">\r\n                  <Label  basic color='teal'>\r\n                    {row.section}\r\n                  </Label>\r\n                  {/* <Label color=\"teal\" basic>\r\n                    ${row.amt}\r\n                  </Label> */}\r\n                  {/* ${row.amt} */}\r\n                </Table.Cell>\r\n                <Table.Cell>\r\n                ${row.amt}\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Button, Header, Image, Modal } from 'semantic-ui-react';\r\nimport EditForm from './EditForm';\r\n\r\nexport default function ModalForm({\r\n  open,\r\n  setOpen,\r\n  rows,\r\n  setRows,\r\n  row,\r\n  setRow,\r\n  saveRow,\r\n  deleteRow,\r\n  loading\r\n}) {\r\n  // const [open, setOpen] = React.useState(false)\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        onClose={() => setOpen(false)}\r\n        onOpen={() => setOpen(true)}\r\n        open={open}\r\n        closeIcon\r\n        \r\n      >\r\n        <Modal.Header>編輯</Modal.Header>\r\n        <Modal.Content>\r\n          <EditForm\r\n            rows={rows}\r\n            setRows={setRows}\r\n            row={row}\r\n            setRow={setRow}\r\n            saveRow={saveRow}\r\n            loading={loading}\r\n          />\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button floated='left' color=\"black\" loading={loading} onClick={() => deleteRow(row)}>\r\n            刪除\r\n          </Button>\r\n         \r\n        </Modal.Actions>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { db } from '../../utils/firebase';\r\nimport List from './components/List';\r\nimport EditForm from './components/EditForm';\r\nimport Dashboard from './components/Dashboard';\r\nimport SearchBar from './components/SearchBar';\r\nimport DataList from './components/DataList';\r\nimport ModalForm from './components/ModalForm';\r\n\r\nimport {\r\n  Container,\r\n  Button,\r\n  Divider,\r\n  Icon,\r\n  Input,\r\n  Segment,\r\n} from 'semantic-ui-react';\r\n\r\nexport default function Index() {\r\n  // 編輯表單開關\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // 篩選表單開關\r\n  const [openSearch, setOpenSearch] = useState(false);\r\n\r\n  // 載入中\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // 資料集合\r\n  const [rows, setRows] = useState([]);\r\n\r\n  const [rowsCopy, setRowsCopy] = useState([]);\r\n\r\n  // 編輯列索引\r\n  const [editRowIndex, setEditRowIndex] = useState(-1);\r\n\r\n  // 當期數\r\n  const [activeSection, setActiveSection] = useState('');\r\n\r\n  // 表單預設值\r\n  const defalutItem = {\r\n    consumeDate: new Date().toISOString().slice(0, 10),\r\n    note: '',\r\n    amt: '',\r\n    section: activeSection,\r\n  };\r\n\r\n  // 編輯列\r\n  const [row, setRow] = useState(defalutItem);\r\n\r\n  // firebase 集合\r\n  const dbCol = db.collection('credits');\r\n\r\n  // 排序\r\n  const [direction, setDirection] = useState('acending');\r\n  const [column, setColumn] = useState('');\r\n\r\n  // 篩選\r\n  const [filterText, setFilterText] = useState('');\r\n  const [filterSection, setFilterSection] = useState(activeSection);\r\n\r\n  const [filter, setFilter] = useState({\r\n    section: activeSection,\r\n  });\r\n\r\n  // 取得資料\r\n  useEffect(() => {\r\n    // 取得最新期數\r\n    db.collection('sections')\r\n      .orderBy('section', 'desc')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const section = snapshot.docs[0].data().section;\r\n        setActiveSection(section);\r\n\r\n        dbCol.get().then((snapshot) => {\r\n          const data = snapshot.docs.map((doc) => {\r\n            return { ...doc.data(), id: doc.id };\r\n          });\r\n          setRows(data);\r\n          setRowsCopy(data);\r\n\r\n          // 預設載入當期資料\r\n          const newData = data.slice().filter((row) => row.section == section);\r\n          setRows(newData);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  // 排序\r\n  const sortData = (data, column) => {\r\n    data = data.slice().sort(function (a, b) {\r\n      if (column == 'date') return a.consumeDate > b.consumeDate ? 1 : -1;\r\n      if (column == 'amt') return a.amt * 1 > b.amt * 1 ? 1 : -1;\r\n    });\r\n    if (direction == 'decending') data.reverse();\r\n    setRows(data);\r\n    // 遞增遞減\r\n    if (direction == 'acending') setDirection('decending');\r\n    if (direction == 'decending') setDirection('acending');\r\n  };\r\n\r\n  // 每筆資料和條件比對,只要不符合就排除\r\n  // 參考https://stackoverflow.com/questions/31831651/javascript-filter-array-multiple-conditions\r\n\r\n  // 篩選\r\n  const handleInputChange = (e) => {\r\n    // const key = e.target.name;\r\n\r\n    // setFilter({ ...filter, [e.target.name]: e.target.value });\r\n    if (e.target.value == '') {\r\n      setFilter((current) => {\r\n        // remove cost key from object\r\n        // const { 某個屬性值 : 新的變數名, ...其餘的屬性 } = current\r\n        // 將目前 current 物件中的某個屬性值獨立為一個變數\r\n        // 然後物件其他的屬性值指派給新的物件變數\r\n        const { [e.target.name]: noUse, ...rest } = current;\r\n        // 傳回 rest ,就沒有包含 section 屬性\r\n        return rest;\r\n      });\r\n    } else {\r\n      setFilter({ ...filter, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSectionChange = (e, obj) => {\r\n    setFilter({ ...filter, section: obj.value });\r\n  };\r\n\r\n  const handleFilter = () => {\r\n    let newData = rowsCopy;\r\n\r\n    newData = newData.filter((row) => {\r\n      for (let key in filter) {\r\n        // 值有可能空,加上?判斷\r\n        if (!row[key]?.includes(filter[key])) return false;\r\n      }\r\n      return true;\r\n    });\r\n    setRows(newData);\r\n\r\n    // 關閉篩選表單\r\n    setOpenSearch(false);\r\n\r\n    console.log(filter);\r\n    console.log(newData);\r\n  };\r\n\r\n  // 儲存(新增或更新)\r\n  const saveRow = () => {\r\n    setLoading(true);\r\n    // 更新\r\n    if (editRowIndex > -1) {\r\n      dbCol\r\n        .doc(row.id)\r\n        .update(row)\r\n        .then(() => {\r\n          const newRows = rows.slice();\r\n          Object.assign(newRows[editRowIndex], row);\r\n          setRows(newRows);\r\n          setRowsCopy(newRows);\r\n          // 設為初始值\r\n          setRow(defalutItem);\r\n          setEditRowIndex(-1);\r\n          setOpen(false);\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      // 新增\r\n      dbCol.add(row).then((doc) => {\r\n        const newRows = rows.slice();\r\n        newRows.unshift({ ...row, id: doc.id });\r\n        // 將資料加到表格中,包含剛新增的id,做為刪除之用\r\n        // setRows([...rows, { ...row, id: doc.id }]);\r\n        setRows(newRows);\r\n        // setRowsCopy(newRows);\r\n        // console.log(rowsCopy)\r\n        // 設為初始值\r\n        setRow(defalutItem);\r\n        setEditRowIndex(-1);\r\n        setOpen(false);\r\n        setLoading(false);\r\n        // console.log(newRows)\r\n      });\r\n    }\r\n  };\r\n\r\n  // 刪除\r\n  const deleteRow = (row) => {\r\n    setLoading(true);\r\n    dbCol\r\n      .doc(row.id)\r\n      .delete()\r\n      .then(() => {\r\n        const newRows = rows.slice();\r\n        newRows.splice(editRowIndex, 1);\r\n        setRows(newRows);\r\n        setRowsCopy(newRows);\r\n        setOpen(false);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  // 編輯(設定索引和編輯列)\r\n  const editRow = (row, index) => {\r\n    setEditRowIndex(index);\r\n    setRow(row);\r\n    setOpen(true);\r\n  };\r\n\r\n  // 新增一筆\r\n  const newRow = () => {\r\n    setEditRowIndex(-1);\r\n    setRow(defalutItem);\r\n    setOpen(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container>\r\n        {/* <EditForm\r\n          rows={rows}\r\n          setRows={setRows}\r\n          row={row}\r\n          setRow={setRow}\r\n          saveRow={saveRow}\r\n        /> */}\r\n\r\n        <Divider horizontal>\r\n          信用卡 {filter.section ? filter.section : activeSection}\r\n        </Divider>\r\n        <Button onClick={newRow} color=\"teal\">\r\n          <Icon name=\"plus\" />\r\n          新增\r\n        </Button>\r\n\r\n        <Button onClick={() => setOpenSearch(true)}>\r\n          <Icon name=\"search\" />\r\n          搜尋\r\n        </Button>\r\n\r\n        <SearchBar\r\n          open={openSearch}\r\n          setOpen={setOpenSearch}\r\n          handleFilter={handleFilter}\r\n          handleInputChange={handleInputChange}\r\n          handleSectionChange={handleSectionChange}\r\n          filter={filter}\r\n        />\r\n\r\n        {/* <Button onClick={handleFilter}>篩選</Button> */}\r\n\r\n        <ModalForm\r\n          open={open}\r\n          setOpen={setOpen}\r\n          rows={rows}\r\n          setRows={setRows}\r\n          row={row}\r\n          setRow={setRow}\r\n          saveRow={saveRow}\r\n          deleteRow={deleteRow}\r\n          loading={loading}\r\n        />\r\n\r\n        <Dashboard rows={rows} />\r\n\r\n        <Segment>\r\n          <Button\r\n            icon\r\n            onClick={() => {\r\n              setColumn('date');\r\n              sortData(rows, 'date');\r\n            }}\r\n          >\r\n            日期\r\n            {direction == 'decending' && column == 'date' && (\r\n              <Icon name=\"angle up\" />\r\n            )}\r\n            {direction == 'acending' && column == 'date' && (\r\n              <Icon name=\"angle down\" />\r\n            )}\r\n          </Button>\r\n\r\n          <Button\r\n            icon\r\n            onClick={() => {\r\n              setColumn('amt');\r\n              sortData(rows, 'amt');\r\n            }}\r\n          >\r\n            金額\r\n            {direction == 'decending' && column == 'amt' && (\r\n              <Icon name=\"angle up\" />\r\n            )}\r\n            {direction == 'acending' && column == 'amt' && (\r\n              <Icon name=\"angle down\" />\r\n            )}\r\n          </Button>\r\n\r\n          {/* <Input placeholder=\"note\" onChange={handleInputChange} name=\"note\" size=\"small\" /> */}\r\n          {/* <Input onChange={handleInputChange} name=\"section\" size=\"small\" /> */}\r\n        </Segment>\r\n\r\n        <DataList rows={rows} editRow={editRow} />\r\n\r\n        {/* <Modal rows={rows} editRow={editRow}/> */}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import { Table } from 'semantic-ui-react';\r\nimport { Link } from 'react-router-dom';\r\nexport default function List({ rows, schema }) {\r\n  return (\r\n    <>\r\n      <Table unstackable>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            {/* 標題列 */}\r\n            {schema.map((header, i) => {\r\n              return <Table.HeaderCell key={i}>{header.text}</Table.HeaderCell>;\r\n            })}\r\n            <Table.HeaderCell>#</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {/* 資料列 */}\r\n          {rows.map((row, i) => {\r\n            return (\r\n              <tr key={i}>\r\n                {/* 資料欄 */}\r\n                {schema.map((obj, i) => {\r\n                  return <td key={i}>{row[obj.name]}</td>;\r\n                })}\r\n\r\n                <td>\r\n                <Link to={`/cates-note/edit/${row.id}`}>Edit</Link>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </Table.Body>\r\n      </Table>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport List from './components/List';\r\n\r\nimport { Button } from 'semantic-ui-react';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { db } from '../../utils/firebase';\r\n\r\n\r\nexport default function index() {\r\n\r\n  const schema = [\r\n    {\r\n      name: 'name',\r\n      text: '名稱',\r\n      type: 'text',\r\n    },\r\n    {\r\n      name: 'prior',\r\n      text: '順序',\r\n      type: 'number',\r\n    },\r\n  ];\r\n\r\n\r\n  // 登入使用者\r\n  const { currentUser } = useAuth();\r\n  // 資料\r\n  const [rows, setRows] = useState([]);\r\n  // 設定資料\r\n  useEffect(() => {\r\n    db.collection('catesNote')\r\n      .where('user', '==', currentUser.email)\r\n      // .orderBy('prior')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return { ...doc.data(), id: doc.id };\r\n        });\r\n        setRows(data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <div>\r\n       <Link to={`/cates-note/insert`}>新增</Link>\r\n      <List rows={rows} schema={schema}/>\r\n      </div>\r\n  )\r\n}\r\n","import { useHistory, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../../../contexts/AuthContext';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { db } from '../../../utils/firebase';\r\n\r\nimport { Form, Button } from 'semantic-ui-react';\r\n\r\nexport default function EditCate() {\r\n  const { currentUser } = useAuth();\r\n  const history = useHistory();\r\n  const { id } = useParams();\r\n\r\n  const defalutItem = {\r\n    name: '',\r\n    prior: '',\r\n  };\r\n\r\n  const dbCol = db.collection('catesNote');\r\n  const [item, setItem] = useState(defalutItem);\r\n\r\n  const [loading,setLoading]=useState(false)\r\n  useEffect(() => {\r\n  \r\n    var docRef = dbCol.doc(id);\r\n\r\n    docRef\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists) {\r\n          setItem(doc.data());\r\n          console.log('Document data:', doc.data());\r\n        } else {\r\n          // doc.data() will be undefined in this case\r\n          console.log('No such document!');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error getting document:', error);\r\n      });\r\n  }, []);\r\n\r\n  // 表單輸入時,設定 item 的值\r\n  const handleChange = (e) => {\r\n    setItem({ ...item, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    setLoading(true)\r\n    if (id) {\r\n      // 將順序從文字轉成數字,排序看起來才會正常\r\n      var docRef = dbCol.doc(id);\r\n      docRef.update({ ...item, prior: Number(item.prior) }).then(() => {\r\n        setLoading(false)\r\n        history.push('/cates-note');\r\n      });\r\n    } else {\r\n      dbCol\r\n        .add({ ...item, prior: Number(item.prior), user: currentUser.email })\r\n        .then(() => {\r\n          setLoading(false)\r\n          history.push('/cates-note');\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form onSubmit={handleSave}>\r\n        <Form.Field>\r\n          <label>名稱</label>\r\n          <input\r\n            name=\"name\"\r\n            placeholder=\"\"\r\n            value={item.name}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <label>順序</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"prior\"\r\n            placeholder=\"\"\r\n            value={item.prior}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Field>\r\n\r\n        <Button type=\"submit\" primary loading={loading}>\r\n          Save\r\n        </Button>\r\n      </Form>\r\n      {/* <div>{JSON.stringify(item)}</div> */}\r\n    </>\r\n\r\n    // <div>{id}</div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Table } from 'semantic-ui-react';\r\n\r\nexport default function index() {\r\n  const [rows,setRows]=useState([]);\r\n  const url = 'http://localhost:8888/money2022mysql/select.php';\r\n  useEffect(()=>{\r\n    axios.get(url).then((res) => {\r\n      setRows(res.data)\r\n      console.log(res.data);\r\n    });\r\n  },[])\r\n  \r\n  return (\r\n    <div>\r\n      <Table celled>\r\n        <Table.Header>\r\n          <Table.Row>\r\n            <Table.HeaderCell>id</Table.HeaderCell>\r\n            <Table.HeaderCell>note_date</Table.HeaderCell>\r\n            <Table.HeaderCell>title</Table.HeaderCell>\r\n          </Table.Row>\r\n        </Table.Header>\r\n\r\n        <Table.Body>\r\n          {rows.map(row=>{\r\n            return  (\r\n              <Table.Row key={row.id}>\r\n              <Table.Cell>{row.id}</Table.Cell>\r\n              <Table.Cell>{row.note_date}</Table.Cell>\r\n              <Table.Cell>{row.title}</Table.Cell>\r\n            </Table.Row>\r\n            )\r\n          })}\r\n         \r\n        </Table.Body>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import {useState,useEffect} from 'react';\r\n\r\nimport { Divider, Label, Segment } from 'semantic-ui-react';\r\nimport { db } from '../utils/firebase';\r\n\r\nexport default function Demo() {\r\n\r\n  const [rows, setRows] = useState([]);\r\n  useEffect(() => {\r\n    db.collection('accounts')\r\n      .get()\r\n      .then((snapshot) => {\r\n        const data = snapshot.docs.map((doc) => {\r\n          return doc.data();\r\n        });\r\n        console.log(data)\r\n        setRows(data);\r\n      });\r\n  }, []);\r\n\r\n\r\n  const numbers = [0, 0, 0, 0, 0, 0, 1, 1, 1, 1];\r\n  // const numbers2 = [0, 0, 0, 0, 'B', 0, 1, 1, 1, 1];\r\n  return (\r\n    <div>\r\n      {rows[0].balance}\r\n      <Segment>\r\n        有二個富翁,想比較誰的財富多,又不想讓對方知道自己的真實財產數字\r\n      </Segment>\r\n      假設 A和B的財富是介於1~10\r\n      <br />\r\n      A先準備10個箱子 假設 A 的財富是 7\r\n      ,就在前面6個箱子填入0,之後箱子都填入1,如下所示\r\n      <Divider />\r\n      {numbers.map((num) => {\r\n        return (\r\n          <Label basic color=\"pink\" size=\"large\">\r\n            {num}\r\n          </Label>\r\n        );\r\n      })}\r\n      <Divider />\r\n      接下來由B選擇對應自己財富數字的箱子,假設是4,就會選到由左算來第4個箱子\r\n      <Divider />\r\n      {numbers.map((num, i) => {\r\n        if (i == 3) {\r\n          return (\r\n            <Label color=\"pink\" size=\"large\">\r\n              {num}\r\n            </Label>\r\n          );\r\n        }\r\n        return (\r\n          <Label basic color=\"pink\" size=\"large\">\r\n            {num}\r\n          </Label>\r\n        );\r\n      })}\r\n      <Divider />\r\n      然後將其他箱子丟掉,只留下這個箱子\r\n      <Label color=\"pink\" size=\"large\">\r\n        ?\r\n      </Label>\r\n      <br/>\r\n      \r\n      <Divider />\r\n      接下來由A將這個箱子打開,看到 0 的話,代表B財富小於A\r\n      <br/>看到 1 的話,代表 B 財富大於等於 A\r\n      <Segment>\r\n      因為 A 不知道 B 選了那個箱子, B也不知道從那個箱子開始由 0 變 1,所以就可以完成零知識證明\r\n      </Segment>\r\n    </div>\r\n  );\r\n}\r\n","import Accounts from './Accounts';\r\n// import Cates from '../components/Cates'\r\nimport Cates from '../pages/Cates';\r\nimport TicTacToe from './TicTacToe';\r\nimport Balances from '../pages/Balances';\r\nimport EditCate from '../pages/Cates/components/EditCate';\r\n// import Balances from './Balances';\r\n\r\nimport Stocks from '../pages/Stocks';\r\nimport Trans from '../pages/Trans';\r\n\r\nimport Books from './Books';\r\n\r\nimport ContactList from '../demo/contacts/ContactList';\r\nimport ViewContact from '../demo/contacts/ViewContact';\r\nimport AddContact from '../demo/contacts/AddContact';\r\n\r\nimport Login from './Login';\r\n\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport PrivateRoute from './PrivateRoute';\r\n\r\nimport {\r\n  BrowserRouter,\r\n  Route,\r\n  Link,\r\n  Switch,\r\n  useHistory,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport Dashboard from './Dashboard';\r\nimport Food from '../pages/Food';\r\nimport Balances2 from '../pages/Balances2/Balances2';\r\n\r\nimport EmpBasic from './EmpBasic';\r\n\r\nimport Scores from '../pages/Scores/Scores';\r\nimport School from '../pages/School';\r\n\r\nimport Mortgages from '../pages/Mortgages/Mortgages';\r\n\r\nimport Weather from '../pages/Weather/Weather';\r\nimport Calendar from '../pages/Calendar/Calendar';\r\n\r\nimport Query from '../pages/Dashboard/Query';\r\n\r\nimport EditForm from '../pages/Food/component/EditForm';\r\n\r\nimport Cart from '../pages/Food/component/Cart';\r\n\r\n\r\nimport Credits from '../pages/Credits';\r\n\r\n\r\n// 記事類別\r\nimport CatesNote from '../pages/CatesNote';\r\nimport EditCatesNote from '../pages/CatesNote/components/EditCate';\r\n// import Dashboard from './Dashboard'\r\n\r\n\r\nimport Minisoft from '../pages/Minisoft'\r\n\r\nimport Demo from './Demo';\r\nexport default function Routes() {\r\n  const { currentUser } = useAuth();\r\n  return (\r\n    <Switch>\r\n      <Route path=\"/minisoft\" exact component={Minisoft} />\r\n      <Route path=\"/credits\" exact component={Credits} />\r\n      <Route path=\"/trans\" exact component={Trans} />\r\n      <Route path=\"/demo\" exact component={Demo} />\r\n      <Route path=\"/prod/:id\" exact component={EditForm} />\r\n      <Route path=\"/cart\" exact component={Cart} />\r\n      <Route path=\"/food\" exact component={Food} />\r\n      <Route path=\"/dashboard\" exact component={Dashboard} />\r\n      <Route path=\"/dashboard/query\" exact component={Query} />\r\n      <Route path=\"/calendar\" exact component={Calendar} />\r\n      <Route path=\"/weather\" exact component={Weather} />\r\n      <Route path=\"/mortgages\" exact component={Mortgages} />\r\n      <Route path=\"/scores\" exact component={Scores} />\r\n      <Route path=\"/school\" exact component={School} />\r\n      <Route path=\"/balances2\" exact component={Balances2} />\r\n      <Route path=\"/accounts\">\r\n        <Accounts />\r\n      </Route>\r\n\r\n      {/* 記事類別 */}\r\n      <Route path=\"/cates-note\" exact component={CatesNote} />\r\n      <Route path={'/cates-note/insert'} exact component={EditCatesNote} />\r\n      <Route path={'/cates-note/edit/:id'} exact component={EditCatesNote} />\r\n\r\n      <Route path=\"/emp-basic\" exact component={EmpBasic} />\r\n\r\n      {/* 類別 */}\r\n      <Route path=\"/cates\" exact component={Cates} />\r\n      <Route path={'/cates/edit/:id'} exact component={EditCate} />\r\n      <Route path={'/cates/insert'} exact component={EditCate} />\r\n\r\n      <Route path=\"/tictactoe\" component={TicTacToe} />\r\n      {/* <Route path=\"/balances\" component={Balances} /> */}\r\n      <PrivateRoute path=\"/balances\" exact component={Balances} />\r\n      {/* <Route path=\"/balances\">\r\n      {currentUser?<Balances/>:<Redirect to=\"login\" />}     \r\n      </Route> */}\r\n\r\n      <PrivateRoute path=\"/stocks\" component={Stocks} />\r\n      <Route path=\"/books\" component={Books} />\r\n\r\n      <Route path=\"/login\" exact component={Login} />\r\n      <Route path=\"/\" exact component={Balances} />\r\n      <PrivateRoute path=\"/dashboard\" exact component={Dashboard} />\r\n\r\n      <Route path=\"/contacts\" exact component={ContactList} />\r\n\r\n      <Route path=\"/contacts/add\" exact component={AddContact} />\r\n\r\n      <Route path={'/contacts/view/:contactId'} exact component={ViewContact} />\r\n\r\n      <Route path={'/contacts/edit/:contactId'} exact component={AddContact} />\r\n    </Switch>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport Routes from './components/Routes';\r\nimport { Container } from 'semantic-ui-react';\r\nimport {\r\n  BrowserRouter,\r\n  Route,\r\n  Link,\r\n  Switch,\r\n  useHistory,\r\n  Redirect,\r\n} from 'react-router-dom';\r\n\r\nimport { AuthProvider } from './contexts/AuthContext';\r\n\r\n// import { AuthProvider } from '../contexts/AuthContext';\r\n\r\nimport ContactList from './demo/contacts/ContactList';\r\nimport CrudForm from './components/template/CrudForm';\r\n\r\nimport Spinner from './components/Spinner';\r\n\r\nimport Login from './pages/Login';\r\n\r\nexport default function App() {\r\n  // React.useEffect(()=>{\r\n  //   db.collection('accounts').add({name:'abc'})\r\n  // },[])\r\n  return (\r\n    <>\r\n      {/* <Login/> */}\r\n      {/* <Spinner/> */}\r\n      {/* <CrudForm/> */}\r\n\r\n      <AuthProvider>\r\n        <BrowserRouter>\r\n          <Header></Header>\r\n\r\n          {/* 路由 */}\r\n          <Container>          \r\n\r\n            <Routes />\r\n          </Container>\r\n        </BrowserRouter>\r\n      </AuthProvider>\r\n    </>\r\n  );\r\n}\r\n","import ReactDom from 'react-dom'\r\nimport App from './App';\r\nimport 'semantic-ui-css/semantic.min.css'\r\n\r\nconst container = document.getElementById('root');\r\nReactDom.render(<App/>,container)"],"sourceRoot":""}